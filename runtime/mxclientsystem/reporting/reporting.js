/*
    Copyright (c) 2005-2015, Mendix bv. All rights reserved.
    See licenses.txt for third party licenses that apply.
*/

//>>built
require({cache:{"reporting/widget/ReportMatrix":function(){define(["reporting/lib/MetaResult","reporting/lib/OQLSource","mxui/widget/Button","mxui/mixin/_Templated","mxui/mixin/_Contextable","mxui/mixin/_Stateful","mxui/widget","mxui/dom","dojo/_base/connect","dojo/_base/lang","dojo/_base/declare","dijit/_Container","dijit/_Contained","dojo/text!reporting/widget/templates/ReportMatrix.html"],function(_1,_2,_3,_4,_5,_6,_7,_8,_9,_a,_b,_c,_d,_e){return _7.declare("reporting.widget.ReportMatrix",{mixins:[_4,_c,_d,_5,_6],startdormant:false,showexportbutton:false,reportid:"",intervalvalues:"",target:"",pagesize:10,usepaging:false,columns:null,constructor:function(){this.templateString=_e;this.domNode=null;this.theadNode=null;this.tfootNode=null;this.tbodyNode=null;this.toolBarNode=null;this.btFirst=null;this.btPrevious=null;this.btNext=null;this.btLast=null;this.pagingNode=null;var _f=null,_10=false,_11={},_12=[],_13={},_14=[],_15=[],_16=[],_17=null,_18=this;var _19=" ";this.applyContext=function(_1a,_1b){this.startdormant=this.getState("dormant",this.startdormant);if(!this.startdormant){this.contextNotification(_1a);this.actRefreshMatrix(function(){_18._updatePagingStatus();_1b&&_1b();});}else{this.startdormant=false;_1b&&_1b();}};function _1c(arr){var obj={};for(var i=0;i<arr.length;i++){obj[arr[i]]=arr[i];}return obj;};var _1d=function(){this.domNode.style.display="";_14=_f.getSeriesData();_15=_f.getSeriesDescriptives();_16=_f.getIntervalDescriptives();_13=_1c(_f.getAggregateRows());var _1e=_f.getSeriesTypes();_17=new _1(_1e);var _1f=99/(_15.length+1);_1f=_1f.toString()+"%";var i,tr;var _20="";var _21=_8.create("th");_21.innerHTML="&nbsp;";_21.setAttribute("width","1%");tr=_8.create("tr",{},_21);this.theadNode.appendChild(tr);var _22={};var _23;for(i=0;i<_15.length;i++){_23=this.columns[i];_20=_15[i].toString();_20=(_20==="")?" ":_20;_21=_8.create("th",{"class":this._getAlignmentClass(_23.alignment)},_20);_21.setAttribute("width",_23.weight+"%");if(!_23.weight){_22[i]=true;}else{tr.appendChild(_21);}}for(i=0;i<_16.length;i++){_20=_16[i].toString();_20=(/^\s*$/.test(_20))?"&nbsp;":_20;var _24=_8.create("th");_24.innerHTML=_20;tr=_8.create("tr",{},_24);tr.setAttribute("offset",i);if(_13[i]!=null){tr.className="mx-reportmatrix-aggregate-row";}for(var j=0;j<_15.length;j++){if(!_22[j]){_20=_14[j][i]!=null?_14[j][i]:_19;if((typeof _20!="boolean")&&(typeof _20!="number")){_20=(_20==="")?" ":_17.getRenderValue(j,_20);}else{_20=_17.getRenderValue(j,_20);}_20=(_20==="")?" ":_20;_21=_8.create("td",{"class":this._getAlignmentClass(this.columns[j].alignment)},_20);tr.appendChild(_21);}}this.tbodyNode.appendChild(tr);}};this.actInitialize=function(_25){if(this.reportid===""){logger.error(this.id+".actInitialize : No report parameter passed. Aborting!");throw ("No report parameter passed to Report Matrix : aborting!");}if(!this.usepaging){this.pagingNode.style.display="none";}try{_8.empty(this.theadNode);_8.empty(this.tbodyNode);_8.empty(this.tfootNode);}catch(e){}this._fillMatrix=_a.hitch(this,_1d);_25();};this.actSetupOQLSource=function(_26){_f=new _2({reportid:this.reportid,page:(this.usepaging)?this.pagesize:null,startdormant:true,load:_26});};this.actRunReport=function(_27){_10=true;_f.execQuery(_27);};this._fillMatrix=function(){};this.actRefreshMatrix=function(_28){this.actRunReport(function(){_18._refreshView();_28&&_28();});};this._refreshView=function(){this._resetMatrix();this._updatePagingStatus();this._fillMatrix();};this.actSetupEvents=function(_29){_12.push(_9.subscribe("report_"+this.mxform.hash,this,"topicUpdate"));this.connect(this.tbodyNode,"ondblclick","eventMatrixClicked");if(this.showexportbutton){var _2a=new _3({"caption":window.mx.ui.translate(this.declaredClass,"excel_btn_caption"),"onClick":_a.hitch(this,"eventExcelExportClicked"),"cssClasses":["reportingReportMatrix_exportButton"],"iconUrl":"mxclientsystem/reporting/ui/widget/images/ReportMatrix/icnExcel.gif"});this.toolBarNode.appendChild(_2a.domNode);}else{this.toolBarNode.style.display="none";}if(this.usepaging){var ltr=this.isLeftToRight(),_2b=document.createDocumentFragment(),$=_8.create;this.btFirst=new _3({iconClass:"glyphicon "+(ltr?"glyphicon-step-backward":"glyphicon-step-forward"),"onClick":_a.hitch(this,"eventPagingButtonClicked","first")});_2b.appendChild($("#",this.btFirst.domNode," "));this.btPrevious=new _3({iconClass:"glyphicon "+(ltr?"glyphicon-backward":"glyphicon-forward"),"onClick":_a.hitch(this,"eventPagingButtonClicked","previous")});_2b.appendChild($("#",this.btPrevious.domNode," "));this._pagingStatusNode=$("div",{"class":"dijitInline mx-grid-paging-status"});_2b.appendChild($("#",this._pagingStatusNode," "));this.btNext=new _3({iconClass:"glyphicon "+(ltr?"glyphicon-forward":"glyphicon-backward"),"onClick":_a.hitch(this,"eventPagingButtonClicked","next")});_2b.appendChild($("#",this.btNext.domNode," "));this.btLast=new _3({iconClass:"glyphicon "+(ltr?"glyphicon-step-forward":"glyphicon-step-backward"),"onClick":_a.hitch(this,"eventPagingButtonClicked","last")});_2b.appendChild($("#",this.btLast.domNode," "));this.pagingNode.appendChild(_2b);_8.disableSelection(this.pagingNode);}_29&&_29();};this._resetMatrix=function(){try{_8.empty(this.theadNode);_8.empty(this.tbodyNode);_8.empty(this.tfootNode);}catch(e){}};this._updatePagingStatus=function(){if(!this.usepaging){return;}_8.text(this._pagingStatusNode,_f.getStatusMessage());if(_f.atBeginning()){this.btFirst.set("disabled",true);this.btPrevious.set("disabled",true);}else{this.btFirst.set("disabled",false);this.btPrevious.set("disabled",false);}if(_f.atEnd()){this.btNext.set("disabled",true);this.btLast.set("disabled",true);}else{this.btNext.set("disabled",false);this.btLast.set("disabled",false);}};this.topicUpdate=function(){_f.first();this.actRefreshMatrix();};this.contextNotification=function(_2c){var _2d=_2c.getParams();for(var p in _2d){_11[p]=_2d[p];}_f.first();_f.setParams(_11);};this.contextUpdate=function(){};this.eventMatrixClicked=function(e){var _2e=e.target,tr=_2e.parentNode,_2f=parseInt(tr.getAttribute("offset")),_30=this.createContext();_30.dupFrom(this.mxcontext);var _31=this.intervalvalues;if(_31!==""){try{for(var i=0;i<_31.length;i++){var key=_31[i];if(key!==""&&!_30.hasParam(key)){var _32=_14[i][_2f];_30.setParam(key,_32);}}}catch(err){}}if(this.target!==""){window.mx.ui.openFormInContent(this.target,"",_30);}else{}};this.eventExcelExportClicked=function(){window.mx.server.request({request:{action:"report_export_excel",params:{reportid:this.reportid,params:_f.getQueryParameters()}},options:{callback:window.mx.data.mxObjectsCallback(function(_33){window.mx.ui.downloadFile({mxobject:_33[0]});}),useCache:false}});};this.eventPagingButtonClicked=function(_34){switch(_34.toLowerCase()){case "first":if(!_f.atBeginning()){_f.first(_a.hitch(this,"_refreshView"));}break;case "last":if(!_f.atEnd()){_f.last(_a.hitch(this,"_refreshView"));}break;case "next":if(!_f.atEnd()){_f.next(_a.hitch(this,"_refreshView"));}break;case "previous":if(!_f.atBeginning()){_f.previous(_a.hitch(this,"_refreshView"));}break;default:break;}};this.uninitialize=function(){try{for(var i=0;i<_12.length;i++){_12[i].remove();}_7.destroyChildren(this.toolBarNode);}catch(e){}};this.storeState=function(_35){_35("dormant",!_10);};this._getAlignmentClass=function(_36){if(window.mx.ui.isRtl()){_36=_36=="right"?"left":"right";}return {left:"mx-left-aligned",right:"mx-right-aligned",center:"mx-center-aligned"}[_36];};},postCreate:function(){this.initContext();var _37="context_seed_"+this.mxform.hash,_38=_9.subscribe(_37,_a.hitch(this,"contextNotification"));this.addOnDestroy(function(){_38.remove();});this.sequence(["actInitialize","actSetupOQLSource","actSetupEvents","actLoaded"]);}});});},"reporting/lib/MetaResult":function(){define([],function(){function _39(_3a){this.getRenderValue=function(_3b,_3c){var _3d=_3a[_3b];switch(_3d.type){case "Boolean":var _3e=String(_3c);return _3e.match(/true|false/)?window.mx.ui.translate("mxui.widget.DataGrid",_3e):_3c;case "Date":case "DateTime":if(typeof _3c=="string"){return _3c;}var _3f=window.mx.parser.formatDate(_3c,{datePattern:_3d.format});if(window.mx.ui.isRtl()&&_3f){_3f=_3f.split("‏/").reverse().join("/");}return _3f;case "Enum":if(_3d.options){for(var i=0;i<_3d.options.length;i++){var _40=_3d.options[i];for(var key in _40){if(_3c==key){return _40[key];}break;}}}return _3c;default:return String(_3c);}};};return _39;});},"reporting/lib/OQLSource":function(){define(["reporting/store/ParameterStore","mendix/lang","mendix/logger","dojo/_base/lang"],function(_41,_42,_43,_44){var _45=function(_46){var _47="reporting.lib.OQLSource";var _48=(_46.reportid||null);var _49=(_46.startdormant||true);var _4a=_46.page;var _4b={information:{title:"Empty report",xaxis:"X",yaxis:"Y"},interval_descriptives:[],series_descriptives:[],series_data:[]};var _4c={};var _4d={};var _4e=0;var _4f=0;var _50=function(_51){window.mx.server.request({request:{action:"report_retrieve_params",params:{actiontype:"retrieve_params",reportid:_48}},options:{callback:function(_52,res){if(!res||!res.report||!res.report.params){_43.error(_47+"["+_48+"].actGetQueryParams.callback: "+"No valid report parameters received!");}else{_4c=res.report.params;}_51();}}});};var _53=function(_54){_41.registerParams(_48,_4c);_54&&_54();};var _55=function(_56){window.mx.server.request({request:{action:"report",params:{reportid:_48,offset:_4e,limit:_4a||null,params:_4d}},options:{callback:function(_57,res){if(!res||!res.report){_43.error(_47+"["+_48+"].actExecQuery.callback: "+"No valid report structure received!");}else{_4b=res.report;if(res.report.information&&res.report.information.count){_4f=res.report.information.count;}}_56();},error:function(e){window.mx.onError(e);_56();}}});};this.execQuery=function(_58){_55(_58||function(){});};var _59=_44.hitch(this,"execQuery");this.getQueryParameters=function(){return _4d;};this.getInformation=function(){return _4b.information;};this.getSeriesDescriptives=function(){return _4b.series_descriptives;};this.getAggregateRows=function(){return _4b.aggregate_rows||[];};this.getSeriesTypes=function(){return _4b.series_info||[];};this.getIntervalType=function(){return _4b.interval_info||{};};this.getIntervalDescriptives=function(){if(_4b.interval_descriptives&&_4b.interval_descriptives.length&&_4b.interval_descriptives.length!==0){return _4b.interval_descriptives;}else{if(_4b.series_data.length>0){var res=[];for(var i=0;i<_4b.series_data[0].length;i++){res.push(" ");}return res;}else{return [];}}};this.getSeriesData=function(row){return row?_4b.series_data[row]:_4b.series_data;};this.setParams=function(_5a){_4d={};for(var i in _5a){if(!i.match(/_config_hash/)){if(_5a[i]!==""){_4d[i]=_5a[i];}}else{if(!i.match(/_config_hash/)){}}}};this.size=function(){return _4f;};this.getSize=function(){return this.size();};this.getPageSize=function(){return (_4a);};this.setPageSize=function(n,_5b){_4a=n;_5b&&_59(_5b);};this.getOffset=function(){return (_4e);};this.setOffset=function(n,_5c){_4e=n;_5c&&_59(_5c);};this.setPageSize=function(n,_5d){_4a=n;_5d&&_59(_5d);};this.getOffset=function(){return (_4e);};this.first=function(_5e){_4e=0;_5e&&_59(_5e);};this.last=function(_5f){if(_4a>=_4f){_4e=0;}else{_4e=_4f-_4a;}_5f&&_59(_5f);};this.next=function(_60){if(_4e>=(_4f-_4a)){_4e=_4f-_4a;}else{_4e+=_4a;}_60&&_59(_60);};this.previous=function(_61){if((_4f<_4a)||((_4e-_4a)<=0)){_4e=0;}else{_4e-=_4a;}_61&&_59(_61);};this._getstats=function(){var _62=_4b;if(_62){var _63=_62.information.count;if(_63==null){_63=_4f;}var _64=_62.series_data;var agl=_62.aggregate_rows?_62.aggregate_rows.length:0;var _65=_64.length?_64[0].length-agl:0;var st=_65!==0?_4e+1:_4e;var en=_4e+_65;return [st,en,_63];}return [0,0,0];};this.getStatusMessage=function(){return window.mx.ui.translate("mxui.lib.MxDataSource","status",this._getstats());};this.atBeginning=function(){return _4e===0;};this.atEnd=function(){var _66=this._getstats();return _66[1]>=_66[2];};_42.sequence([_44.hitch(this,_50),_44.hitch(this,_53),!_49?_44.hitch(this,_55):_42.nullExec],function(){_46.load&&_42.thread(_46.load,null);});};return _45;});},"reporting/store/ParameterStore":function(){define([],function(){var _67={};var _68={};return {registerParams:function(id,_69){_67[id]=_69;if(_68[id]){for(var i=0;i<_68[id].length;i++){_68[id][i](_69);}_68[id]=null;}},retrieveParams:function(id,_6a){if(_67[id]){_6a(_67[id]);}else{if(!_68[id]){_68[id]=[];}_68[id].push(_6a);}}};});},"reporting/widget/ReportChart":function(){define(["reporting/FusionChartsFree/FusionChartsFree","reporting/lib/OQLSource","reporting/lib/ChartBuilder","mxui/widget","mxui/mixin/_Templated","mxui/mixin/_Contextable","mxui/mixin/_Stateful","dojo/dom-geometry","dojo/_base/connect","dojo/_base/declare","dijit/_Container","dijit/_Contained","dojo/text!reporting/widget/templates/ReportChart.html"],function(_6b,_6c,_6d,_6e,_6f,_70,_71,_72,_73,_74,_75,_76,_77){return _6e.declare("reporting.widget.ReportChart",{mixins:[_6f,_75,_76,_70,_71],aspect:"",reportid:"",yaxisminimum:"",yaxismaximum:"",yaxisprecision:0,yaxiscaption:"",xaxiscaption:"",charttype:"",nested:false,startdormant:false,width:550,height:350,chartTypes:{MSBar2D:"",MSLine:"",MSArea2D:"",MSColumn2D:"",MSColumn3D:"",StackedArea2D:"",StackedBar2D:"",StackedColumn2D:"",StackedColumn3D:""},constructor:function(){this.templateString=_77;this.domNode=null;this.chartNode=null;this._chartTarget="MSColumn3D";var _78="";var _79={};var _7a=[];var _7b="mxclientsystem/reporting/FusionChartsFree/charts/";var _7c=null,_7d={},_7e=false;this.applyContext=function(_7f,_80){this.startdormant=this.getState("dormant",this.startdormant);if(!this.startdormant){this.contextNotification(_7f);this.refresh(_80);}else{this.startdormant=false;_80&&_80();}};this.actSetupOQLSource=function(_81){_7c=new _6c({reportid:this.reportid,startdormant:this.startdormant,load:_81});};this.actSetupChart=function(_82){var swf="FCF_"+this._chartTarget+".swf",_83=this.id+"_flashNode",_84=this.getChartSize();_79={rendered:false,node:this.chartNode,flash:new _6b.Chart(_7b+swf,_83,_84.width,_84.height,"0","1"),_id:_83};_79.node.id=this.id+"_parentNode";this.loaded();_82();};this.actRunReport=function(_85){_7e=true;_7c.execQuery(_85);};this.getChartSize=function(){var asp=null;if(this.aspect){try{var _86=this.aspect.split(/:/);asp=parseInt(_86[1],10)/parseInt(_86[0],10);}catch(e){}}if(!asp){asp=0.5;}var _87=_72.getContentBox(this.domNode.parentNode);return {width:_87.w||this.width,height:(this.width*asp)*0.7};};this.actFillChart=function(_88){this.domNode.style.display="";_78=_6d({oqlsource:_7c,ymin:this.yaxisminimum,ymax:this.yaxismaximum,precision:this.yaxisprecision,xcaption:this.xaxiscaption,ycaption:this.yaxiscaption});try{if(_79.rendered){_6b.updateChartXML(_79._id,_78);}else{_79.flash.setDataXML(_78);_79.rendered=true;_79.flash.render(_79.node.id);}}catch(e){logger.error(this.id+".actFillChart : Problem rendering chart : "+e.message);}_88&&_88();};this.actRegisterUIEvents=function(_89){_7a.push(_73.subscribe("report_"+this.mxform.hash,this,"topicUpdate"));_89();};this.refresh=function(_8a){this.sequence(["actRunReport","actFillChart"],_8a);};this.topicUpdate=function(){this.refresh();};this.contextNotification=function(_8b){var _8c=_8b.getParams();for(var p in _8c){_7d[p]=_8c[p];}_7c.setParams(_7d);};this.uninitialize=function(){for(var i=0;i<_7a.length;i++){_7a[i].remove();}};this.storeState=function(_8d){_8d("dormant",!_7e);};},postCreate:function(){this.initContext();if(this.charttype===""){}else{if(this.charttype in this.chartTypes){this._chartTarget=this.charttype;}else{}}if(this.yaxisminimum!=""){this.yaxisminimum=parseFloat(this.yaxisminimum);}if(this.yaxismaximum!=""){this.yaxismaximum=parseFloat(this.yaxismaximum);}var _8e=["actSetupOQLSource","actSetupChart","actRegisterUIEvents"];if(!this.startdormant){_8e.push("actRunReport","actFillChart");}this.sequence(_8e);}});});},"reporting/FusionChartsFree/FusionChartsFree":function(){define([],function(){var _8f=new Object();if(typeof _8f.FusionChartsFreeUtil=="undefined"){_8f.FusionChartsFreeUtil=new Object();}_8f.FusionChartsFree=function(swf,id,w,h,_90,_91,c,_92,_93,_94,_95){if(!document.getElementById){return;}this.initialDataSet=false;this.params=new Object();this.variables=new Object();this.attributes=new Array();if(swf){this.setAttribute("swf",swf);}if(id){this.setAttribute("id",id);}if(w){this.setAttribute("width",w);}if(h){this.setAttribute("height",h);}if(c){this.addParam("bgcolor",c);}this.addParam("quality","high");this.addParam("allowScriptAccess","always");this.addVariable("chartWidth",w);this.addVariable("chartHeight",h);_90=_90?_90:0;this.addVariable("debugMode",_90);this.addVariable("DOMId",id);_91=_91?_91:0;this.addVariable("registerWithJS",_91);_92=_92?_92:"noScale";this.addVariable("scaleMode",_92);_93=_93?_93:"EN";this.addVariable("lang",_93);this.detectFlashVersion=_94?_94:1;this.autoInstallRedirect=_95?_95:1;this.installedVer=_8f.FusionChartsFreeUtil.getPlayerVersion();if(!window.opera&&document.all&&this.installedVer.major>7){_8f.FusionChartsFree.doPrepUnload=true;}};_8f.FusionChartsFree.prototype={setAttribute:function(_96,_97){this.attributes[_96]=_97;},getAttribute:function(_98){return this.attributes[_98];},addParam:function(_99,_9a){this.params[_99]=_9a;},getParams:function(){return this.params;},addVariable:function(_9b,_9c){this.variables[_9b]=_9c;},getVariable:function(_9d){return this.variables[_9d];},getVariables:function(){return this.variables;},getVariablePairs:function(){var _9e=new Array();var key;var _9f=this.getVariables();for(key in _9f){_9e.push(key+"="+_9f[key]);}return _9e;},getSWFHTML:function(){var _a0="";if(navigator.plugins&&navigator.mimeTypes&&navigator.mimeTypes.length){_a0="<embed type=\"application/x-shockwave-flash\" src=\""+this.getAttribute("swf")+"\" width=\""+this.getAttribute("width")+"\" height=\""+this.getAttribute("height")+"\"  ";_a0+=" id=\""+this.getAttribute("id")+"\" name=\""+this.getAttribute("id")+"\" ";_a0+="wmode=\"transparent\" ";var _a1=this.getParams();for(var key in _a1){_a0+=[key]+"=\""+_a1[key]+"\" ";}var _a2=this.getVariablePairs().join("&");if(_a2.length>0){_a0+="flashvars=\""+_a2+"\"";}_a0+="/>";}else{_a0="<object id=\""+this.getAttribute("id")+"\" classid=\"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000\" width=\""+this.getAttribute("width")+"\" height=\""+this.getAttribute("height")+"\">";_a0+="<param name=\"movie\" value=\""+this.getAttribute("swf")+"\" />";_a0+="<param name=\"wmode\" value=\"transparent\" />";var _a1=this.getParams();for(var key in _a1){_a0+="<param name=\""+key+"\" value=\""+_a1[key]+"\" />";}var _a2=this.getVariablePairs().join("&");if(_a2.length>0){_a0+="<param name=\"flashvars\" value=\""+_a2+"\" />";}_a0+="</object>";}return _a0;},setDataURL:function(_a3){if(this.initialDataSet==false){this.addVariable("dataURL",_a3);this.initialDataSet=true;}else{var _a4=_8f.FusionChartsFreeUtil.getChartObject(this.getAttribute("id"));_a4.setDataURL(_a3);}},setDataXML:function(_a5){if(this.initialDataSet==false){this.addVariable("dataXML",_a5);this.initialDataSet=true;}else{var _a6=_8f.FusionChartsFreeUtil.getChartObject(this.getAttribute("id"));_a6.setDataXML(_a5);}},render:function(_a7){if((this.detectFlashVersion==1)&&(this.installedVer.major<6)){if(this.autoInstallRedirect==1){var _a8=window.confirm("You need Adobe Flash Player 6 (or above) to view the charts. It is a free and lightweight installation from Adobe.com. Please click on Ok to install the same.");if(_a8){window.location="http://www.adobe.com/shockwave/download/download.cgi?P1_Prod_Version=ShockwaveFlash";}else{return false;}}else{return false;}}else{var n=(typeof _a7=="string")?document.getElementById(_a7):_a7;n.innerHTML=this.getSWFHTML();if(!document.embeds[this.getAttribute("id")]&&!window[this.getAttribute("id")]){window[this.getAttribute("id")]=document.getElementById(this.getAttribute("id"));}return true;}}};_8f.FusionChartsFreeUtil.getPlayerVersion=function(){var _a9=new _8f.PlayerVersion([0,0,0]);if(navigator.plugins&&navigator.mimeTypes.length){var x=navigator.plugins["Shockwave Flash"];if(x&&x.description){_a9=new _8f.PlayerVersion(x.description.replace(/([a-zA-Z]|\s)+/,"").replace(/(\s+r|\s+b[0-9]+)/,".").split("."));}}else{if(navigator.userAgent&&navigator.userAgent.indexOf("Windows CE")>=0){var axo=1;var _aa=3;while(axo){try{_aa++;axo=new ActiveXObject("ShockwaveFlash.ShockwaveFlash."+_aa);_a9=new _8f.PlayerVersion([_aa,0,0]);}catch(e){axo=null;}}}else{try{var axo=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.7");}catch(e){try{var axo=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6");_a9=new _8f.PlayerVersion([6,0,21]);axo.AllowScriptAccess="always";}catch(e){if(_a9.major==6){return _a9;}}try{axo=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");}catch(e){}}if(axo!=null){_a9=new _8f.PlayerVersion(axo.GetVariable("$version").split(" ")[1].split(","));}}}return _a9;};_8f.PlayerVersion=function(_ab){this.major=_ab[0]!=null?parseInt(_ab[0]):0;this.minor=_ab[1]!=null?parseInt(_ab[1]):0;this.rev=_ab[2]!=null?parseInt(_ab[2]):0;};_8f.FusionChartsFreeUtil.cleanupSWFs=function(){var _ac=document.getElementsByTagName("OBJECT");for(var i=_ac.length-1;i>=0;i--){_ac[i].style.display="none";for(var x in _ac[i]){if(typeof _ac[i][x]=="function"){_ac[i][x]=function(){};}}}};if(_8f.FusionChartsFree.doPrepUnload){if(!_8f.unloadSet){_8f.FusionChartsFreeUtil.prepUnload=function(){__flash_unloadHandler=function(){};__flash_savedUnloadHandler=function(){};window.attachEvent("onunload",_8f.FusionChartsFreeUtil.cleanupSWFs);};window.attachEvent("onbeforeunload",_8f.FusionChartsFreeUtil.prepUnload);_8f.unloadSet=true;}}if(!document.getElementById&&document.all){document.getElementById=function(id){return document.all[id];};}if(Array.prototype.push==null){Array.prototype.push=function(_ad){this[this.length]=_ad;return this.length;};}_8f.FusionChartsFreeUtil.getChartObject=function(id){var _ae=null;if(navigator.appName.indexOf("Microsoft Internet")==-1){if(document.embeds&&document.embeds[id]){_ae=document.embeds[id];}else{_ae=window.document[id];}}else{_ae=window[id];}if(!_ae){_ae=document.getElementById(id);}return _ae;};_8f.FusionChartsFreeUtil.updateChartXML=function(_af,_b0){var _b1=_8f.FusionChartsFreeUtil.getChartObject(_af);_b1.SetVariable("_root.dataURL","");_b1.SetVariable("_root.isNewData","1");_b1.SetVariable("_root.newData",_b0);_b1.TGotoLabel("/","JavaScriptHandler");};return {Chart:_8f.FusionChartsFree,updateChartXML:_8f.FusionChartsFreeUtil.updateChartXML};});},"reporting/lib/ChartBuilder":function(){define(["reporting/lib/MetaResult","dojo/i18n","dojo/_base/array"],function(_b2,_b3,_b4){return function(_b5){var _b6=_b5.oqlsource.getSeriesData();var _b7=_b5.oqlsource.getSeriesDescriptives();var _b8=_b5.oqlsource.getIntervalDescriptives();var _b9=_b5.oqlsource.getInformation();var _ba=null;var _bb=null;var _bc=0;var _bd=new _b2([_b5.oqlsource.getIntervalType()]);if(typeof _b5.ymin=="number"){_ba=_b5.ymin;}if(typeof _b5.ymax=="number"){_bb=_b5.ymax;}if(typeof _b5.precision=="number"){_bc=_b5.precision;}var _be={};_be.multi=["38BDFF","387EFF","5638FF","B938FF","FF38A6","FF4538","FF8938","FFB538","FFDD38","F9FF38","C7F627","21F228"];_be.single=["0099FF","0037FF","4800FF","C800FF","FF006A","FF3300","FF7900","FFAE00","FFE100","EAFF00","97CE0C","0CCE86"];var _bf=0;function _c0(_c1){_bf=(_bf==_be[_c1].length)?0:_bf+1;return _be[_c1][_bf];};function _c2(){return _b3.getLocalization("dojo.cldr","number");};function _c3(str){return str.replace(/['"<>&]/g," ");};function _c4(str){return str.replace(/"/g,"%26quot;").replace(/'/g,"%26apos;");};_b9.title="";_b9.xaxis=_c3(_b5.xcaption);_b9.yaxis=_c3(_b5.ycaption);var _c5="<graph caption='"+_b9.title+"' xAxisName='"+_b9.xaxis+"' yAxisName='"+_b9.yaxis+"' showValues='0' rotateNames='0' slantLabels='0' showShadow='1' showToolTip='1' formatNumberScale='0'";var _c6=isNaN(_ba)?0:parseInt(_ba);var _c7=isNaN(_bb)?1:(_bb>_c6?parseInt(_bb):(_c6+1));_c5+=" yAxisMinValue='"+parseInt(_c6)+"'";_c5+=" yAxisMaxValue='"+parseInt(_c7)+"'";if(_c7==1&&_c6===0&&_bc===0){_bc=2;}if(_bc!=null){_c5+=" decimalPrecision='"+_bc+"'";}var _c8=_c2();_c5+=" thousandSeparator='"+_c8.group+"'";_c5+=" decimalSeparator='"+_c8.decimal+"'";_c5+=">";_c5+="<categories>";_b4.forEach(_b8,function(_c9){_c5+="<category name='"+_c4(_bd.getRenderValue(0,_c9))+"' />";});_c5+="</categories>";for(var i=0;i<_b7.length;i++){_c5+="<dataset seriesName='"+_c4(_b7[i])+"' color='"+_c0("multi")+"'>";for(var j=0;j<_b6[i].length;j++){_c5+="<set value='"+_b6[i][j]+"' />";}_c5+="</dataset>";}_c5+="</graph>";return _c5;};});},"reporting/widget/ReportTrigger":function(){define(["mxui/widget/_Button","dojo/dom-class","dojo/_base/connect","dojo/_base/declare"],function(_ca,_cb,_cc,_cd){return _cd(_ca,{declaredClass:"reporting.widget.ReportTrigger",buildRendering:function(){this.inherited(arguments);_cb.add(this.domNode,"reportingReportTrigger");},onClick:function(){_cc.publish("report_"+this.mxform.hash,["runreport"]);}});});},"reporting/widget/ReportParameter":function(){define(["reporting/store/ParameterStore","big/big","mxui/mixin/_Stateful","mxui/widget/_WidgetBase","mxui/dom","mendix/lang","dojo/topic","dojo/_base/declare"],function(_ce,Big,_cf,_d0,_d1,_d2,_d3,_d4){var $=_d1.create;function _d5(_d6){var _d7=String(_d6);return (_d7.match(/true|false/))?mx.ui.translate("mxui.widget.DataGrid",_d7):_d6;};function _d8(arr){var _d9="reporting.widget.ReportParameter";if(arr[0]===""&&arr[1]===""){return window.mx.ui.translate(_d9,"all");}else{if(arr[0]===""){return window.mx.ui.translate(_d9,"less_than",arr[1].toString());}else{if(arr[1]===""){return window.mx.ui.translate(_d9,"greater_than",arr[0].toString());}else{return window.mx.ui.translate(_d9,"from_to",[arr[0].toString(),arr[1].toString()]);}}}};function _da(_db,_dc){var ret=[];if(_dc=="enum"){ret=_db;}else{if(_dc=="boolean"||_dc=="datetime"){if(typeof _db[0]=="string"){for(var i=0;i<_db.length;i++){ret.push([_db[i],_db[i]]);}}else{ret=_db;}}else{if(_dc=="decimal"){if(_db.isRange){for(var i=0,val;val=_db.values[i];i++){ret.push([i,_d8(val)]);}}else{ret={};for(var i=0,val;val=_db.values[i];i++){if(val[0]===""||val[1]===""){continue;}var _dd=new Big(val[0]),to=new Big(val[1]);for(var j=_dd;j.lt(to);j=j.plus(1)){ret[j.toString()]=j.toString();}}}}else{if(_db.values){ret=_db.values;}else{ret=_db;}}}}if(ret.length!=null){var old=ret;ret={};for(var i=0,val;val=old[i];i++){ret[val[0]]=_d5(val[1]||val[0]);}}return ret;};var _de=_d4([_d0,_cf],{parameter:"",paramtype:"",reportid:"",autoLoad:false,_selectNode:null,_parameterInfo:null,buildRendering:function(){this.domNode=$("div",{"class":"reportingReportParameter"},this._selectNode=$("select",{"class":"form-control"}));this.connect(this._selectNode,"change",function(e){e.stopPropagation();this._onChange();});},postCreate:function(){var _df=this;_ce.retrieveParams(this.reportid,function(_e0){_df._parameterInfo=_e0[_df.parameter];if(!_df._parameterInfo){_df.set("loaded",true);return;}var _e1=_da(_df._parameterInfo,_df.paramtype);_d1.setSelectOptions(_df._selectNode,_e1,"");_df.set("loaded",true);});},update:function(_e2,_e3){var _e4=this.getState("value",this.mxcontext.hasParam(this.parameter)?this.mxcontext.getParam(this.parameter):undefined);if(_e4!==undefined){if(this.paramtype=="decimal"){if(this._parameterInfo.isRange&&!(_e4 instanceof Array)){var _e5=new Big(_e4);_e4=_d2.find(this._parameterInfo.values,function(_e6){return (_e6[0]===""||_e5.gte(_e6[0]))&&(_e6[1]===""||_e5.lt(_e6[1]));});}var _e7=(_e4 instanceof Array)?_d8(_e4):_e4;_d1.selectOptionByText(this._selectNode,_e7);}else{_d1.selectOptionByValue(this._selectNode,_e4.toString());}}else{_d1.selectOptionByValue(this._selectNode,"");}this._onChange();_e3&&_e3();},_getValue:function(){var _e8=_d1.getSelectedValue(this._selectNode);if(this._parameterInfo.isRange&&_e8!=""){_e8=this._parameterInfo.values[parseInt(_e8,10)];}return _e8;},_onChange:function(){this.mxcontext.setParam(this.parameter,this._getValue());_d3.publish("context_seed_"+this.mxform.hash,this.mxcontext);},storeState:function(_e9){_e9("value",this._getValue());}});return _de;});},"reporting/widget/DateRange":function(){define(["reporting/lib/DateHelpers","mxui/mixin/_Stateful","mxui/widget/_WidgetBase","mxui/dom","mxui/widget/DatePicker","dojo/date/locale","dojo/topic","dojo/_base/array","dojo/_base/declare"],function(_ea,_eb,_ec,_ed,_ee,_ef,_f0,_f1,_f2){var _f3=_f2(_ec,{_items:null,postCreate:function(){this.connect(this.domNode,"change","onChange");_ed.setSelectOptions(this.domNode,{},"");},setItems:function(_f4){if(_f4){this._items=_f4;var _f5={};_f1.forEach(this._items,function(_f6,_f7){_f5[_f7]=_f6.display;});_ed.setSelectOptions(this.domNode,_f5,"");}},getDateInterval:function(){var _f8=_ed.getSelectedValue(this.domNode);return _f8!==""?this._items[_f8]:{from:"",to:""};},_getValueAttr:function(){return _ed.getSelectedText(this.domNode);},_setValueAttr:function(_f9){_ed.selectOptionByText(this.domNode,_f9);},onChange:function(){}});var _fa={set:function(){},get:function(){return "";},onChange:function(){},setItems:function(){}};function _fb(_fc,_fd){var _fe=[];for(var _ff=_fc;_ff<=_fd;_ff++){_fe.push({display:_ff.toString(),from:new Date(_ff,0,1),to:new Date(_ff+1,0,0)});}return _fe;};var _100={period:function(year){var _101=_ea.getFirstWeekOfYear(year);var end=_101;var _102=[];var _103=year;var _104=1;var test=_ea.getFirstWeekOfYear(year+1);while(year==_103&&test>end){var _105=_101;end=_101+=(4*_ea.weekMs);if(_104==14){end=test;}end-=_ea.dayMs;_102.push({from:new Date(_105),to:new Date(end),display:String(_104++)});year=new Date(_101).getUTCFullYear();}return _102;},quarter:function(year){return _f1.map([0,1,2,3],function(_106){return {display:(_106+1).toString(),from:new Date(year,_106*3,1),to:new Date(year,_106*3+3,0)};});},month:function(year){return _f1.map(_ef.getNames("months","wide"),function(_107,_108){return {display:_107,from:new Date(year,_108,1),to:new Date(year,_108+1,0)};});},week:function(year){var _109=new Date(_ea.getFirstWeekOfYear(year)),_10a=[],i=1;do{var _10b=new Date(_109.getTime()+_ea.weekMs-1);_10a.push({display:"Week "+(i++).toString(),from:_109,to:_10b});_109=new Date(_10b.getTime()+1);}while(_109.getFullYear()==year);return _10a;}};var _10c=["period","quarter","month","week"],_10d=_10c.concat(["year"]);var _10e=_f2([_ec,_eb],{reportid:"",parameter:"",startYear:null,endYear:null,hasDates:true,_periodSelectorsParameterName:"",_periodSelectors:null,_dateInputs:null,_value:null,postCreate:function(){this._periodSelectorsParameterName=this.parameter.toString()+"_config_hash";this._periodSelectors={};this._dateInputs={};this._value={from:"",to:""};this._buildPeriodSelectors();this._periodSelectors.year.setItems(_fb(this.startYear,this.endYear));this._subscribeToYearChange();this._subscribeToPeriodChange();if(this.hasDates){this._buildDateInputs();this._subscribeToDateChange();}},_buildPeriodSelectors:function(){var self=this;_f1.forEach(_10d,function(_10f){var _110=self.domNode.querySelector("select[name='"+_10f+"']");self._periodSelectors[_10f]=_110?new _f3({},_110):_fa;});},_buildDateInputs:function(){var self=this;_f1.forEach(["from","to"],function(name,_111){var _112=self.domNode.querySelector("input[name='"+name+"']"),_113=new _ee({selector:"date"});_112.parentNode.replaceChild(_113.domNode,_112);self._dateInputs[name]=_113;});},_subscribeToYearChange:function(){var self=this;this.connect(this._periodSelectors.year,"onChange",function(){var year=this._periodSelectors.year.get("value");if(year==""){_f1.forEach(_10c,function(_114){self._periodSelectors[_114].setItems([]);});}else{this._setValue(this._periodSelectors.year.getDateInterval());_f1.forEach(_10c,function(_115){var _116=self._periodSelectors[_115].get("value");self._periodSelectors[_115].setItems(_100[_115](year));if(_116!=""){self._periodSelectors[_115].set("value",_116);self._periodSelectors[_115].onChange();}});this._onChange();}});},_subscribeToPeriodChange:function(){var self=this;_f1.forEach(_10c,function(_117){var _118=self._periodSelectors[_117];self.connect(_118,"onChange",function(){if(_118.get("value")===""){return;}self._setValue(_118.getDateInterval());_f1.forEach(_10c,function(_119){if(_119!=_117){self._periodSelectors[_119].set("value","");}});self._onChange();});});},_subscribeToDateChange:function(){var self=this;_f1.forEach(["from","to"],function(name){self.connect(self._dateInputs[name],"onChange",function(){var _11a=self._dateInputs[name].get("value");self._value[name]=_11a;if(_11a!==""){_f1.forEach(_10c,function(_11b){self._periodSelectors[_11b].set("value","");});if(_11a.getFullYear()!=self._periodSelectors.year.get("value")){self._periodSelectors.year.set("value","");}}self._onChange();});});},startup:function(){this.domNode.parentNode.style.padding="0px";this.inherited(arguments);},update:function(_11c,_11d){var _11e=this.getState("value",this.mxcontext.hasParam(this.parameter)?this.mxcontext.getParam(this.parameter):""),_11f=this.getState("config",this.mxcontext.hasParam(this._periodSelectorsParameterName)?this.mxcontext.getParam(this._periodSelectorsParameterName):""),self=this;if(_11f){this._periodSelectors.year.set("value",_11f["year"]);this._periodSelectors.year.onChange();_f1.forEach(_10c,function(_120){self._periodSelectors[_120].set("value",_11f[_120]);});}if(_11e){var _121="",_122="";if(_11e.length){_121=new Date(_11e[0]);_122=new Date(_11e[1]);}else{if(_11e!=""){_121=_122=new Date(_11e);}}if(this.hasDates){this._dateInputs.from.set("value",_121);this._dateInputs.to.set("value",_122);}this._value={from:_121,to:_122};}this._onChange();_11d&&_11d();},_setValue:function(_123){if(this.hasDates){this._dateInputs.from.set("value",_123.from);this._dateInputs.to.set("value",_123.to);}this._value=_123;},_getValue:function(){return this._value.from!=""&&this._value.to!=""?[this._value.from.getTime(),this._value.to.getTime()]:"";},_getSelectorConfig:function(){var self=this,_124={};_f1.forEach(_10d,function(_125){_124[_125]=self._periodSelectors[_125].get("value");});return _124;},_onChange:function(){this.mxcontext.setParam(this.parameter,this._getValue());this.mxcontext.setParam(this._periodSelectorsParameterName,this._getSelectorConfig());_f0.publish("context_seed_"+this.mxform.hash,this.mxcontext);},storeState:function(_126){_126("value",this._getValue());_126("config",this._getSelectorConfig());}});return _10e;});},"reporting/lib/DateHelpers":function(){define(["dojo/date","dojo/_base/kernel"],function(_127,_128){var _129=1000*60*60*24,_12a=_129*7,_12b=4;function _12c(){return (_128.locale.match(/nl/i))?1:0;};return {weekMs:_12a,dayMs:_129,getFirstWeekOfYear:function(year){var date=new Date(year,0,1),day=date.getDay(),_12d=date.getTime();if(day===0){return date.getTime();}_12d-=(day-_12c())*_129;date=new Date(_12d);if(date.getMonth()!==0){var _12e=_127.getDaysInMonth(date)-(7-_12b);if(date.getDate()<=_12e){return _12d+_12a;}}else{var _12f=1+_12b;if(date.getDate()>=_12f){return _12d-_12a;}}return _12d;}};});},"url:reporting/widget/templates/ReportMatrix.html":"<div class=\"mx-grid mx-reportmatrix\" style=\"display:none;\">\n\t<div class=\"mx-grid-controlbar clearfix\" focusIndex=\"0\">\n        <div class=\"mx-grid-pagingbar\" dojoAttachPoint=\"pagingNode\"></div>\n        <div class=\"mx-grid-toolbar\" dojoAttachPoint=\"toolBarNode\"></div>\n\t</div>\n\t<div class=\"mx-grid-content\" focusIndex=\"1\">\n        <table class=\"table table-bordered table-striped mx-reportmatrix-table\">\n            <thead dojoAttachPoint=\"theadNode\"></thead>\n            <tbody dojoAttachPoint=\"tbodyNode\"></tbody>\n            <tfoot dojoAttachPoint=\"tfootNode\"></tfoot>\n        </table>\n    </div>\n</div>\n","url:reporting/widget/templates/ReportChart.html":"<div class=\"ReportCharts\" style=\"z-index:-1;display:none;\">\n\t<div style=\"clear:both\"/>\n\t<div style=\"text-align:center; padding:10px 0px 10px;\">\n\t\t<div dojoAttachPoint=\"chartNode\">\n\t\t</div>\n\t</div>\n</div>\n"}});require(["reporting/widget/ReportMatrix","reporting/widget/ReportChart","reporting/widget/ReportTrigger","reporting/widget/ReportParameter","reporting/widget/DateRange","mxui/dom","dojo/_base/config"],function(_130,_131,_132,_133,_134,dom,_135){window.reporting={widget:{ReportMatrix:_130,ReportChart:_131,ReportTrigger:_132,ReportParameter:_133,DateRange:_134}};dom.addCss("mxclientsystem/reporting/ui/base.css?"+_135.cacheBust);});