/*
    Copyright (c) 2005-2015, Mendix bv. All rights reserved.
    See licenses.txt for third party licenses that apply.
*/

//>>built
require({cache:{"reporting/widget/ReportMatrix":function(){define(["reporting/lib/MetaResult","reporting/lib/OQLSource","mxui/widget/Button","mxui/mixin/_Templated","mxui/mixin/_Contextable","mxui/mixin/_Stateful","mxui/widget","mxui/dom","mendix/lib/MxObject","dojo/_base/connect","dojo/_base/lang","dojo/_base/declare","dijit/_Container","dijit/_Contained","dojo/text!reporting/widget/templates/ReportMatrix.html"],function(_1,_2,_3,_4,_5,_6,_7,_8,_9,_a,_b,_c,_d,_e,_f){return _7.declare("reporting.widget.ReportMatrix",{mixins:[_4,_d,_e,_5,_6],startdormant:false,showexportbutton:false,reportid:"",intervalvalues:"",target:"",pagesize:10,usepaging:false,columns:null,constructor:function(){this.templateString=_f;this.domNode=null;this.theadNode=null;this.tfootNode=null;this.tbodyNode=null;this.toolBarNode=null;this.btFirst=null;this.btPrevious=null;this.btNext=null;this.btLast=null;this.pagingNode=null;var _10=null,_11=false,_12={},_13=[],_14={},_15=[],_16=[],_17=[],_18=null,_19=this;var _1a=" ";this.applyContext=function(_1b,_1c){this.startdormant=this.getState("dormant",this.startdormant);if(!this.startdormant){this.contextNotification(_1b);this.actRefreshMatrix(function(){_19._updatePagingStatus();_1c&&_1c();});}else{this.startdormant=false;_1c&&_1c();}};function _1d(arr){var obj={};for(var i=0;i<arr.length;i++){obj[arr[i]]=arr[i];}return obj;};var _1e=function(){this.domNode.style.display="";_15=_10.getSeriesData();_16=_10.getSeriesDescriptives();_17=_10.getIntervalDescriptives();_14=_1d(_10.getAggregateRows());var _1f=_10.getSeriesTypes();_18=new _1(_1f);var _20=99/(_16.length+1);_20=_20.toString()+"%";var i,tr;var _21="";var _22=_8.create("th");_22.innerHTML="&nbsp;";_22.setAttribute("width","1%");tr=_8.create("tr",{},_22);this.theadNode.appendChild(tr);var _23={};var _24;for(i=0;i<_16.length;i++){_24=this.columns[i];_21=_16[i].toString();_21=(_21==="")?" ":_21;_22=_8.create("th",{"class":this._getAlignmentClass(_24.alignment)},_21);_22.setAttribute("width",_24.weight+"%");if(!_24.weight){_23[i]=true;}else{tr.appendChild(_22);}}for(i=0;i<_17.length;i++){_21=_17[i].toString();_21=(/^\s*$/.test(_21))?"&nbsp;":_21;var _25=_8.create("th");_25.innerHTML=_21;tr=_8.create("tr",{},_25);tr.setAttribute("offset",i);if(_14[i]!=null){tr.className="mx-reportmatrix-aggregate-row";}for(var j=0;j<_16.length;j++){if(!_23[j]){_21=_15[j][i]!=null?_15[j][i]:_1a;if((typeof _21!="boolean")&&(typeof _21!="number")){_21=(_21==="")?" ":_18.getRenderValue(j,_21);}else{_21=_18.getRenderValue(j,_21);}_21=(_21==="")?" ":_21;_22=_8.create("td",{"class":this._getAlignmentClass(this.columns[j].alignment)},_21);tr.appendChild(_22);}}this.tbodyNode.appendChild(tr);}};this.actInitialize=function(_26){if(this.reportid===""){logger.error(this.id+".actInitialize : No report parameter passed. Aborting!");throw ("No report parameter passed to Report Matrix : aborting!");}if(!this.usepaging){this.pagingNode.style.display="none";}try{_8.empty(this.theadNode);_8.empty(this.tbodyNode);_8.empty(this.tfootNode);}catch(e){}this._fillMatrix=_b.hitch(this,_1e);_26();};this.actSetupOQLSource=function(_27){_10=new _2({reportid:this.reportid,page:(this.usepaging)?this.pagesize:null,startdormant:true,load:_27});};this.actRunReport=function(_28){_11=true;_10.execQuery(_28);};this._fillMatrix=function(){};this.actRefreshMatrix=function(_29){this.actRunReport(function(){_19._refreshView();_29&&_29();});};this._refreshView=function(){this._resetMatrix();this._updatePagingStatus();this._fillMatrix();};this.actSetupEvents=function(_2a){_13.push(_a.subscribe("report_"+this.mxform.hash,this,"topicUpdate"));this.connect(this.tbodyNode,"ondblclick","eventMatrixClicked");if(this.showexportbutton){var _2b=new _3({"caption":window.mx.ui.translate(this.declaredClass,"excel_btn_caption"),"onClick":_b.hitch(this,"eventExcelExportClicked"),"cssClasses":["reportingReportMatrix_exportButton"],"iconUrl":"mxclientsystem/reporting/ui/widget/images/ReportMatrix/icnExcel.gif"});this.toolBarNode.appendChild(_2b.domNode);}else{this.toolBarNode.style.display="none";}if(this.usepaging){var ltr=this.isLeftToRight(),_2c=document.createDocumentFragment(),$=_8.create;this.btFirst=new _3({iconClass:ltr?"glyphicon-step-backward":"glyphicon-step-forward","onClick":_b.hitch(this,"eventPagingButtonClicked","first")});_2c.appendChild($("#",this.btFirst.domNode," "));this.btPrevious=new _3({iconClass:ltr?"glyphicon-backward":"glyphicon-forward","onClick":_b.hitch(this,"eventPagingButtonClicked","previous")});_2c.appendChild($("#",this.btPrevious.domNode," "));this._pagingStatusNode=$("div",{"class":"dijitInline mx-grid-paging-status"});_2c.appendChild($("#",this._pagingStatusNode," "));this.btNext=new _3({iconClass:ltr?"glyphicon-forward":"glyphicon-backward","onClick":_b.hitch(this,"eventPagingButtonClicked","next")});_2c.appendChild($("#",this.btNext.domNode," "));this.btLast=new _3({iconClass:ltr?"glyphicon-step-forward":"glyphicon-step-backward","onClick":_b.hitch(this,"eventPagingButtonClicked","last")});_2c.appendChild($("#",this.btLast.domNode," "));this.pagingNode.appendChild(_2c);_8.disableSelection(this.pagingNode);}_2a&&_2a();};this._resetMatrix=function(){try{_8.empty(this.theadNode);_8.empty(this.tbodyNode);_8.empty(this.tfootNode);}catch(e){}};this._updatePagingStatus=function(){if(!this.usepaging){return;}_8.text(this._pagingStatusNode,_10.getStatusMessage());if(_10.atBeginning()){this.btFirst.set("disabled",true);this.btPrevious.set("disabled",true);}else{this.btFirst.set("disabled",false);this.btPrevious.set("disabled",false);}if(_10.atEnd()){this.btNext.set("disabled",true);this.btLast.set("disabled",true);}else{this.btNext.set("disabled",false);this.btLast.set("disabled",false);}};this.topicUpdate=function(){_10.first();this.actRefreshMatrix();};this.contextNotification=function(_2d){var _2e=_2d.getParams();for(var p in _2e){_12[p]=_2e[p];}_10.first();_10.setParams(_12);};this.contextUpdate=function(){};this.eventMatrixClicked=function(e){var _2f=e.target,tr=_2f.parentNode,_30=parseInt(tr.getAttribute("offset")),_31=this.createContext();_31.dupFrom(this.mxcontext);var _32=this.intervalvalues;if(_32!==""){try{for(var i=0;i<_32.length;i++){var key=_32[i];if(key!==""&&!_31.hasParam(key)){var _33=_15[i][_30];_31.setParam(key,_33);}}}catch(err){}}if(this.target!==""){window.mx.ui.openFormInContent(this.target,"",_31);}else{}};this.eventExcelExportClicked=function(){window.mx.server.request({request:{action:"report_export_excel",params:{reportid:this.reportid,params:_10.getQueryParameters()}},options:{callback:function(_34,_35){var _36=new _9({json:_35.mxobject,meta:window.mx.meta.getEntity(_35.mxobject.objectType)});window.mx.data.invalidateCaches(_36.getGuid());window.mx.ui.downloadFile({mxobject:_36});},useCache:false}});};this.eventPagingButtonClicked=function(_37){switch(_37.toLowerCase()){case "first":if(!_10.atBeginning()){_10.first(_b.hitch(this,"_refreshView"));}break;case "last":if(!_10.atEnd()){_10.last(_b.hitch(this,"_refreshView"));}break;case "next":if(!_10.atEnd()){_10.next(_b.hitch(this,"_refreshView"));}break;case "previous":if(!_10.atBeginning()){_10.previous(_b.hitch(this,"_refreshView"));}break;default:break;}};this.uninitialize=function(){try{for(var i=0;i<_13.length;i++){_13[i].remove();}_7.destroyWidgetsIn(this.toolBarNode);}catch(e){}};this.storeState=function(_38){_38("dormant",!_11);};this._getAlignmentClass=function(_39){if(window.mx.ui.isRtl()){_39=_39=="right"?"left":"right";}return {left:"mx-left-aligned",right:"mx-right-aligned",center:"mx-center-aligned"}[_39];};},postCreate:function(){this.initContext();var _3a="context_seed_"+this.mxform.hash,_3b=_a.subscribe(_3a,_b.hitch(this,"contextNotification"));this.addOnDestroy(function(){_3b.remove();});this.sequence(["actInitialize","actSetupOQLSource","actSetupEvents","actLoaded"]);}});});},"reporting/lib/MetaResult":function(){define([],function(){function _3c(_3d){this.getRenderValue=function(_3e,_3f){var _40=_3d[_3e];switch(_40.type){case "Boolean":var _41=String(_3f);return _41.match(/true|false/)?window.mx.ui.translate("mxui.widget.DataGrid",_41):_3f;case "Date":case "DateTime":if(typeof _3f=="string"){return _3f;}var _42=window.mx.parser.formatDate(_3f,{datePattern:_40.format});if(window.mx.ui.isRtl()&&_42){_42=_42.split("‏/").reverse().join("/");}return _42;case "Enum":if(_40.options){for(var i=0;i<_40.options.length;i++){var _43=_40.options[i];for(var key in _43){if(_3f==key){return _43[key];}break;}}}return _3f;default:return String(_3f);}};};return _3c;});},"reporting/lib/OQLSource":function(){define(["mxui/store/asyncValueStore","mendix/lang","mendix/logger","dojo/_base/lang"],function(_44,_45,_46,_47){var _48=function(_49){var _4a="reporting.lib.OQLSource";var _4b=(_49.reportid||null);var _4c=(_49.startdormant||true);var _4d=_49.page;var _4e={information:{title:"Empty report",xaxis:"X",yaxis:"Y"},interval_descriptives:[],series_descriptives:[],series_data:[]};var _4f={};var _50={};var _51=0;var _52=0;var _53=function(_54){window.mx.server.request({request:{action:"report_retrieve_params",params:{actiontype:"retrieve_params",reportid:_4b}},options:{callback:function(_55,res){if(!res||!res.report||!res.report.params){_46.error(_4a+"["+_4b+"].actGetQueryParams.callback: "+"No valid report parameters received!");}else{_4f=res.report.params;}_54();}}});};var _56=function(_57){_44.register(_4b,_4f);_57&&_57();};var _58=function(_59){window.mx.server.request({request:{action:"report",params:{reportid:_4b,offset:_51,limit:_4d||null,params:_50}},options:{callback:function(_5a,res){if(!res||!res.report){_46.error(_4a+"["+_4b+"].actExecQuery.callback: "+"No valid report structure received!");}else{_4e=res.report;if(res.report.information&&res.report.information.count){_52=res.report.information.count;}}_59();},error:function(e){window.mx.onError(e);_59();}}});};this.execQuery=function(_5b){_58(_5b||function(){});};var _5c=_47.hitch(this,"execQuery");this.getQueryParameters=function(){return _50;};this.getInformation=function(){return _4e.information;};this.getSeriesDescriptives=function(){return _4e.series_descriptives;};this.getAggregateRows=function(){return _4e.aggregate_rows||[];};this.getSeriesTypes=function(){return _4e.series_info||[];};this.getIntervalType=function(){return _4e.interval_info||{};};this.getIntervalDescriptives=function(){if(_4e.interval_descriptives&&_4e.interval_descriptives.length&&_4e.interval_descriptives.length!==0){return _4e.interval_descriptives;}else{if(_4e.series_data.length>0){var res=[];for(var i=0;i<_4e.series_data[0].length;i++){res.push(" ");}return res;}else{return [];}}};this.getSeriesData=function(row){return row?_4e.series_data[row]:_4e.series_data;};this.setParams=function(_5d){_50={};for(var i in _5d){if(!i.match(/_config_hash/)){if(_5d[i]!==""){_50[i]=_5d[i];}}else{if(!i.match(/_config_hash/)){}}}};this.size=function(){return _52;};this.getSize=function(){return this.size();};this.getPageSize=function(){return (_4d);};this.setPageSize=function(n,_5e){_4d=n;_5e&&_5c(_5e);};this.getOffset=function(){return (_51);};this.setOffset=function(n,_5f){_51=n;_5f&&_5c(_5f);};this.setPageSize=function(n,_60){_4d=n;_60&&_5c(_60);};this.getOffset=function(){return (_51);};this.first=function(_61){_51=0;_61&&_5c(_61);};this.last=function(_62){if(_4d>=_52){_51=0;}else{_51=_52-_4d;}_62&&_5c(_62);};this.next=function(_63){if(_51>=(_52-_4d)){_51=_52-_4d;}else{_51+=_4d;}_63&&_5c(_63);};this.previous=function(_64){if((_52<_4d)||((_51-_4d)<=0)){_51=0;}else{_51-=_4d;}_64&&_5c(_64);};this._getstats=function(){var _65=_4e;if(_65){var _66=_65.information.count;if(_66==null){_66=_52;}var _67=_65.series_data;var agl=_65.aggregate_rows?_65.aggregate_rows.length:0;var _68=_67.length?_67[0].length-agl:0;var st=_68!==0?_51+1:_51;var en=_51+_68;return [st,en,_66];}return [0,0,0];};this.getStatusMessage=function(){return window.mx.ui.translate("mxui.lib.MxDataSource","status",this._getstats());};this.atBeginning=function(){return _51===0;};this.atEnd=function(){var _69=this._getstats();return _69[1]>=_69[2];};_45.sequence([_47.hitch(this,_53),_47.hitch(this,_56),!_4c?_47.hitch(this,_58):_45.nullExec],function(){_49.load&&_45.thread(_49.load,null);});};return _48;});},"reporting/widget/ReportChart":function(){define(["reporting/FusionChartsFree/FusionChartsFree","reporting/lib/OQLSource","reporting/lib/ChartBuilder","mxui/widget","mxui/mixin/_Templated","mxui/mixin/_Contextable","mxui/mixin/_Stateful","dojo/dom-geometry","dojo/_base/connect","dojo/_base/declare","dijit/_Container","dijit/_Contained","dojo/text!reporting/widget/templates/ReportChart.html"],function(_6a,_6b,_6c,_6d,_6e,_6f,_70,_71,_72,_73,_74,_75,_76){return _6d.declare("reporting.widget.ReportChart",{mixins:[_6e,_74,_75,_6f,_70],aspect:"",reportid:"",yaxisminimum:"",yaxismaximum:"",yaxisprecision:0,yaxiscaption:"",xaxiscaption:"",charttype:"",nested:false,startdormant:false,width:550,height:350,chartTypes:{MSBar2D:"",MSLine:"",MSArea2D:"",MSColumn2D:"",MSColumn3D:"",StackedArea2D:"",StackedBar2D:"",StackedColumn2D:"",StackedColumn3D:""},constructor:function(){this.templateString=_76;this.domNode=null;this.chartNode=null;this._chartTarget="MSColumn3D";var _77="";var _78={};var _79=[];var _7a="mxclientsystem/reporting/FusionChartsFree/charts/";var _7b=null,_7c={},_7d=false;this.applyContext=function(_7e,_7f){this.startdormant=this.getState("dormant",this.startdormant);if(!this.startdormant){this.contextNotification(_7e);this.refresh(_7f);}else{this.startdormant=false;_7f&&_7f();}};this.actSetupOQLSource=function(_80){_7b=new _6b({reportid:this.reportid,startdormant:this.startdormant,load:_80});};this.actSetupChart=function(_81){var swf="FCF_"+this._chartTarget+".swf",_82=this.id+"_flashNode",_83=this.getChartSize();_78={rendered:false,node:this.chartNode,flash:new _6a.Chart(_7a+swf,_82,_83.width,_83.height,"0","1"),_id:_82};_78.node.id=this.id+"_parentNode";this.loaded();_81();};this.actRunReport=function(_84){_7d=true;_7b.execQuery(_84);};this.getChartSize=function(){var asp=null;if(this.aspect){try{var _85=this.aspect.split(/:/);asp=parseInt(_85[1],10)/parseInt(_85[0],10);}catch(e){}}if(!asp){asp=0.5;}var _86=_71.getContentBox(this.domNode.parentNode);return {width:_86.w||this.width,height:(this.width*asp)*0.7};};this.actFillChart=function(_87){this.domNode.style.display="";_77=_6c({oqlsource:_7b,ymin:this.yaxisminimum,ymax:this.yaxismaximum,precision:this.yaxisprecision,xcaption:this.xaxiscaption,ycaption:this.yaxiscaption});try{if(_78.rendered){_6a.updateChartXML(_78._id,_77);}else{_78.flash.setDataXML(_77);_78.rendered=true;_78.flash.render(_78.node.id);}}catch(e){logger.error(this.id+".actFillChart : Problem rendering chart : "+e.message);}_87&&_87();};this.actRegisterUIEvents=function(_88){_79.push(_72.subscribe("report_"+this.mxform.hash,this,"topicUpdate"));_88();};this.refresh=function(_89){this.sequence(["actRunReport","actFillChart"],_89);};this.topicUpdate=function(){this.refresh();};this.contextNotification=function(_8a){var _8b=_8a.getParams();for(var p in _8b){_7c[p]=_8b[p];}_7b.setParams(_7c);};this.uninitialize=function(){for(var i=0;i<_79.length;i++){_79[i].remove();}};this.storeState=function(_8c){_8c("dormant",!_7d);};},postCreate:function(){this.initContext();if(this.charttype===""){}else{if(this.charttype in this.chartTypes){this._chartTarget=this.charttype;}else{}}if(this.yaxisminimum!=""){this.yaxisminimum=parseFloat(this.yaxisminimum);}if(this.yaxismaximum!=""){this.yaxismaximum=parseFloat(this.yaxismaximum);}var _8d=["actSetupOQLSource","actSetupChart","actRegisterUIEvents"];if(!this.startdormant){_8d.push("actRunReport","actFillChart");}this.sequence(_8d);}});});},"reporting/FusionChartsFree/FusionChartsFree":function(){define([],function(){var _8e=new Object();if(typeof _8e.FusionChartsFreeUtil=="undefined"){_8e.FusionChartsFreeUtil=new Object();}_8e.FusionChartsFree=function(swf,id,w,h,_8f,_90,c,_91,_92,_93,_94){if(!document.getElementById){return;}this.initialDataSet=false;this.params=new Object();this.variables=new Object();this.attributes=new Array();if(swf){this.setAttribute("swf",swf);}if(id){this.setAttribute("id",id);}if(w){this.setAttribute("width",w);}if(h){this.setAttribute("height",h);}if(c){this.addParam("bgcolor",c);}this.addParam("quality","high");this.addParam("allowScriptAccess","always");this.addVariable("chartWidth",w);this.addVariable("chartHeight",h);_8f=_8f?_8f:0;this.addVariable("debugMode",_8f);this.addVariable("DOMId",id);_90=_90?_90:0;this.addVariable("registerWithJS",_90);_91=_91?_91:"noScale";this.addVariable("scaleMode",_91);_92=_92?_92:"EN";this.addVariable("lang",_92);this.detectFlashVersion=_93?_93:1;this.autoInstallRedirect=_94?_94:1;this.installedVer=_8e.FusionChartsFreeUtil.getPlayerVersion();if(!window.opera&&document.all&&this.installedVer.major>7){_8e.FusionChartsFree.doPrepUnload=true;}};_8e.FusionChartsFree.prototype={setAttribute:function(_95,_96){this.attributes[_95]=_96;},getAttribute:function(_97){return this.attributes[_97];},addParam:function(_98,_99){this.params[_98]=_99;},getParams:function(){return this.params;},addVariable:function(_9a,_9b){this.variables[_9a]=_9b;},getVariable:function(_9c){return this.variables[_9c];},getVariables:function(){return this.variables;},getVariablePairs:function(){var _9d=new Array();var key;var _9e=this.getVariables();for(key in _9e){_9d.push(key+"="+_9e[key]);}return _9d;},getSWFHTML:function(){var _9f="";if(navigator.plugins&&navigator.mimeTypes&&navigator.mimeTypes.length){_9f="<embed type=\"application/x-shockwave-flash\" src=\""+this.getAttribute("swf")+"\" width=\""+this.getAttribute("width")+"\" height=\""+this.getAttribute("height")+"\"  ";_9f+=" id=\""+this.getAttribute("id")+"\" name=\""+this.getAttribute("id")+"\" ";_9f+="wmode=\"transparent\" ";var _a0=this.getParams();for(var key in _a0){_9f+=[key]+"=\""+_a0[key]+"\" ";}var _a1=this.getVariablePairs().join("&");if(_a1.length>0){_9f+="flashvars=\""+_a1+"\"";}_9f+="/>";}else{_9f="<object id=\""+this.getAttribute("id")+"\" classid=\"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000\" width=\""+this.getAttribute("width")+"\" height=\""+this.getAttribute("height")+"\">";_9f+="<param name=\"movie\" value=\""+this.getAttribute("swf")+"\" />";_9f+="<param name=\"wmode\" value=\"transparent\" />";var _a0=this.getParams();for(var key in _a0){_9f+="<param name=\""+key+"\" value=\""+_a0[key]+"\" />";}var _a1=this.getVariablePairs().join("&");if(_a1.length>0){_9f+="<param name=\"flashvars\" value=\""+_a1+"\" />";}_9f+="</object>";}return _9f;},setDataURL:function(_a2){if(this.initialDataSet==false){this.addVariable("dataURL",_a2);this.initialDataSet=true;}else{var _a3=_8e.FusionChartsFreeUtil.getChartObject(this.getAttribute("id"));_a3.setDataURL(_a2);}},setDataXML:function(_a4){if(this.initialDataSet==false){this.addVariable("dataXML",_a4);this.initialDataSet=true;}else{var _a5=_8e.FusionChartsFreeUtil.getChartObject(this.getAttribute("id"));_a5.setDataXML(_a4);}},render:function(_a6){if((this.detectFlashVersion==1)&&(this.installedVer.major<6)){if(this.autoInstallRedirect==1){var _a7=window.confirm("You need Adobe Flash Player 6 (or above) to view the charts. It is a free and lightweight installation from Adobe.com. Please click on Ok to install the same.");if(_a7){window.location="http://www.adobe.com/shockwave/download/download.cgi?P1_Prod_Version=ShockwaveFlash";}else{return false;}}else{return false;}}else{var n=(typeof _a6=="string")?document.getElementById(_a6):_a6;n.innerHTML=this.getSWFHTML();if(!document.embeds[this.getAttribute("id")]&&!window[this.getAttribute("id")]){window[this.getAttribute("id")]=document.getElementById(this.getAttribute("id"));}return true;}}};_8e.FusionChartsFreeUtil.getPlayerVersion=function(){var _a8=new _8e.PlayerVersion([0,0,0]);if(navigator.plugins&&navigator.mimeTypes.length){var x=navigator.plugins["Shockwave Flash"];if(x&&x.description){_a8=new _8e.PlayerVersion(x.description.replace(/([a-zA-Z]|\s)+/,"").replace(/(\s+r|\s+b[0-9]+)/,".").split("."));}}else{if(navigator.userAgent&&navigator.userAgent.indexOf("Windows CE")>=0){var axo=1;var _a9=3;while(axo){try{_a9++;axo=new ActiveXObject("ShockwaveFlash.ShockwaveFlash."+_a9);_a8=new _8e.PlayerVersion([_a9,0,0]);}catch(e){axo=null;}}}else{try{var axo=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.7");}catch(e){try{var axo=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6");_a8=new _8e.PlayerVersion([6,0,21]);axo.AllowScriptAccess="always";}catch(e){if(_a8.major==6){return _a8;}}try{axo=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");}catch(e){}}if(axo!=null){_a8=new _8e.PlayerVersion(axo.GetVariable("$version").split(" ")[1].split(","));}}}return _a8;};_8e.PlayerVersion=function(_aa){this.major=_aa[0]!=null?parseInt(_aa[0]):0;this.minor=_aa[1]!=null?parseInt(_aa[1]):0;this.rev=_aa[2]!=null?parseInt(_aa[2]):0;};_8e.FusionChartsFreeUtil.cleanupSWFs=function(){var _ab=document.getElementsByTagName("OBJECT");for(var i=_ab.length-1;i>=0;i--){_ab[i].style.display="none";for(var x in _ab[i]){if(typeof _ab[i][x]=="function"){_ab[i][x]=function(){};}}}};if(_8e.FusionChartsFree.doPrepUnload){if(!_8e.unloadSet){_8e.FusionChartsFreeUtil.prepUnload=function(){__flash_unloadHandler=function(){};__flash_savedUnloadHandler=function(){};window.attachEvent("onunload",_8e.FusionChartsFreeUtil.cleanupSWFs);};window.attachEvent("onbeforeunload",_8e.FusionChartsFreeUtil.prepUnload);_8e.unloadSet=true;}}if(!document.getElementById&&document.all){document.getElementById=function(id){return document.all[id];};}if(Array.prototype.push==null){Array.prototype.push=function(_ac){this[this.length]=_ac;return this.length;};}_8e.FusionChartsFreeUtil.getChartObject=function(id){var _ad=null;if(navigator.appName.indexOf("Microsoft Internet")==-1){if(document.embeds&&document.embeds[id]){_ad=document.embeds[id];}else{_ad=window.document[id];}}else{_ad=window[id];}if(!_ad){_ad=document.getElementById(id);}return _ad;};_8e.FusionChartsFreeUtil.updateChartXML=function(_ae,_af){var _b0=_8e.FusionChartsFreeUtil.getChartObject(_ae);_b0.SetVariable("_root.dataURL","");_b0.SetVariable("_root.isNewData","1");_b0.SetVariable("_root.newData",_af);_b0.TGotoLabel("/","JavaScriptHandler");};return {Chart:_8e.FusionChartsFree,updateChartXML:_8e.FusionChartsFreeUtil.updateChartXML};});},"reporting/lib/ChartBuilder":function(){define(["reporting/lib/MetaResult","dojo/i18n","dojo/_base/array"],function(_b1,_b2,_b3){return function(_b4){var _b5=_b4.oqlsource.getSeriesData();var _b6=_b4.oqlsource.getSeriesDescriptives();var _b7=_b4.oqlsource.getIntervalDescriptives();var _b8=_b4.oqlsource.getInformation();var _b9=null;var _ba=null;var _bb=0;var _bc=new _b1([_b4.oqlsource.getIntervalType()]);if(typeof _b4.ymin=="number"){_b9=_b4.ymin;}if(typeof _b4.ymax=="number"){_ba=_b4.ymax;}if(typeof _b4.precision=="number"){_bb=_b4.precision;}var _bd={};_bd.multi=["38BDFF","387EFF","5638FF","B938FF","FF38A6","FF4538","FF8938","FFB538","FFDD38","F9FF38","C7F627","21F228"];_bd.single=["0099FF","0037FF","4800FF","C800FF","FF006A","FF3300","FF7900","FFAE00","FFE100","EAFF00","97CE0C","0CCE86"];var _be=0;function _bf(_c0){_be=(_be==_bd[_c0].length)?0:_be+1;return _bd[_c0][_be];};function _c1(){return _b2.getLocalization("dojo.cldr","number");};function _c2(str){return str.replace(/['"<>&]/g," ");};function _c3(str){return str.replace(/"/g,"%26quot;").replace(/'/g,"%26apos;");};_b8.title="";_b8.xaxis=_c2(_b4.xcaption);_b8.yaxis=_c2(_b4.ycaption);var _c4="<graph caption='"+_b8.title+"' xAxisName='"+_b8.xaxis+"' yAxisName='"+_b8.yaxis+"' showValues='0' rotateNames='0' slantLabels='0' showShadow='1' showToolTip='1' formatNumberScale='0'";var _c5=isNaN(_b9)?0:parseInt(_b9);var _c6=isNaN(_ba)?1:(_ba>_c5?parseInt(_ba):(_c5+1));_c4+=" yAxisMinValue='"+parseInt(_c5)+"'";_c4+=" yAxisMaxValue='"+parseInt(_c6)+"'";if(_c6==1&&_c5===0&&_bb===0){_bb=2;}if(_bb!=null){_c4+=" decimalPrecision='"+_bb+"'";}var _c7=_c1();_c4+=" thousandSeparator='"+_c7.group+"'";_c4+=" decimalSeparator='"+_c7.decimal+"'";_c4+=">";_c4+="<categories>";_b3.forEach(_b7,function(_c8){_c4+="<category name='"+_c3(_bc.getRenderValue(0,_c8))+"' />";});_c4+="</categories>";for(var i=0;i<_b6.length;i++){_c4+="<dataset seriesName='"+_c3(_b6[i])+"' color='"+_bf("multi")+"'>";for(var j=0;j<_b5[i].length;j++){_c4+="<set value='"+_b5[i][j]+"' />";}_c4+="</dataset>";}_c4+="</graph>";return _c4;};});},"reporting/widget/ReportTrigger":function(){define(["mxui/widget/_Button","dojo/dom-class","dojo/_base/connect","dojo/_base/declare"],function(_c9,_ca,_cb,_cc){return _cc(_c9,{declaredClass:"reporting.widget.ReportTrigger",buildRendering:function(){this.inherited(arguments);_ca.add(this.domNode,"reportingReportTrigger");},onClick:function(){_cb.publish("report_"+this.mxform.hash,["runreport"]);}});});},"reporting/widget/ReportParameter":function(){define(["mxui/store/asyncValueStore","big/big","mxui/mixin/_Stateful","mxui/widget/_WidgetBase","mxui/dom","mendix/lang","dojo/topic","dojo/_base/declare"],function(_cd,Big,_ce,_cf,_d0,_d1,_d2,_d3){var $=_d0.create;function _d4(_d5){var _d6=String(_d5);return (_d6.match(/true|false/))?mx.ui.translate("mxui.widget.DataGrid",_d6):_d5;};function _d7(arr){var _d8="reporting.widget.ReportParameter";if(arr[0]===""&&arr[1]===""){return window.mx.ui.translate(_d8,"all");}else{if(arr[0]===""){return window.mx.ui.translate(_d8,"less_than",arr[1].toString());}else{if(arr[1]===""){return window.mx.ui.translate(_d8,"greater_than",arr[0].toString());}else{return window.mx.ui.translate(_d8,"from_to",[arr[0].toString(),arr[1].toString()]);}}}};function _d9(_da,_db){var ret=[];if(_db=="enum"){ret=_da;}else{if(_db=="boolean"||_db=="datetime"){if(typeof _da[0]=="string"){for(var i=0;i<_da.length;i++){ret.push([_da[i],_da[i]]);}}else{ret=_da;}}else{if(_db=="decimal"){if(_da.isRange){for(var i=0,val;val=_da.values[i];i++){ret.push([i,_d7(val)]);}}else{ret={};for(var i=0,val;val=_da.values[i];i++){if(val[0]===""||val[1]===""){continue;}var _dc=new Big(val[0]),to=new Big(val[1]);for(var j=_dc;j.lt(to);j=j.plus(1)){ret[j.toString()]=j.toString();}}}}else{if(_da.values){ret=_da.values;}else{ret=_da;}}}}if(ret.length!=null){var old=ret;ret={};for(var i=0,val;val=old[i];i++){ret[val[0]]=_d4(val[1]||val[0]);}}return ret;};var _dd=_d3([_cf,_ce],{parameter:"",paramtype:"",reportid:"",autoLoad:false,_selectNode:null,_parameterInfo:null,buildRendering:function(){this.domNode=$("div",{"class":"reportingReportParameter"},this._selectNode=$("select",{"class":"form-control"}));this.connect(this._selectNode,"change",function(e){e.stopPropagation();this._onChange();});},postCreate:function(){var _de=this;_cd.retrieve(this.reportid,function(_df){_de._parameterInfo=_df[_de.parameter];if(!_de._parameterInfo){_de.set("loaded",true);return;}var _e0=_d9(_de._parameterInfo,_de.paramtype);_d0.setSelectOptions(_de._selectNode,_e0,"");_de.set("loaded",true);});},update:function(_e1,_e2){var _e3=this.getState("value",this.mxcontext.hasParam(this.parameter)?this.mxcontext.getParam(this.parameter):undefined);if(_e3!==undefined){if(this.paramtype=="decimal"){if(this._parameterInfo.isRange&&!(_e3 instanceof Array)){var _e4=new Big(_e3);_e3=_d1.find(this._parameterInfo.values,function(_e5){return (_e5[0]===""||_e4.gte(_e5[0]))&&(_e5[1]===""||_e4.lt(_e5[1]));});}var _e6=(_e3 instanceof Array)?_d7(_e3):_e3;_d0.selectOptionByText(this._selectNode,_e6);}else{_d0.selectOptionByValue(this._selectNode,_e3.toString());}}else{_d0.selectOptionByValue(this._selectNode,"");}this._onChange();_e2&&_e2();},_getValue:function(){var _e7=_d0.getSelectedValue(this._selectNode);if(this._parameterInfo.isRange&&_e7!=""){_e7=this._parameterInfo.values[parseInt(_e7,10)];}return _e7;},_onChange:function(){this.mxcontext.setParam(this.parameter,this._getValue());_d2.publish("context_seed_"+this.mxform.hash,this.mxcontext);},storeState:function(_e8){_e8("value",this._getValue());}});return _dd;});},"reporting/widget/DateRange":function(){define(["reporting/lib/DateHelpers","mxui/mixin/_Stateful","mxui/widget/_WidgetBase","mxui/dom","mxui/widget/DatePicker","dojo/date/locale","dojo/topic","dojo/_base/array","dojo/_base/declare"],function(_e9,_ea,_eb,_ec,_ed,_ee,_ef,_f0,_f1){var _f2=_f1(_eb,{_items:null,postCreate:function(){this.connect(this.domNode,"change","onChange");_ec.setSelectOptions(this.domNode,{},"");},setItems:function(_f3){if(_f3){this._items=_f3;var _f4={};_f0.forEach(this._items,function(_f5,_f6){_f4[_f6]=_f5.display;});_ec.setSelectOptions(this.domNode,_f4,"");}},getDateInterval:function(){var _f7=_ec.getSelectedValue(this.domNode);return _f7!==""?this._items[_f7]:{from:"",to:""};},_getValueAttr:function(){return _ec.getSelectedText(this.domNode);},_setValueAttr:function(_f8){_ec.selectOptionByText(this.domNode,_f8);},onChange:function(){}});var _f9={set:function(){},get:function(){return "";},onChange:function(){},setItems:function(){}};function _fa(_fb,_fc){var _fd=[];for(var _fe=_fb;_fe<=_fc;_fe++){_fd.push({display:_fe.toString(),from:new Date(_fe,0,1),to:new Date(_fe+1,0,0)});}return _fd;};var _ff={period:function(year){var _100=_e9.getFirstWeekOfYear(year);var end=_100;var _101=[];var _102=year;var _103=1;var test=_e9.getFirstWeekOfYear(year+1);while(year==_102&&test>end){var _104=_100;end=_100+=(4*_e9.weekMs);if(_103==14){end=test;}end-=_e9.dayMs;_101.push({from:new Date(_104),to:new Date(end),display:String(_103++)});year=new Date(_100).getUTCFullYear();}return _101;},quarter:function(year){return _f0.map([0,1,2,3],function(_105){return {display:(_105+1).toString(),from:new Date(year,_105*3,1),to:new Date(year,_105*3+3,0)};});},month:function(year){return _f0.map(_ee.getNames("months","wide"),function(_106,_107){return {display:_106,from:new Date(year,_107,1),to:new Date(year,_107+1,0)};});},week:function(year){var _108=new Date(_e9.getFirstWeekOfYear(year)),_109=[],i=1;do{var _10a=new Date(_108.getTime()+_e9.weekMs-1);_109.push({display:"Week "+(i++).toString(),from:_108,to:_10a});_108=new Date(_10a.getTime()+1);}while(_108.getFullYear()==year);return _109;}};var _10b=["period","quarter","month","week"],_10c=_10b.concat(["year"]);var _10d=_f1([_eb,_ea],{reportid:"",parameter:"",startYear:null,endYear:null,hasDates:true,_periodSelectorsParameterName:"",_periodSelectors:null,_dateInputs:null,_value:null,postCreate:function(){this._periodSelectorsParameterName=this.parameter.toString()+"_config_hash";this._periodSelectors={};this._dateInputs={};this._value={from:"",to:""};this._buildPeriodSelectors();this._periodSelectors.year.setItems(_fa(this.startYear,this.endYear));this._subscribeToYearChange();this._subscribeToPeriodChange();if(this.hasDates){this._buildDateInputs();this._subscribeToDateChange();}},_buildPeriodSelectors:function(){var self=this;_f0.forEach(_10c,function(_10e){var _10f=self.domNode.querySelector("select[name='"+_10e+"']");self._periodSelectors[_10e]=_10f?new _f2({},_10f):_f9;});},_buildDateInputs:function(){var self=this;_f0.forEach(["from","to"],function(name,_110){var _111=self.domNode.querySelector("input[name='"+name+"']"),_112=new _ed({selector:"date"});_111.parentNode.replaceChild(_112.domNode,_111);self._dateInputs[name]=_112;});},_subscribeToYearChange:function(){var self=this;this.connect(this._periodSelectors.year,"onChange",function(){var year=this._periodSelectors.year.get("value");if(year==""){_f0.forEach(_10b,function(_113){self._periodSelectors[_113].setItems([]);});}else{this._setValue(this._periodSelectors.year.getDateInterval());_f0.forEach(_10b,function(_114){var _115=self._periodSelectors[_114].get("value");self._periodSelectors[_114].setItems(_ff[_114](year));if(_115!=""){self._periodSelectors[_114].set("value",_115);self._periodSelectors[_114].onChange();}});this._onChange();}});},_subscribeToPeriodChange:function(){var self=this;_f0.forEach(_10b,function(_116){var _117=self._periodSelectors[_116];self.connect(_117,"onChange",function(){if(_117.get("value")===""){return;}self._setValue(_117.getDateInterval());_f0.forEach(_10b,function(_118){if(_118!=_116){self._periodSelectors[_118].set("value","");}});self._onChange();});});},_subscribeToDateChange:function(){var self=this;_f0.forEach(["from","to"],function(name){self.connect(self._dateInputs[name],"onChange",function(){var _119=self._dateInputs[name].get("value");self._value[name]=_119;if(_119!==""){_f0.forEach(_10b,function(_11a){self._periodSelectors[_11a].set("value","");});if(_119.getFullYear()!=self._periodSelectors.year.get("value")){self._periodSelectors.year.set("value","");}}self._onChange();});});},startup:function(){this.domNode.parentNode.style.padding="0px";this.inherited(arguments);},update:function(_11b,_11c){var _11d=this.getState("value",this.mxcontext.hasParam(this.parameter)?this.mxcontext.getParam(this.parameter):""),_11e=this.getState("config",this.mxcontext.hasParam(this._periodSelectorsParameterName)?this.mxcontext.getParam(this._periodSelectorsParameterName):""),self=this;if(_11e){this._periodSelectors.year.set("value",_11e["year"]);this._periodSelectors.year.onChange();_f0.forEach(_10b,function(_11f){self._periodSelectors[_11f].set("value",_11e[_11f]);});}if(_11d){var _120="",_121="";if(_11d.length){_120=new Date(_11d[0]);_121=new Date(_11d[1]);}else{if(_11d!=""){_120=_121=new Date(_11d);}}if(this.hasDates){this._dateInputs.from.set("value",_120);this._dateInputs.to.set("value",_121);}this._value={from:_120,to:_121};}this._onChange();_11c&&_11c();},_setValue:function(_122){if(this.hasDates){this._dateInputs.from.set("value",_122.from);this._dateInputs.to.set("value",_122.to);}this._value=_122;},_getValue:function(){return this._value.from!=""&&this._value.to!=""?[this._value.from.getTime(),this._value.to.getTime()]:"";},_getSelectorConfig:function(){var self=this,_123={};_f0.forEach(_10c,function(_124){_123[_124]=self._periodSelectors[_124].get("value");});return _123;},_onChange:function(){this.mxcontext.setParam(this.parameter,this._getValue());this.mxcontext.setParam(this._periodSelectorsParameterName,this._getSelectorConfig());_ef.publish("context_seed_"+this.mxform.hash,this.mxcontext);},storeState:function(_125){_125("value",this._getValue());_125("config",this._getSelectorConfig());}});return _10d;});},"reporting/lib/DateHelpers":function(){define(["dojo/date","dojo/_base/kernel"],function(_126,_127){var _128=1000*60*60*24,_129=_128*7,_12a=4;function _12b(){return (_127.locale.match(/nl/i))?1:0;};return {weekMs:_129,dayMs:_128,getFirstWeekOfYear:function(year){var date=new Date(year,0,1),day=date.getDay(),_12c=date.getTime();if(day===0){return date.getTime();}_12c-=(day-_12b())*_128;date=new Date(_12c);if(date.getMonth()!==0){var _12d=_126.getDaysInMonth(date)-(7-_12a);if(date.getDate()<=_12d){return _12c+_129;}}else{var _12e=1+_12a;if(date.getDate()>=_12e){return _12c-_129;}}return _12c;}};});},"url:reporting/widget/templates/ReportMatrix.html":"<div class=\"mx-grid mx-reportmatrix\" style=\"display:none;\">\n\t<div class=\"mx-grid-controlbar clearfix\" focusIndex=\"0\">\n        <div class=\"mx-grid-pagingbar\" dojoAttachPoint=\"pagingNode\"></div>\n        <div class=\"mx-grid-toolbar\" dojoAttachPoint=\"toolBarNode\"></div>\n\t</div>\n\t<div class=\"mx-grid-content\" focusIndex=\"1\">\n        <table class=\"table table-bordered table-striped mx-reportmatrix-table\">\n            <thead dojoAttachPoint=\"theadNode\"></thead>\n            <tbody dojoAttachPoint=\"tbodyNode\"></tbody>\n            <tfoot dojoAttachPoint=\"tfootNode\"></tfoot>\n        </table>\n    </div>\n</div>\n","url:reporting/widget/templates/ReportChart.html":"<div class=\"ReportCharts\" style=\"z-index:-1;display:none;\">\n\t<div style=\"clear:both\"/>\n\t<div style=\"text-align:center; padding:10px 0px 10px;\">\n\t\t<div dojoAttachPoint=\"chartNode\">\n\t\t</div>\n\t</div>\n</div>\n"}});define("reporting/reporting",["reporting/widget/ReportMatrix","reporting/widget/ReportChart","reporting/widget/ReportTrigger","reporting/widget/ReportParameter","reporting/widget/DateRange","mxui/dom","dojo/_base/config"],function(_12f,_130,_131,_132,_133,dom,_134){window.reporting={widget:{ReportMatrix:_12f,ReportChart:_130,ReportTrigger:_131,ReportParameter:_132,DateRange:_133}};dom.addCss("mxclientsystem/reporting/ui/base.css");});