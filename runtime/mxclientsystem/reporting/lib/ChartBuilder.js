
/* Copyright (c) 2005-2012, Mendix bv. All rights reserved. */

//>>built
define("reporting/lib/ChartBuilder",["dojo","dijit","dojox"],function(_1,_2,_3){if(!reporting.lib){reporting.lib={};}_1.provide("reporting.lib.ChartBuilder");reporting.lib.ChartBuilder=function(_4){var _5=_4.oqlsource;var _6=_5.getSeriesData();var _7=_5.getSeriesDescriptives();var _8=_5.getIntervalDescriptives();var _9=_5.getInformation();var _a=null;var _b=null;var _c=0;var _d=new reporting.lib.MetaResult([_5.getIntervalType()]);if(typeof (_4.ymin)=="number"){_a=_4.ymin;}if(typeof (_4.ymax)=="number"){_b=_4.ymax;}if(typeof (_4.precision)=="number"){_c=_4.precision;}var _e={};_e.multi=["38BDFF","387EFF","5638FF","B938FF","FF38A6","FF4538","FF8938","FFB538","FFDD38","F9FF38","C7F627","21F228"];_e.single=["0099FF","0037FF","4800FF","C800FF","FF006A","FF3300","FF7900","FFAE00","FFE100","EAFF00","97CE0C","0CCE86"];var _f=7;var _10=0;var _11=function(){_10=_f;};var _12=function(_13){_10=(_10==_e[_13].length)?0:_10+1;return _e[_13][_10];};var _14=function(){return _1.i18n.getLocalization("dojo.cldr","number");};if(_9.title!=null){}var _15=function(str){return str.replace(/[\'\"\<\>\&]/g," ");};var _16=function(str){return str.replace(/"/g,"%26quot;").replace(/'/g,"%26apos;");};_9.title="";_9.xaxis=_15(_4.xcaption);_9.yaxis=_15(_4.ycaption);var _17="<graph caption='"+_9.title+"' xAxisName='"+_9.xaxis+"' yAxisName='"+_9.yaxis+"' showValues='0' rotateNames='0' slantLabels='0' showShadow='1' showToolTip='1' formatNumberScale='0'";var _18=isNaN(_a)?0:parseInt(_a);var _19=isNaN(_b)?1:(_b>_18?parseInt(_b):(_18+1));_17+=" yAxisMinValue='"+parseInt(_18)+"'";_17+=" yAxisMaxValue='"+parseInt(_19)+"'";if(_19==1&&_18==0&&_c==0){_c=2;}if(_c!=null){_17+=" decimalPrecision='"+_c+"'";}var _1a=_14();_17+=" thousandSeparator='"+_1a.group+"'";_17+=" decimalSeparator='"+_1a.decimal+"'";_17+=">";_17+="<categories>";for(var i=0;i<_8.length;i++){_17+="<category name='"+_16(_d.getRenderValue(0,_8[i]))+"' />";}_17+="</categories>";for(var i=0;i<_7.length;i++){_17+="<dataset seriesName='"+_16(_7[i])+"' color='"+_12("multi")+"'>";for(var j=0;j<_6[i].length;j++){_17+="<set value='"+_6[i][j]+"' />";}_17+="</dataset>";}_17+="</graph>";return _17;};});