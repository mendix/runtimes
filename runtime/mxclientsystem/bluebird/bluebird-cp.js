//>>built
define("bluebird/bluebird-cp",["dojo","dijit","dojox"],function(_1,_2,_3){!function(e){if("object"==typeof exports&&"undefined"!=typeof module){module.exports=e();}else{if("function"==typeof define&&define.amd){define([],e);}else{var f;"undefined"!=typeof window?f=window:"undefined"!=typeof global?f=global:"undefined"!=typeof self&&(f=self),f.Promise=e();}}}(function(){var _4,_5,_6;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof _dereq_=="function"&&_dereq_;if(!u&&a){return a(o,!0);}if(i){return i(o,!0);}var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f;}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e);},l,l.exports,e,t,n,r);}return n[o].exports;};var i=typeof _dereq_=="function"&&_dereq_;for(var o=0;o<r.length;o++){s(r[o]);}return s;})({1:[function(_7,_8,_9){"use strict";_8.exports=function(_a){var _b=_a._SomePromiseArray;function _c(_d){var _e=new _b(_d);var _f=_e.promise();_e.setHowMany(1);_e.setUnwrap();_e.init();return _f;};_a.any=function(_10){return _c(_10);};_a.prototype.any=function(){return _c(this);};};},{}],2:[function(_11,_12,_13){"use strict";var _14;try{throw new Error();}catch(e){_14=e;}var _15=_11("./schedule.js");var _16=_11("./queue.js");var _17=_11("./util.js");function _18(){this._isTickUsed=false;this._lateQueue=new _16(16);this._normalQueue=new _16(16);this._trampolineEnabled=true;var _19=this;this.drainQueues=function(){_19._drainQueues();};this._schedule=_15.isStatic?_15(this.drainQueues):_15;};_18.prototype.disableTrampolineIfNecessary=function(){if(_17.hasDevTools){this._trampolineEnabled=false;}};_18.prototype.enableTrampoline=function(){if(!this._trampolineEnabled){this._trampolineEnabled=true;this._schedule=function(fn){setTimeout(fn,0);};}};_18.prototype.haveItemsQueued=function(){return this._normalQueue.length()>0;};_18.prototype.throwLater=function(fn,arg){if(arguments.length===1){arg=fn;fn=function(){throw arg;};}if(typeof setTimeout!=="undefined"){setTimeout(function(){fn(arg);},0);}else{try{this._schedule(function(){fn(arg);});}catch(e){throw new Error("No async scheduler available\n\n    See http://goo.gl/m3OTXk\n");}}};function _1a(fn,_1b,arg){this._lateQueue.push(fn,_1b,arg);this._queueTick();};function _1c(fn,_1d,arg){this._normalQueue.push(fn,_1d,arg);this._queueTick();};function _1e(_1f){this._normalQueue._pushOne(_1f);this._queueTick();};if(!_17.hasDevTools){_18.prototype.invokeLater=_1a;_18.prototype.invoke=_1c;_18.prototype.settlePromises=_1e;}else{if(_15.isStatic){_15=function(fn){setTimeout(fn,0);};}_18.prototype.invokeLater=function(fn,_20,arg){if(this._trampolineEnabled){_1a.call(this,fn,_20,arg);}else{this._schedule(function(){setTimeout(function(){fn.call(_20,arg);},100);});}};_18.prototype.invoke=function(fn,_21,arg){if(this._trampolineEnabled){_1c.call(this,fn,_21,arg);}else{this._schedule(function(){fn.call(_21,arg);});}};_18.prototype.settlePromises=function(_22){if(this._trampolineEnabled){_1e.call(this,_22);}else{this._schedule(function(){_22._settlePromises();});}};}_18.prototype.invokeFirst=function(fn,_23,arg){this._normalQueue.unshift(fn,_23,arg);this._queueTick();};_18.prototype._drainQueue=function(_24){while(_24.length()>0){var fn=_24.shift();if(typeof fn!=="function"){fn._settlePromises();continue;}var _25=_24.shift();var arg=_24.shift();fn.call(_25,arg);}};_18.prototype._drainQueues=function(){this._drainQueue(this._normalQueue);this._reset();this._drainQueue(this._lateQueue);};_18.prototype._queueTick=function(){if(!this._isTickUsed){this._isTickUsed=true;this._schedule(this.drainQueues);}};_18.prototype._reset=function(){this._isTickUsed=false;};_12.exports=new _18();_12.exports.firstLineError=_14;},{"./queue.js":28,"./schedule.js":31,"./util.js":38}],3:[function(_26,_27,_28){"use strict";_27.exports=function(_29,_2a,_2b){var _2c=function(_2d,e){this._reject(e);};var _2e=function(e,_2f){_2f.promiseRejectionQueued=true;_2f.bindingPromise._then(_2c,_2c,null,this,e);};var _30=function(_31,_32){if(this._isPending()){this._resolveCallback(_32.target);}};var _33=function(e,_34){if(!_34.promiseRejectionQueued){this._reject(e);}};_29.prototype.bind=function(_35){var _36=_2b(_35);var ret=new _29(_2a);ret._propagateFrom(this,1);var _37=this._target();ret._setBoundTo(_36);if(_36 instanceof _29){var _38={promiseRejectionQueued:false,promise:ret,target:_37,bindingPromise:_36};_37._then(_2a,_2e,ret._progress,ret,_38);_36._then(_30,_33,ret._progress,ret,_38);}else{ret._resolveCallback(_37);}return ret;};_29.prototype._setBoundTo=function(obj){if(obj!==undefined){this._bitField=this._bitField|131072;this._boundTo=obj;}else{this._bitField=this._bitField&(~131072);}};_29.prototype._isBound=function(){return (this._bitField&131072)===131072;};_29.bind=function(_39,_3a){var _3b=_2b(_39);var ret=new _29(_2a);ret._setBoundTo(_3b);if(_3b instanceof _29){_3b._then(function(){ret._resolveCallback(_3a);},ret._reject,ret._progress,ret,null);}else{ret._resolveCallback(_3a);}return ret;};};},{}],4:[function(_3c,_3d,_3e){"use strict";var old;if(typeof Promise!=="undefined"){old=Promise;}function _3f(){try{if(Promise===_40){Promise=old;}}catch(e){}return _40;};var _40=_3c("./promise.js")();_40.noConflict=_3f;_3d.exports=_40;},{"./promise.js":23}],5:[function(_41,_42,_43){"use strict";var cr=Object.create;if(cr){var _44=cr(null);var _45=cr(null);_44[" size"]=_45[" size"]=0;}_42.exports=function(_46){var _47=_41("./util.js");var _48=_47.canEvaluate;var _49=_47.isIdentifier;var _4a;var _4b;if(!true){var _4c=function(_4d){return new Function("ensureMethod","                                    \n        return function(obj) {                                               \n            'use strict'                                                     \n            var len = this.length;                                           \n            ensureMethod(obj, 'methodName');                                 \n            switch(len) {                                                    \n                case 1: return obj.methodName(this[0]);                      \n                case 2: return obj.methodName(this[0], this[1]);             \n                case 3: return obj.methodName(this[0], this[1], this[2]);    \n                case 0: return obj.methodName();                             \n                default:                                                     \n                    return obj.methodName.apply(obj, this);                  \n            }                                                                \n        };                                                                   \n        ".replace(/methodName/g,_4d))(_4e);};var _4f=function(_50){return new Function("obj","                                             \n        'use strict';                                                        \n        return obj.propertyName;                                             \n        ".replace("propertyName",_50));};var _51=function(_52,_53,_54){var ret=_54[_52];if(typeof ret!=="function"){if(!_49(_52)){return null;}ret=_53(_52);_54[_52]=ret;_54[" size"]++;if(_54[" size"]>512){var _55=Object.keys(_54);for(var i=0;i<256;++i){delete _54[_55[i]];}_54[" size"]=_55.length-256;}}return ret;};_4a=function(_56){return _51(_56,_4c,_44);};_4b=function(_57){return _51(_57,_4f,_45);};}function _4e(obj,_58){var fn;if(obj!=null){fn=obj[_58];}if(typeof fn!=="function"){var _59="Object "+_47.classString(obj)+" has no method '"+_47.toString(_58)+"'";throw new _46.TypeError(_59);}return fn;};function _5a(obj){var _5b=this.pop();var fn=_4e(obj,_5b);return fn.apply(obj,this);};_46.prototype.call=function(_5c){var _5d=arguments.length;var _5e=new Array(_5d-1);for(var $_i=1;$_i<_5d;++$_i){_5e[$_i-1]=arguments[$_i];}if(!true){if(_48){var _5f=_4a(_5c);if(_5f!==null){return this._then(_5f,undefined,undefined,_5e,undefined);}}}_5e.push(_5c);return this._then(_5a,undefined,undefined,_5e,undefined);};function _60(obj){return obj[this];};function _61(obj){var _62=+this;if(_62<0){_62=Math.max(0,_62+obj.length);}return obj[_62];};_46.prototype.get=function(_63){var _64=(typeof _63==="number");var _65;if(!_64){if(_48){var _66=_4b(_63);_65=_66!==null?_66:_60;}else{_65=_60;}}else{_65=_61;}return this._then(_65,undefined,undefined,_63,undefined);};};},{"./util.js":38}],6:[function(_67,_68,_69){"use strict";_68.exports=function(_6a){var _6b=_67("./errors.js");var _6c=_67("./async.js");var _6d=_6b.CancellationError;_6a.prototype._cancel=function(_6e){if(!this.isCancellable()){return this;}var _6f;var _70=this;while((_6f=_70._cancellationParent)!==undefined&&_6f.isCancellable()){_70=_6f;}this._unsetCancellable();_70._target()._rejectCallback(_6e,false,true);};_6a.prototype.cancel=function(_71){if(!this.isCancellable()){return this;}if(_71===undefined){_71=new _6d();}_6c.invokeLater(this._cancel,this,_71);return this;};_6a.prototype.cancellable=function(){if(this._cancellable()){return this;}_6c.enableTrampoline();this._setCancellable();this._cancellationParent=undefined;return this;};_6a.prototype.uncancellable=function(){var ret=this.then();ret._unsetCancellable();return ret;};_6a.prototype.fork=function(_72,_73,_74){var ret=this._then(_72,_73,_74,undefined,undefined);ret._setCancellable();ret._cancellationParent=undefined;return ret;};};},{"./async.js":2,"./errors.js":13}],7:[function(_75,_76,_77){"use strict";_76.exports=function(){var _78=_75("./async.js");var _79=_75("./util.js");var _7a=/[\\\/]bluebird[\\\/]js[\\\/](main|debug|zalgo|instrumented)/;var _7b=null;var _7c=null;var _7d=false;var _7e;function _7f(_80){this._parent=_80;var _81=this._length=1+(_80===undefined?0:_80._length);_82(this,_7f);if(_81>32){this.uncycle();}};_79.inherits(_7f,Error);_7f.prototype.uncycle=function(){var _83=this._length;if(_83<2){return;}var _84=[];var _85={};for(var i=0,_86=this;_86!==undefined;++i){_84.push(_86);_86=_86._parent;}_83=this._length=i;for(var i=_83-1;i>=0;--i){var _87=_84[i].stack;if(_85[_87]===undefined){_85[_87]=i;}}for(var i=0;i<_83;++i){var _88=_84[i].stack;var _89=_85[_88];if(_89!==undefined&&_89!==i){if(_89>0){_84[_89-1]._parent=undefined;_84[_89-1]._length=1;}_84[i]._parent=undefined;_84[i]._length=1;var _8a=i>0?_84[i-1]:this;if(_89<_83-1){_8a._parent=_84[_89+1];_8a._parent.uncycle();_8a._length=_8a._parent._length+1;}else{_8a._parent=undefined;_8a._length=1;}var _8b=_8a._length+1;for(var j=i-2;j>=0;--j){_84[j]._length=_8b;_8b++;}return;}}};_7f.prototype.parent=function(){return this._parent;};_7f.prototype.hasParent=function(){return this._parent!==undefined;};_7f.prototype.attachExtraTrace=function(_8c){if(_8c.__stackCleaned__){return;}this.uncycle();var _8d=_7f.parseStackAndMessage(_8c);var _8e=_8d.message;var _8f=[_8d.stack];var _90=this;while(_90!==undefined){_8f.push(_91(_90.stack.split("\n")));_90=_90._parent;}_92(_8f);_93(_8f);_79.notEnumerableProp(_8c,"stack",_94(_8e,_8f));_79.notEnumerableProp(_8c,"__stackCleaned__",true);};function _94(_95,_96){for(var i=0;i<_96.length-1;++i){_96[i].push("From previous event:");_96[i]=_96[i].join("\n");}if(i<_96.length){_96[i]=_96[i].join("\n");}return _95+"\n"+_96.join("\n");};function _93(_97){for(var i=0;i<_97.length;++i){if(_97[i].length===0||((i+1<_97.length)&&_97[i][0]===_97[i+1][0])){_97.splice(i,1);i--;}}};function _92(_98){var _99=_98[0];for(var i=1;i<_98.length;++i){var _9a=_98[i];var _9b=_99.length-1;var _9c=_99[_9b];var _9d=-1;for(var j=_9a.length-1;j>=0;--j){if(_9a[j]===_9c){_9d=j;break;}}for(var j=_9d;j>=0;--j){var _9e=_9a[j];if(_99[_9b]===_9e){_99.pop();_9b--;}else{break;}}_99=_9a;}};function _91(_9f){var ret=[];for(var i=0;i<_9f.length;++i){var _a0=_9f[i];var _a1=_7b.test(_a0)||"    (No stack trace)"===_a0;var _a2=_a1&&_a3(_a0);if(_a1&&!_a2){if(_7d&&_a0.charAt(0)!==" "){_a0="    "+_a0;}ret.push(_a0);}}return ret;};function _a4(_a5){var _a6=_a5.stack.replace(/\s+$/g,"").split("\n");for(var i=0;i<_a6.length;++i){var _a7=_a6[i];if("    (No stack trace)"===_a7||_7b.test(_a7)){break;}}if(i>0){_a6=_a6.slice(i);}return _a6;};_7f.parseStackAndMessage=function(_a8){var _a9=_a8.stack;var _aa=_a8.toString();_a9=typeof _a9==="string"&&_a9.length>0?_a4(_a8):["    (No stack trace)"];return {message:_aa,stack:_91(_a9)};};_7f.formatAndLogError=function(_ab,_ac){if(typeof console!=="undefined"){var _ad;if(typeof _ab==="object"||typeof _ab==="function"){var _ae=_ab.stack;_ad=_ac+_7c(_ae,_ab);}else{_ad=_ac+String(_ab);}if(typeof _7e==="function"){_7e(_ad);}else{if(typeof console.log==="function"||typeof console.log==="object"){}}}};_7f.unhandledRejection=function(_af){_7f.formatAndLogError(_af,"^--- With additional stack trace: ");};_7f.isSupported=function(){return typeof _82==="function";};_7f.fireRejectionEvent=function(_b0,_b1,_b2,_b3){var _b4=false;try{if(typeof _b1==="function"){_b4=true;if(_b0==="rejectionHandled"){_b1(_b3);}else{_b1(_b2,_b3);}}}catch(e){_78.throwLater(e);}var _b5=false;try{_b5=_b6(_b0,_b2,_b3);}catch(e){_b5=true;_78.throwLater(e);}var _b7=false;if(_b8){try{_b7=_b8(_b0.toLowerCase(),{reason:_b2,promise:_b3});}catch(e){_b7=true;_78.throwLater(e);}}if(!_b5&&!_b4&&!_b7&&_b0==="unhandledRejection"){_7f.formatAndLogError(_b2,"Unhandled rejection ");}};function _b9(obj){var str;if(typeof obj==="function"){str="[function "+(obj.name||"anonymous")+"]";}else{str=obj.toString();var _ba=/\[object [a-zA-Z0-9$_]+\]/;if(_ba.test(str)){try{var _bb=JSON.stringify(obj);str=_bb;}catch(e){}}if(str.length===0){str="(empty array)";}}return ("(<"+_bc(str)+">, no stack trace)");};function _bc(str){var _bd=41;if(str.length<_bd){return str;}return str.substr(0,_bd-3)+"...";};var _a3=function(){return false;};var _be=/[\/<\(]([^:\/]+):(\d+):(?:\d+)\)?\s*$/;function _bf(_c0){var _c1=_c0.match(_be);if(_c1){return {fileName:_c1[1],line:parseInt(_c1[2],10)};}};_7f.setBounds=function(_c2,_c3){if(!_7f.isSupported()){return;}var _c4=_c2.stack.split("\n");var _c5=_c3.stack.split("\n");var _c6=-1;var _c7=-1;var _c8;var _c9;for(var i=0;i<_c4.length;++i){var _ca=_bf(_c4[i]);if(_ca){_c8=_ca.fileName;_c6=_ca.line;break;}}for(var i=0;i<_c5.length;++i){var _ca=_bf(_c5[i]);if(_ca){_c9=_ca.fileName;_c7=_ca.line;break;}}if(_c6<0||_c7<0||!_c8||!_c9||_c8!==_c9||_c6>=_c7){return;}_a3=function(_cb){if(_7a.test(_cb)){return true;}var _cc=_bf(_cb);if(_cc){if(_cc.fileName===_c8&&(_c6<=_cc.line&&_cc.line<=_c7)){return true;}}return false;};};var _82=(function stackDetection(){var _cd=/^\s*at\s*/;var _ce=function(_cf,_d0){if(typeof _cf==="string"){return _cf;}if(_d0.name!==undefined&&_d0.message!==undefined){return _d0.toString();}return _b9(_d0);};if(typeof Error.stackTraceLimit==="number"&&typeof Error.captureStackTrace==="function"){Error.stackTraceLimit=Error.stackTraceLimit+6;_7b=_cd;_7c=_ce;var _d1=Error.captureStackTrace;_a3=function(_d2){return _7a.test(_d2);};return function(_d3,_d4){Error.stackTraceLimit=Error.stackTraceLimit+6;_d1(_d3,_d4);Error.stackTraceLimit=Error.stackTraceLimit-6;};}var err=new Error();if(typeof err.stack==="string"&&err.stack.split("\n")[0].indexOf("stackDetection@")>=0){_7b=/@/;_7c=_ce;_7d=true;return function _d1(o){o.stack=new Error().stack;};}var _d5;try{throw new Error();}catch(e){_d5=("stack" in e);}if(!("stack" in err)&&_d5&&typeof Error.stackTraceLimit==="number"){_7b=_cd;_7c=_ce;return function _d1(o){Error.stackTraceLimit=Error.stackTraceLimit+6;try{throw new Error();}catch(e){o.stack=e.stack;}Error.stackTraceLimit=Error.stackTraceLimit-6;};}_7c=function(_d6,_d7){if(typeof _d6==="string"){return _d6;}if((typeof _d7==="object"||typeof _d7==="function")&&_d7.name!==undefined&&_d7.message!==undefined){return _d7.toString();}return _b9(_d7);};return null;})([]);var _b8;var _b6=(function(){if(_79.isNode){return function(_d8,_d9,_da){if(_d8==="rejectionHandled"){return process.emit(_d8,_da);}else{return process.emit(_d8,_d9,_da);}};}else{var _db=false;var _dc=true;try{var ev=new self.CustomEvent("test");_db=ev instanceof CustomEvent;}catch(e){}if(!_db){try{var _dd=document.createEvent("CustomEvent");_dd.initCustomEvent("testingtheevent",false,true,{});self.dispatchEvent(_dd);}catch(e){_dc=false;}}if(_dc){_b8=function(_de,_df){var _e0;if(_db){_e0=new self.CustomEvent(_de,{detail:_df,bubbles:false,cancelable:true});}else{if(self.dispatchEvent){_e0=document.createEvent("CustomEvent");_e0.initCustomEvent(_de,false,true,_df);}}return _e0?!self.dispatchEvent(_e0):false;};}var _e1={};_e1["unhandledRejection"]=("on"+"unhandledRejection").toLowerCase();_e1["rejectionHandled"]=("on"+"rejectionHandled").toLowerCase();return function(_e2,_e3,_e4){var _e5=_e1[_e2];var _e6=self[_e5];if(!_e6){return false;}if(_e2==="rejectionHandled"){_e6.call(self,_e4);}else{_e6.call(self,_e3,_e4);}return true;};}})();if(typeof console!=="undefined"&&typeof console.warn!=="undefined"){_7e=function(_e7){console.warn(_e7);};if(_79.isNode&&process.stderr.isTTY){_7e=function(_e8){process.stderr.write("[31m"+_e8+"[39m\n");};}else{if(!_79.isNode&&typeof (new Error().stack)==="string"){_7e=function(_e9){console.warn("%c"+_e9,"color: red");};}}}return _7f;};},{"./async.js":2,"./util.js":38}],8:[function(_ea,_eb,_ec){"use strict";_eb.exports=function(_ed){var _ee=_ea("./util.js");var _ef=_ea("./errors.js");var _f0=_ee.tryCatch;var _f1=_ee.errorObj;var _f2=_ea("./es5.js").keys;var _f3=_ef.TypeError;function _f4(_f5,_f6,_f7){this._instances=_f5;this._callback=_f6;this._promise=_f7;};function _f8(_f9,e){var _fa={};var _fb=_f0(_f9).call(_fa,e);if(_fb===_f1){return _fb;}var _fc=_f2(_fa);if(_fc.length){_f1.e=new _f3("Catch filter must inherit from Error or be a simple predicate function\n\n    See http://goo.gl/o84o68\n");return _f1;}return _fb;};_f4.prototype.doFilter=function(e){var cb=this._callback;var _fd=this._promise;var _fe=_fd._boundValue();for(var i=0,len=this._instances.length;i<len;++i){var _ff=this._instances[i];var _100=_ff===Error||(_ff!=null&&_ff.prototype instanceof Error);if(_100&&e instanceof _ff){var ret=_f0(cb).call(_fe,e);if(ret===_f1){_ed.e=ret.e;return _ed;}return ret;}else{if(typeof _ff==="function"&&!_100){var _101=_f8(_ff,e);if(_101===_f1){e=_f1.e;break;}else{if(_101){var ret=_f0(cb).call(_fe,e);if(ret===_f1){_ed.e=ret.e;return _ed;}return ret;}}}}}_ed.e=e;return _ed;};return _f4;};},{"./errors.js":13,"./es5.js":14,"./util.js":38}],9:[function(_102,_103,_104){"use strict";_103.exports=function(_105,_106,_107){var _108=[];function _109(){this._trace=new _106(_10a());};_109.prototype._pushContext=function(){if(!_107()){return;}if(this._trace!==undefined){_108.push(this._trace);}};_109.prototype._popContext=function(){if(!_107()){return;}if(this._trace!==undefined){_108.pop();}};function _10b(){if(_107()){return new _109();}};function _10a(){var _10c=_108.length-1;if(_10c>=0){return _108[_10c];}return undefined;};_105.prototype._peekContext=_10a;_105.prototype._pushContext=_109.prototype._pushContext;_105.prototype._popContext=_109.prototype._popContext;return _10b;};},{}],10:[function(_10d,_10e,_10f){"use strict";_10e.exports=function(_110,_111){var _112=_110._getDomain;var _113=_10d("./async.js");var _114=_10d("./errors.js").Warning;var util=_10d("./util.js");var _115=util.canAttachTrace;var _116;var _117;var _118=false||(util.isNode&&(!!process.env["BLUEBIRD_DEBUG"]||process.env["NODE_ENV"]==="development"));if(_118){_113.disableTrampolineIfNecessary();}_110.prototype._ignoreRejections=function(){this._unsetRejectionIsUnhandled();this._bitField=this._bitField|16777216;};_110.prototype._ensurePossibleRejectionHandled=function(){if((this._bitField&16777216)!==0){return;}this._setRejectionIsUnhandled();_113.invokeLater(this._notifyUnhandledRejection,this,undefined);};_110.prototype._notifyUnhandledRejectionIsHandled=function(){_111.fireRejectionEvent("rejectionHandled",_116,undefined,this);};_110.prototype._notifyUnhandledRejection=function(){if(this._isRejectionUnhandled()){var _119=this._getCarriedStackTrace()||this._settledValue;this._setUnhandledRejectionIsNotified();_111.fireRejectionEvent("unhandledRejection",_117,_119,this);}};_110.prototype._setUnhandledRejectionIsNotified=function(){this._bitField=this._bitField|524288;};_110.prototype._unsetUnhandledRejectionIsNotified=function(){this._bitField=this._bitField&(~524288);};_110.prototype._isUnhandledRejectionNotified=function(){return (this._bitField&524288)>0;};_110.prototype._setRejectionIsUnhandled=function(){this._bitField=this._bitField|2097152;};_110.prototype._unsetRejectionIsUnhandled=function(){this._bitField=this._bitField&(~2097152);if(this._isUnhandledRejectionNotified()){this._unsetUnhandledRejectionIsNotified();this._notifyUnhandledRejectionIsHandled();}};_110.prototype._isRejectionUnhandled=function(){return (this._bitField&2097152)>0;};_110.prototype._setCarriedStackTrace=function(_11a){this._bitField=this._bitField|1048576;this._fulfillmentHandler0=_11a;};_110.prototype._isCarryingStackTrace=function(){return (this._bitField&1048576)>0;};_110.prototype._getCarriedStackTrace=function(){return this._isCarryingStackTrace()?this._fulfillmentHandler0:undefined;};_110.prototype._captureStackTrace=function(){if(_118){this._trace=new _111(this._peekContext());}return this;};_110.prototype._attachExtraTrace=function(_11b,_11c){if(_118&&_115(_11b)){var _11d=this._trace;if(_11d!==undefined){if(_11c){_11d=_11d._parent;}}if(_11d!==undefined){_11d.attachExtraTrace(_11b);}else{if(!_11b.__stackCleaned__){var _11e=_111.parseStackAndMessage(_11b);util.notEnumerableProp(_11b,"stack",_11e.message+"\n"+_11e.stack.join("\n"));util.notEnumerableProp(_11b,"__stackCleaned__",true);}}}};_110.prototype._warn=function(_11f){var _120=new _114(_11f);var ctx=this._peekContext();if(ctx){ctx.attachExtraTrace(_120);}else{var _121=_111.parseStackAndMessage(_120);_120.stack=_121.message+"\n"+_121.stack.join("\n");}_111.formatAndLogError(_120,"");};_110.onPossiblyUnhandledRejection=function(fn){var _122=_112();_117=typeof fn==="function"?(_122===null?fn:_122.bind(fn)):undefined;};_110.onUnhandledRejectionHandled=function(fn){var _123=_112();_116=typeof fn==="function"?(_123===null?fn:_123.bind(fn)):undefined;};_110.longStackTraces=function(){if(_113.haveItemsQueued()&&_118===false){throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/DT1qyG\n");}_118=_111.isSupported();if(_118){_113.disableTrampolineIfNecessary();}};_110.hasLongStackTraces=function(){return _118&&_111.isSupported();};if(!_111.isSupported()){_110.longStackTraces=function(){};_118=false;}return function(){return _118;};};},{"./async.js":2,"./errors.js":13,"./util.js":38}],11:[function(_124,_125,_126){"use strict";var util=_124("./util.js");var _127=util.isPrimitive;_125.exports=function(_128){var _129=function(){return this;};var _12a=function(){throw this;};var _12b=function(){};var _12c=function(){throw undefined;};var _12d=function(_12e,_12f){if(_12f===1){return function(){throw _12e;};}else{if(_12f===2){return function(){return _12e;};}}};_128.prototype["return"]=_128.prototype.thenReturn=function(_130){if(_130===undefined){return this.then(_12b);}if(_127(_130)){return this._then(_12d(_130,2),undefined,undefined,undefined,undefined);}return this._then(_129,undefined,undefined,_130,undefined);};_128.prototype["throw"]=_128.prototype.thenThrow=function(_131){if(_131===undefined){return this.then(_12c);}if(_127(_131)){return this._then(_12d(_131,1),undefined,undefined,undefined,undefined);}return this._then(_12a,undefined,undefined,_131,undefined);};};},{"./util.js":38}],12:[function(_132,_133,_134){"use strict";_133.exports=function(_135,_136){var _137=_135.reduce;_135.prototype.each=function(fn){return _137(this,fn,null,_136);};_135.each=function(_138,fn){return _137(_138,fn,null,_136);};};},{}],13:[function(_139,_13a,_13b){"use strict";var es5=_139("./es5.js");var _13c=es5.freeze;var util=_139("./util.js");var _13d=util.inherits;var _13e=util.notEnumerableProp;function _13f(_140,_141){function _142(_143){if(!(this instanceof _142)){return new _142(_143);}_13e(this,"message",typeof _143==="string"?_143:_141);_13e(this,"name",_140);if(Error.captureStackTrace){Error.captureStackTrace(this,this.constructor);}else{Error.call(this);}};_13d(_142,Error);return _142;};var _144,_145;var _146=_13f("Warning","warning");var _147=_13f("CancellationError","cancellation error");var _148=_13f("TimeoutError","timeout error");var _149=_13f("AggregateError","aggregate error");try{_144=TypeError;_145=RangeError;}catch(e){_144=_13f("TypeError","type error");_145=_13f("RangeError","range error");}var _14a=("join pop push shift unshift slice filter forEach some "+"every map indexOf lastIndexOf reduce reduceRight sort reverse").split(" ");for(var i=0;i<_14a.length;++i){if(typeof Array.prototype[_14a[i]]==="function"){_149.prototype[_14a[i]]=Array.prototype[_14a[i]];}}es5.defineProperty(_149.prototype,"length",{value:0,configurable:false,writable:true,enumerable:true});_149.prototype["isOperational"]=true;var _14b=0;_149.prototype.toString=function(){var _14c=Array(_14b*4+1).join(" ");var ret="\n"+_14c+"AggregateError of:"+"\n";_14b++;_14c=Array(_14b*4+1).join(" ");for(var i=0;i<this.length;++i){var str=this[i]===this?"[Circular AggregateError]":this[i]+"";var _14d=str.split("\n");for(var j=0;j<_14d.length;++j){_14d[j]=_14c+_14d[j];}str=_14d.join("\n");ret+=str+"\n";}_14b--;return ret;};function _14e(_14f){if(!(this instanceof _14e)){return new _14e(_14f);}_13e(this,"name","OperationalError");_13e(this,"message",_14f);this.cause=_14f;this["isOperational"]=true;if(_14f instanceof Error){_13e(this,"message",_14f.message);_13e(this,"stack",_14f.stack);}else{if(Error.captureStackTrace){Error.captureStackTrace(this,this.constructor);}}};_13d(_14e,Error);var _150=Error["__BluebirdErrorTypes__"];if(!_150){_150=_13c({CancellationError:_147,TimeoutError:_148,OperationalError:_14e,RejectionError:_14e,AggregateError:_149});_13e(Error,"__BluebirdErrorTypes__",_150);}_13a.exports={Error:Error,TypeError:_144,RangeError:_145,CancellationError:_150.CancellationError,OperationalError:_150.OperationalError,TimeoutError:_150.TimeoutError,AggregateError:_150.AggregateError,Warning:_146};},{"./es5.js":14,"./util.js":38}],14:[function(_151,_152,_153){var _154=(function(){"use strict";return this===undefined;})();if(_154){_152.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,getDescriptor:Object.getOwnPropertyDescriptor,keys:Object.keys,names:Object.getOwnPropertyNames,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:_154,propertyIsWritable:function(obj,prop){var _155=Object.getOwnPropertyDescriptor(obj,prop);return !!(!_155||_155.writable||_155.set);}};}else{var has={}.hasOwnProperty;var str={}.toString;var _156={}.constructor.prototype;var _157=function(o){var ret=[];for(var key in o){if(has.call(o,key)){ret.push(key);}}return ret;};var _158=function(o,key){return {value:o[key]};};var _159=function(o,key,desc){o[key]=desc.value;return o;};var _15a=function(obj){return obj;};var _15b=function(obj){try{return Object(obj).constructor.prototype;}catch(e){return _156;}};var _15c=function(obj){try{return str.call(obj)==="[object Array]";}catch(e){return false;}};_152.exports={isArray:_15c,keys:_157,names:_157,defineProperty:_159,getDescriptor:_158,freeze:_15a,getPrototypeOf:_15b,isES5:_154,propertyIsWritable:function(){return true;}};}},{}],15:[function(_15d,_15e,_15f){"use strict";_15e.exports=function(_160,_161){var _162=_160.map;_160.prototype.filter=function(fn,_163){return _162(this,fn,_163,_161);};_160.filter=function(_164,fn,_165){return _162(_164,fn,_165,_161);};};},{}],16:[function(_166,_167,_168){"use strict";_167.exports=function(_169,_16a,_16b){var util=_166("./util.js");var _16c=util.isPrimitive;var _16d=util.thrower;function _16e(){return this;};function _16f(){throw this;};function _170(r){return function(){return r;};};function _171(r){return function(){throw r;};};function _172(ret,_173,_174){var then;if(_16c(_173)){then=_174?_170(_173):_171(_173);}else{then=_174?_16e:_16f;}return ret._then(then,_16d,undefined,_173,undefined);};function _175(_176){var _177=this.promise;var _178=this.handler;var ret=_177._isBound()?_178.call(_177._boundValue()):_178();if(ret!==undefined){var _179=_16b(ret,_177);if(_179 instanceof _169){_179=_179._target();return _172(_179,_176,_177.isFulfilled());}}if(_177.isRejected()){_16a.e=_176;return _16a;}else{return _176;}};function _17a(_17b){var _17c=this.promise;var _17d=this.handler;var ret=_17c._isBound()?_17d.call(_17c._boundValue(),_17b):_17d(_17b);if(ret!==undefined){var _17e=_16b(ret,_17c);if(_17e instanceof _169){_17e=_17e._target();return _172(_17e,_17b,true);}}return _17b;};_169.prototype._passThroughHandler=function(_17f,_180){if(typeof _17f!=="function"){return this.then();}var _181={promise:this,handler:_17f};return this._then(_180?_175:_17a,_180?_175:undefined,undefined,_181,undefined);};_169.prototype.lastly=_169.prototype["finally"]=function(_182){return this._passThroughHandler(_182,true);};_169.prototype.tap=function(_183){return this._passThroughHandler(_183,false);};};},{"./util.js":38}],17:[function(_184,_185,_186){"use strict";_185.exports=function(_187,_188,_189,_18a){var _18b=_184("./errors.js");var _18c=_18b.TypeError;var util=_184("./util.js");var _18d=util.errorObj;var _18e=util.tryCatch;var _18f=[];function _190(_191,_192,_193){for(var i=0;i<_192.length;++i){_193._pushContext();var _194=_18e(_192[i])(_191);_193._popContext();if(_194===_18d){_193._pushContext();var ret=_187.reject(_18d.e);_193._popContext();return ret;}var _195=_18a(_194,_193);if(_195 instanceof _187){return _195;}}return null;};function _196(_197,_198,_199,_19a){var _19b=this._promise=new _187(_189);_19b._captureStackTrace();this._stack=_19a;this._generatorFunction=_197;this._receiver=_198;this._generator=undefined;this._yieldHandlers=typeof _199==="function"?[_199].concat(_18f):_18f;};_196.prototype.promise=function(){return this._promise;};_196.prototype._run=function(){this._generator=this._generatorFunction.call(this._receiver);this._receiver=this._generatorFunction=undefined;this._next(undefined);};_196.prototype._continue=function(_19c){if(_19c===_18d){return this._promise._rejectCallback(_19c.e,false,true);}var _19d=_19c.value;if(_19c.done===true){this._promise._resolveCallback(_19d);}else{var _19e=_18a(_19d,this._promise);if(!(_19e instanceof _187)){_19e=_190(_19e,this._yieldHandlers,this._promise);if(_19e===null){this._throw(new _18c("A value %s was yielded that could not be treated as a promise\n\n    See http://goo.gl/4Y4pDk\n\n".replace("%s",_19d)+"From coroutine:\n"+this._stack.split("\n").slice(1,-7).join("\n")));return;}}_19e._then(this._next,this._throw,undefined,this,null);}};_196.prototype._throw=function(_19f){this._promise._attachExtraTrace(_19f);this._promise._pushContext();var _1a0=_18e(this._generator["throw"]).call(this._generator,_19f);this._promise._popContext();this._continue(_1a0);};_196.prototype._next=function(_1a1){this._promise._pushContext();var _1a2=_18e(this._generator.next).call(this._generator,_1a1);this._promise._popContext();this._continue(_1a2);};_187.coroutine=function(_1a3,_1a4){if(typeof _1a3!=="function"){throw new _18c("generatorFunction must be a function\n\n    See http://goo.gl/6Vqhm0\n");}var _1a5=Object(_1a4).yieldHandler;var _1a6=_196;var _1a7=new Error().stack;return function(){var _1a8=_1a3.apply(this,arguments);var _1a9=new _1a6(undefined,undefined,_1a5,_1a7);_1a9._generator=_1a8;_1a9._next(undefined);return _1a9.promise();};};_187.coroutine.addYieldHandler=function(fn){if(typeof fn!=="function"){throw new _18c("fn must be a function\n\n    See http://goo.gl/916lJJ\n");}_18f.push(fn);};_187.spawn=function(_1aa){if(typeof _1aa!=="function"){return _188("generatorFunction must be a function\n\n    See http://goo.gl/6Vqhm0\n");}var _1ab=new _196(_1aa,this);var ret=_1ab.promise();_1ab._run(_187.spawn);return ret;};};},{"./errors.js":13,"./util.js":38}],18:[function(_1ac,_1ad,_1ae){"use strict";_1ad.exports=function(_1af,_1b0,_1b1,_1b2){var util=_1ac("./util.js");var _1b3=util.canEvaluate;var _1b4=util.tryCatch;var _1b5=util.errorObj;var _1b6;if(!true){if(_1b3){var _1b7=function(i){return new Function("value","holder","                             \n            'use strict';                                                    \n            holder.pIndex = value;                                           \n            holder.checkFulfillment(this);                                   \n            ".replace(/Index/g,i));};var _1b8=function(_1b9){var _1ba=[];for(var i=1;i<=_1b9;++i){_1ba.push("holder.p"+i);}return new Function("holder","                                      \n            'use strict';                                                    \n            var callback = holder.fn;                                        \n            return callback(values);                                         \n            ".replace(/values/g,_1ba.join(", ")));};var _1bb=[];var _1bc=[undefined];for(var i=1;i<=5;++i){_1bb.push(_1b7(i));_1bc.push(_1b8(i));}var _1bd=function(_1be,fn){this.p1=this.p2=this.p3=this.p4=this.p5=null;this.fn=fn;this.total=_1be;this.now=0;};_1bd.prototype.callers=_1bc;_1bd.prototype.checkFulfillment=function(_1bf){var now=this.now;now++;var _1c0=this.total;if(now>=_1c0){var _1c1=this.callers[_1c0];_1bf._pushContext();var ret=_1b4(_1c1)(this);_1bf._popContext();if(ret===_1b5){_1bf._rejectCallback(ret.e,false,true);}else{_1bf._resolveCallback(ret);}}else{this.now=now;}};var _1b6=function(_1c2){this._reject(_1c2);};}}_1af.join=function(){var last=arguments.length-1;var fn;if(last>0&&typeof arguments[last]==="function"){fn=arguments[last];if(!true){if(last<6&&_1b3){var ret=new _1af(_1b2);ret._captureStackTrace();var _1c3=new _1bd(last,fn);var _1c4=_1bb;for(var i=0;i<last;++i){var _1c5=_1b1(arguments[i],ret);if(_1c5 instanceof _1af){_1c5=_1c5._target();if(_1c5._isPending()){_1c5._then(_1c4[i],_1b6,undefined,ret,_1c3);}else{if(_1c5._isFulfilled()){_1c4[i].call(ret,_1c5._value(),_1c3);}else{ret._reject(_1c5._reason());}}}else{_1c4[i].call(ret,_1c5,_1c3);}}return ret;}}}var _1c6=arguments.length;var args=new Array(_1c6);for(var $_i=0;$_i<_1c6;++$_i){args[$_i]=arguments[$_i];}if(fn){args.pop();}var ret=new _1b0(args).promise();return fn!==undefined?ret.spread(fn):ret;};};},{"./util.js":38}],19:[function(_1c7,_1c8,_1c9){"use strict";_1c8.exports=function(_1ca,_1cb,_1cc,_1cd,_1ce){var _1cf=_1ca._getDomain;var _1d0=_1c7("./async.js");var util=_1c7("./util.js");var _1d1=util.tryCatch;var _1d2=util.errorObj;var _1d3={};var _1d4=[];function _1d5(_1d6,fn,_1d7,_1d8){this.constructor$(_1d6);this._promise._captureStackTrace();var _1d9=_1cf();this._callback=_1d9===null?fn:_1d9.bind(fn);this._preservedValues=_1d8===_1ce?new Array(this.length()):null;this._limit=_1d7;this._inFlight=0;this._queue=_1d7>=1?[]:_1d4;_1d0.invoke(init,this,undefined);};util.inherits(_1d5,_1cb);function init(){this._init$(undefined,-2);};_1d5.prototype._init=function(){};_1d5.prototype._promiseFulfilled=function(_1da,_1db){var _1dc=this._values;var _1dd=this.length();var _1de=this._preservedValues;var _1df=this._limit;if(_1dc[_1db]===_1d3){_1dc[_1db]=_1da;if(_1df>=1){this._inFlight--;this._drainQueue();if(this._isResolved()){return;}}}else{if(_1df>=1&&this._inFlight>=_1df){_1dc[_1db]=_1da;this._queue.push(_1db);return;}if(_1de!==null){_1de[_1db]=_1da;}var _1e0=this._callback;var _1e1=this._promise._boundValue();this._promise._pushContext();var ret=_1d1(_1e0).call(_1e1,_1da,_1db,_1dd);this._promise._popContext();if(ret===_1d2){return this._reject(ret.e);}var _1e2=_1cd(ret,this._promise);if(_1e2 instanceof _1ca){_1e2=_1e2._target();if(_1e2._isPending()){if(_1df>=1){this._inFlight++;}_1dc[_1db]=_1d3;return _1e2._proxyPromiseArray(this,_1db);}else{if(_1e2._isFulfilled()){ret=_1e2._value();}else{return this._reject(_1e2._reason());}}}_1dc[_1db]=ret;}var _1e3=++this._totalResolved;if(_1e3>=_1dd){if(_1de!==null){this._filter(_1dc,_1de);}else{this._resolve(_1dc);}}};_1d5.prototype._drainQueue=function(){var _1e4=this._queue;var _1e5=this._limit;var _1e6=this._values;while(_1e4.length>0&&this._inFlight<_1e5){if(this._isResolved()){return;}var _1e7=_1e4.pop();this._promiseFulfilled(_1e6[_1e7],_1e7);}};_1d5.prototype._filter=function(_1e8,_1e9){var len=_1e9.length;var ret=new Array(len);var j=0;for(var i=0;i<len;++i){if(_1e8[i]){ret[j++]=_1e9[i];}}ret.length=j;this._resolve(ret);};_1d5.prototype.preservedValues=function(){return this._preservedValues;};function map(_1ea,fn,_1eb,_1ec){var _1ed=typeof _1eb==="object"&&_1eb!==null?_1eb.concurrency:0;_1ed=typeof _1ed==="number"&&isFinite(_1ed)&&_1ed>=1?_1ed:0;return new _1d5(_1ea,fn,_1ed,_1ec);};_1ca.prototype.map=function(fn,_1ee){if(typeof fn!=="function"){return _1cc("fn must be a function\n\n    See http://goo.gl/916lJJ\n");}return map(this,fn,_1ee,null).promise();};_1ca.map=function(_1ef,fn,_1f0,_1f1){if(typeof fn!=="function"){return _1cc("fn must be a function\n\n    See http://goo.gl/916lJJ\n");}return map(_1ef,fn,_1f0,_1f1).promise();};};},{"./async.js":2,"./util.js":38}],20:[function(_1f2,_1f3,_1f4){"use strict";_1f3.exports=function(_1f5,_1f6,_1f7,_1f8){var util=_1f2("./util.js");var _1f9=util.tryCatch;_1f5.method=function(fn){if(typeof fn!=="function"){throw new _1f5.TypeError("fn must be a function\n\n    See http://goo.gl/916lJJ\n");}return function(){var ret=new _1f5(_1f6);ret._captureStackTrace();ret._pushContext();var _1fa=_1f9(fn).apply(this,arguments);ret._popContext();ret._resolveFromSyncValue(_1fa);return ret;};};_1f5.attempt=_1f5["try"]=function(fn,args,ctx){if(typeof fn!=="function"){return _1f8("fn must be a function\n\n    See http://goo.gl/916lJJ\n");}var ret=new _1f5(_1f6);ret._captureStackTrace();ret._pushContext();var _1fb=util.isArray(args)?_1f9(fn).apply(ctx,args):_1f9(fn).call(ctx,args);ret._popContext();ret._resolveFromSyncValue(_1fb);return ret;};_1f5.prototype._resolveFromSyncValue=function(_1fc){if(_1fc===util.errorObj){this._rejectCallback(_1fc.e,false,true);}else{this._resolveCallback(_1fc,true);}};};},{"./util.js":38}],21:[function(_1fd,_1fe,_1ff){"use strict";_1fe.exports=function(_200){var util=_1fd("./util.js");var _201=_1fd("./async.js");var _202=util.tryCatch;var _203=util.errorObj;function _204(val,_205){var _206=this;if(!util.isArray(val)){return _207.call(_206,val,_205);}var ret=_202(_205).apply(_206._boundValue(),[null].concat(val));if(ret===_203){_201.throwLater(ret.e);}};function _207(val,_208){var _209=this;var _20a=_209._boundValue();var ret=val===undefined?_202(_208).call(_20a,null):_202(_208).call(_20a,null,val);if(ret===_203){_201.throwLater(ret.e);}};function _20b(_20c,_20d){var _20e=this;if(!_20c){var _20f=_20e._target();var _210=_20f._getCarriedStackTrace();_210.cause=_20c;_20c=_210;}var ret=_202(_20d).call(_20e._boundValue(),_20c);if(ret===_203){_201.throwLater(ret.e);}};_200.prototype.asCallback=_200.prototype.nodeify=function(_211,_212){if(typeof _211=="function"){var _213=_207;if(_212!==undefined&&Object(_212).spread){_213=_204;}this._then(_213,_20b,undefined,this,_211);}return this;};};},{"./async.js":2,"./util.js":38}],22:[function(_214,_215,_216){"use strict";_215.exports=function(_217,_218){var util=_214("./util.js");var _219=_214("./async.js");var _21a=util.tryCatch;var _21b=util.errorObj;_217.prototype.progressed=function(_21c){return this._then(undefined,undefined,_21c,undefined,undefined);};_217.prototype._progress=function(_21d){if(this._isFollowingOrFulfilledOrRejected()){return;}this._target()._progressUnchecked(_21d);};_217.prototype._progressHandlerAt=function(_21e){return _21e===0?this._progressHandler0:this[(_21e<<2)+_21e-5+2];};_217.prototype._doProgressWith=function(_21f){var _220=_21f.value;var _221=_21f.handler;var _222=_21f.promise;var _223=_21f.receiver;var ret=_21a(_221).call(_223,_220);if(ret===_21b){if(ret.e!=null&&ret.e.name!=="StopProgressPropagation"){var _224=util.canAttachTrace(ret.e)?ret.e:new Error(util.toString(ret.e));_222._attachExtraTrace(_224);_222._progress(ret.e);}}else{if(ret instanceof _217){ret._then(_222._progress,null,null,_222,undefined);}else{_222._progress(ret);}}};_217.prototype._progressUnchecked=function(_225){var len=this._length();var _226=this._progress;for(var i=0;i<len;i++){var _227=this._progressHandlerAt(i);var _228=this._promiseAt(i);if(!(_228 instanceof _217)){var _229=this._receiverAt(i);if(typeof _227==="function"){_227.call(_229,_225,_228);}else{if(_229 instanceof _218&&!_229._isResolved()){_229._promiseProgressed(_225,_228);}}continue;}if(typeof _227==="function"){_219.invoke(this._doProgressWith,this,{handler:_227,promise:_228,receiver:this._receiverAt(i),value:_225});}else{_219.invoke(_226,_228,_225);}}};};},{"./async.js":2,"./util.js":38}],23:[function(_22a,_22b,_22c){"use strict";_22b.exports=function(){var _22d=function(){return new _22e("circular promise resolution chain\n\n    See http://goo.gl/LhFpo0\n");};var _22f=function(){return new _230.PromiseInspection(this._target());};var _231=function(msg){return _230.reject(new _22e(msg));};var util=_22a("./util.js");var _232;if(util.isNode){_232=function(){var ret=process.domain;if(ret===undefined){ret=null;}return ret;};}else{_232=function(){return null;};}util.notEnumerableProp(_230,"_getDomain",_232);var _233=_22a("./async.js");var _234=_22a("./errors.js");var _22e=_230.TypeError=_234.TypeError;_230.RangeError=_234.RangeError;_230.CancellationError=_234.CancellationError;_230.TimeoutError=_234.TimeoutError;_230.OperationalError=_234.OperationalError;_230.RejectionError=_234.OperationalError;_230.AggregateError=_234.AggregateError;var _235=function(){};var _236={};var _237={e:null};var _238=_22a("./thenables.js")(_230,_235);var _239=_22a("./promise_array.js")(_230,_235,_238,_231);var _23a=_22a("./captured_trace.js")();var _23b=_22a("./debuggability.js")(_230,_23a);var _23c=_22a("./context.js")(_230,_23a,_23b);var _23d=_22a("./catch_filter.js")(_237);var _23e=_22a("./promise_resolver.js");var _23f=_23e._nodebackForPromise;var _240=util.errorObj;var _241=util.tryCatch;function _230(_242){if(typeof _242!=="function"){throw new _22e("the promise constructor requires a resolver function\n\n    See http://goo.gl/EC22Yn\n");}if(this.constructor!==_230){throw new _22e("the promise constructor cannot be invoked directly\n\n    See http://goo.gl/KsIlge\n");}this._bitField=0;this._fulfillmentHandler0=undefined;this._rejectionHandler0=undefined;this._progressHandler0=undefined;this._promise0=undefined;this._receiver0=undefined;this._settledValue=undefined;if(_242!==_235){this._resolveFromResolver(_242);}};_230.prototype.toString=function(){return "[object Promise]";};_230.prototype.caught=_230.prototype["catch"]=function(fn){var len=arguments.length;if(len>1){var _243=new Array(len-1),j=0,i;for(i=0;i<len-1;++i){var item=arguments[i];if(typeof item==="function"){_243[j++]=item;}else{return _230.reject(new _22e("Catch filter must inherit from Error or be a simple predicate function\n\n    See http://goo.gl/o84o68\n"));}}_243.length=j;fn=arguments[i];var _244=new _23d(_243,fn,this);return this._then(undefined,_244.doFilter,undefined,_244,undefined);}return this._then(undefined,fn,undefined,undefined,undefined);};_230.prototype.reflect=function(){return this._then(_22f,_22f,undefined,this,undefined);};_230.prototype.then=function(_245,_246,_247){if(_23b()&&arguments.length>0&&typeof _245!=="function"&&typeof _246!=="function"){var msg=".then() only accepts functions but was passed: "+util.classString(_245);if(arguments.length>1){msg+=", "+util.classString(_246);}this._warn(msg);}return this._then(_245,_246,_247,undefined,undefined);};_230.prototype.done=function(_248,_249,_24a){var _24b=this._then(_248,_249,_24a,undefined,undefined);_24b._setIsFinal();};_230.prototype.spread=function(_24c,_24d){return this.all()._then(_24c,_24d,undefined,_236,undefined);};_230.prototype.isCancellable=function(){return !this.isResolved()&&this._cancellable();};_230.prototype.toJSON=function(){var ret={isFulfilled:false,isRejected:false,fulfillmentValue:undefined,rejectionReason:undefined};if(this.isFulfilled()){ret.fulfillmentValue=this.value();ret.isFulfilled=true;}else{if(this.isRejected()){ret.rejectionReason=this.reason();ret.isRejected=true;}}return ret;};_230.prototype.all=function(){return new _239(this).promise();};_230.prototype.error=function(fn){return this.caught(util.originatesFromRejection,fn);};_230.is=function(val){return val instanceof _230;};_230.fromNode=function(fn){var ret=new _230(_235);var _24e=_241(fn)(_23f(ret));if(_24e===_240){ret._rejectCallback(_24e.e,true,true);}return ret;};_230.all=function(_24f){return new _239(_24f).promise();};_230.defer=_230.pending=function(){var _250=new _230(_235);return new _23e(_250);};_230.cast=function(obj){var ret=_238(obj);if(!(ret instanceof _230)){var val=ret;ret=new _230(_235);ret._fulfillUnchecked(val);}return ret;};_230.resolve=_230.fulfilled=_230.cast;_230.reject=_230.rejected=function(_251){var ret=new _230(_235);ret._captureStackTrace();ret._rejectCallback(_251,true);return ret;};_230.setScheduler=function(fn){if(typeof fn!=="function"){throw new _22e("fn must be a function\n\n    See http://goo.gl/916lJJ\n");}var prev=_233._schedule;_233._schedule=fn;return prev;};_230.prototype._then=function(_252,_253,_254,_255,_256){var _257=_256!==undefined;var ret=_257?_256:new _230(_235);if(!_257){ret._propagateFrom(this,4|1);ret._captureStackTrace();}var _258=this._target();if(_258!==this){if(_255===undefined){_255=this._boundTo;}if(!_257){ret._setIsMigrated();}}var _259=_258._addCallbacks(_252,_253,_254,ret,_255,_232());if(_258._isResolved()&&!_258._isSettlePromisesQueued()){_233.invoke(_258._settlePromiseAtPostResolution,_258,_259);}return ret;};_230.prototype._settlePromiseAtPostResolution=function(_25a){if(this._isRejectionUnhandled()){this._unsetRejectionIsUnhandled();}this._settlePromiseAt(_25a);};_230.prototype._length=function(){return this._bitField&131071;};_230.prototype._isFollowingOrFulfilledOrRejected=function(){return (this._bitField&939524096)>0;};_230.prototype._isFollowing=function(){return (this._bitField&536870912)===536870912;};_230.prototype._setLength=function(len){this._bitField=(this._bitField&-131072)|(len&131071);};_230.prototype._setFulfilled=function(){this._bitField=this._bitField|268435456;};_230.prototype._setRejected=function(){this._bitField=this._bitField|134217728;};_230.prototype._setFollowing=function(){this._bitField=this._bitField|536870912;};_230.prototype._setIsFinal=function(){this._bitField=this._bitField|33554432;};_230.prototype._isFinal=function(){return (this._bitField&33554432)>0;};_230.prototype._cancellable=function(){return (this._bitField&67108864)>0;};_230.prototype._setCancellable=function(){this._bitField=this._bitField|67108864;};_230.prototype._unsetCancellable=function(){this._bitField=this._bitField&(~67108864);};_230.prototype._setIsMigrated=function(){this._bitField=this._bitField|4194304;};_230.prototype._unsetIsMigrated=function(){this._bitField=this._bitField&(~4194304);};_230.prototype._isMigrated=function(){return (this._bitField&4194304)>0;};_230.prototype._receiverAt=function(_25b){var ret=_25b===0?this._receiver0:this[_25b*5-5+4];if(ret===undefined&&this._isBound()){return this._boundValue();}return ret;};_230.prototype._promiseAt=function(_25c){return _25c===0?this._promise0:this[_25c*5-5+3];};_230.prototype._fulfillmentHandlerAt=function(_25d){return _25d===0?this._fulfillmentHandler0:this[_25d*5-5+0];};_230.prototype._rejectionHandlerAt=function(_25e){return _25e===0?this._rejectionHandler0:this[_25e*5-5+1];};_230.prototype._boundValue=function(){var ret=this._boundTo;if(ret!==undefined){if(ret instanceof _230){if(ret.isFulfilled()){return ret.value();}else{return undefined;}}}return ret;};_230.prototype._migrateCallbacks=function(_25f,_260){var _261=_25f._fulfillmentHandlerAt(_260);var _262=_25f._rejectionHandlerAt(_260);var _263=_25f._progressHandlerAt(_260);var _264=_25f._promiseAt(_260);var _265=_25f._receiverAt(_260);if(_264 instanceof _230){_264._setIsMigrated();}this._addCallbacks(_261,_262,_263,_264,_265,null);};_230.prototype._addCallbacks=function(_266,_267,_268,_269,_26a,_26b){var _26c=this._length();if(_26c>=131071-5){_26c=0;this._setLength(0);}if(_26c===0){this._promise0=_269;if(_26a!==undefined){this._receiver0=_26a;}if(typeof _266==="function"&&!this._isCarryingStackTrace()){this._fulfillmentHandler0=_26b===null?_266:_26b.bind(_266);}if(typeof _267==="function"){this._rejectionHandler0=_26b===null?_267:_26b.bind(_267);}if(typeof _268==="function"){this._progressHandler0=_26b===null?_268:_26b.bind(_268);}}else{var base=_26c*5-5;this[base+3]=_269;this[base+4]=_26a;if(typeof _266==="function"){this[base+0]=_26b===null?_266:_26b.bind(_266);}if(typeof _267==="function"){this[base+1]=_26b===null?_267:_26b.bind(_267);}if(typeof _268==="function"){this[base+2]=_26b===null?_268:_26b.bind(_268);}}this._setLength(_26c+1);return _26c;};_230.prototype._setProxyHandlers=function(_26d,_26e){var _26f=this._length();if(_26f>=131071-5){_26f=0;this._setLength(0);}if(_26f===0){this._promise0=_26e;this._receiver0=_26d;}else{var base=_26f*5-5;this[base+3]=_26e;this[base+4]=_26d;}this._setLength(_26f+1);};_230.prototype._proxyPromiseArray=function(_270,_271){this._setProxyHandlers(_270,_271);};_230.prototype._resolveCallback=function(_272,_273){if(this._isFollowingOrFulfilledOrRejected()){return;}if(_272===this){return this._rejectCallback(_22d(),false,true);}var _274=_238(_272,this);if(!(_274 instanceof _230)){return this._fulfill(_272);}var _275=1|(_273?4:0);this._propagateFrom(_274,_275);var _276=_274._target();if(_276._isPending()){var len=this._length();for(var i=0;i<len;++i){_276._migrateCallbacks(this,i);}this._setFollowing();this._setLength(0);this._setFollowee(_276);}else{if(_276._isFulfilled()){this._fulfillUnchecked(_276._value());}else{this._rejectUnchecked(_276._reason(),_276._getCarriedStackTrace());}}};_230.prototype._rejectCallback=function(_277,_278,_279){if(!_279){util.markAsOriginatingFromRejection(_277);}var _27a=util.ensureErrorObject(_277);var _27b=_27a===_277;this._attachExtraTrace(_27a,_278?_27b:false);this._reject(_277,_27b?undefined:_27a);};_230.prototype._resolveFromResolver=function(_27c){var _27d=this;this._captureStackTrace();this._pushContext();var _27e=true;var r=_241(_27c)(function(_27f){if(_27d===null){return;}_27d._resolveCallback(_27f);_27d=null;},function(_280){if(_27d===null){return;}_27d._rejectCallback(_280,_27e);_27d=null;});_27e=false;this._popContext();if(r!==undefined&&r===_240&&_27d!==null){_27d._rejectCallback(r.e,true,true);_27d=null;}};_230.prototype._settlePromiseFromHandler=function(_281,_282,_283,_284){if(_284._isRejected()){return;}_284._pushContext();var x;if(_282===_236&&!this._isRejected()){x=_241(_281).apply(this._boundValue(),_283);}else{x=_241(_281).call(_282,_283);}_284._popContext();if(x===_240||x===_284||x===_237){var err=x===_284?_22d():x.e;_284._rejectCallback(err,false,true);}else{_284._resolveCallback(x);}};_230.prototype._target=function(){var ret=this;while(ret._isFollowing()){ret=ret._followee();}return ret;};_230.prototype._followee=function(){return this._rejectionHandler0;};_230.prototype._setFollowee=function(_285){this._rejectionHandler0=_285;};_230.prototype._cleanValues=function(){if(this._cancellable()){this._cancellationParent=undefined;}};_230.prototype._propagateFrom=function(_286,_287){if((_287&1)>0&&_286._cancellable()){this._setCancellable();this._cancellationParent=_286;}if((_287&4)>0&&_286._isBound()){this._setBoundTo(_286._boundTo);}};_230.prototype._fulfill=function(_288){if(this._isFollowingOrFulfilledOrRejected()){return;}this._fulfillUnchecked(_288);};_230.prototype._reject=function(_289,_28a){if(this._isFollowingOrFulfilledOrRejected()){return;}this._rejectUnchecked(_289,_28a);};_230.prototype._settlePromiseAt=function(_28b){var _28c=this._promiseAt(_28b);var _28d=_28c instanceof _230;if(_28d&&_28c._isMigrated()){_28c._unsetIsMigrated();return _233.invoke(this._settlePromiseAt,this,_28b);}var _28e=this._isFulfilled()?this._fulfillmentHandlerAt(_28b):this._rejectionHandlerAt(_28b);var _28f=this._isCarryingStackTrace()?this._getCarriedStackTrace():undefined;var _290=this._settledValue;var _291=this._receiverAt(_28b);this._clearCallbackDataAtIndex(_28b);if(typeof _28e==="function"){if(!_28d){_28e.call(_291,_290,_28c);}else{this._settlePromiseFromHandler(_28e,_291,_290,_28c);}}else{if(_291 instanceof _239){if(!_291._isResolved()){if(this._isFulfilled()){_291._promiseFulfilled(_290,_28c);}else{_291._promiseRejected(_290,_28c);}}}else{if(_28d){if(this._isFulfilled()){_28c._fulfill(_290);}else{_28c._reject(_290,_28f);}}}}if(_28b>=4&&(_28b&31)===4){_233.invokeLater(this._setLength,this,0);}};_230.prototype._clearCallbackDataAtIndex=function(_292){if(_292===0){if(!this._isCarryingStackTrace()){this._fulfillmentHandler0=undefined;}this._rejectionHandler0=this._progressHandler0=this._receiver0=this._promise0=undefined;}else{var base=_292*5-5;this[base+3]=this[base+4]=this[base+0]=this[base+1]=this[base+2]=undefined;}};_230.prototype._isSettlePromisesQueued=function(){return (this._bitField&-1073741824)===-1073741824;};_230.prototype._setSettlePromisesQueued=function(){this._bitField=this._bitField|-1073741824;};_230.prototype._unsetSettlePromisesQueued=function(){this._bitField=this._bitField&(~-1073741824);};_230.prototype._queueSettlePromises=function(){_233.settlePromises(this);this._setSettlePromisesQueued();};_230.prototype._fulfillUnchecked=function(_293){if(_293===this){var err=_22d();this._attachExtraTrace(err);return this._rejectUnchecked(err,undefined);}this._setFulfilled();this._settledValue=_293;this._cleanValues();if(this._length()>0){this._queueSettlePromises();}};_230.prototype._rejectUncheckedCheckError=function(_294){var _295=util.ensureErrorObject(_294);this._rejectUnchecked(_294,_295===_294?undefined:_295);};_230.prototype._rejectUnchecked=function(_296,_297){if(_296===this){var err=_22d();this._attachExtraTrace(err);return this._rejectUnchecked(err);}this._setRejected();this._settledValue=_296;this._cleanValues();if(this._isFinal()){_233.throwLater(function(e){if("stack" in e){_233.invokeFirst(_23a.unhandledRejection,undefined,e);}throw e;},_297===undefined?_296:_297);return;}if(_297!==undefined&&_297!==_296){this._setCarriedStackTrace(_297);}if(this._length()>0){this._queueSettlePromises();}else{this._ensurePossibleRejectionHandled();}};_230.prototype._settlePromises=function(){this._unsetSettlePromisesQueued();var len=this._length();for(var i=0;i<len;i++){this._settlePromiseAt(i);}};util.notEnumerableProp(_230,"_makeSelfResolutionError",_22d);_22a("./progress.js")(_230,_239);_22a("./method.js")(_230,_235,_238,_231);_22a("./bind.js")(_230,_235,_238);_22a("./finally.js")(_230,_237,_238);_22a("./direct_resolve.js")(_230);_22a("./synchronous_inspection.js")(_230);_22a("./join.js")(_230,_239,_238,_235);_230.Promise=_230;_22a("./map.js")(_230,_239,_231,_238,_235);_22a("./cancel.js")(_230);_22a("./using.js")(_230,_231,_238,_23c);_22a("./generators.js")(_230,_231,_235,_238);_22a("./nodeify.js")(_230);_22a("./call_get.js")(_230);_22a("./props.js")(_230,_239,_238,_231);_22a("./race.js")(_230,_235,_238,_231);_22a("./reduce.js")(_230,_239,_231,_238,_235);_22a("./settle.js")(_230,_239);_22a("./some.js")(_230,_239,_231);_22a("./promisify.js")(_230,_235);_22a("./any.js")(_230);_22a("./each.js")(_230,_235);_22a("./timers.js")(_230,_235);_22a("./filter.js")(_230,_235);util.toFastProperties(_230);util.toFastProperties(_230.prototype);function _298(_299){var p=new _230(_235);p._fulfillmentHandler0=_299;p._rejectionHandler0=_299;p._progressHandler0=_299;p._promise0=_299;p._receiver0=_299;p._settledValue=_299;};_298({a:1});_298({b:2});_298({c:3});_298(1);_298(function(){});_298(undefined);_298(false);_298(new _230(_235));_23a.setBounds(_233.firstLineError,util.lastLineError);return _230;};},{"./any.js":1,"./async.js":2,"./bind.js":3,"./call_get.js":5,"./cancel.js":6,"./captured_trace.js":7,"./catch_filter.js":8,"./context.js":9,"./debuggability.js":10,"./direct_resolve.js":11,"./each.js":12,"./errors.js":13,"./filter.js":15,"./finally.js":16,"./generators.js":17,"./join.js":18,"./map.js":19,"./method.js":20,"./nodeify.js":21,"./progress.js":22,"./promise_array.js":24,"./promise_resolver.js":25,"./promisify.js":26,"./props.js":27,"./race.js":29,"./reduce.js":30,"./settle.js":32,"./some.js":33,"./synchronous_inspection.js":34,"./thenables.js":35,"./timers.js":36,"./using.js":37,"./util.js":38}],24:[function(_29a,_29b,_29c){"use strict";_29b.exports=function(_29d,_29e,_29f,_2a0){var util=_29a("./util.js");var _2a1=util.isArray;function _2a2(val){switch(val){case -2:return [];case -3:return {};}};function _2a3(_2a4){var _2a5=this._promise=new _29d(_29e);var _2a6;if(_2a4 instanceof _29d){_2a6=_2a4;_2a5._propagateFrom(_2a6,1|4);}this._values=_2a4;this._length=0;this._totalResolved=0;this._init(undefined,-2);};_2a3.prototype.length=function(){return this._length;};_2a3.prototype.promise=function(){return this._promise;};_2a3.prototype._init=function init(_2a7,_2a8){var _2a9=_29f(this._values,this._promise);if(_2a9 instanceof _29d){_2a9=_2a9._target();this._values=_2a9;if(_2a9._isFulfilled()){_2a9=_2a9._value();if(!_2a1(_2a9)){var err=new _29d.TypeError("expecting an array, a promise or a thenable\n\n    See http://goo.gl/s8MMhc\n");this.__hardReject__(err);return;}}else{if(_2a9._isPending()){_2a9._then(init,this._reject,undefined,this,_2a8);return;}else{this._reject(_2a9._reason());return;}}}else{if(!_2a1(_2a9)){this._promise._reject(_2a0("expecting an array, a promise or a thenable\n\n    See http://goo.gl/s8MMhc\n")._reason());return;}}if(_2a9.length===0){if(_2a8===-5){this._resolveEmptyArray();}else{this._resolve(_2a2(_2a8));}return;}var len=this.getActualLength(_2a9.length);this._length=len;this._values=this.shouldCopyValues()?new Array(len):this._values;var _2aa=this._promise;for(var i=0;i<len;++i){var _2ab=this._isResolved();var _2ac=_29f(_2a9[i],_2aa);if(_2ac instanceof _29d){_2ac=_2ac._target();if(_2ab){_2ac._ignoreRejections();}else{if(_2ac._isPending()){_2ac._proxyPromiseArray(this,i);}else{if(_2ac._isFulfilled()){this._promiseFulfilled(_2ac._value(),i);}else{this._promiseRejected(_2ac._reason(),i);}}}}else{if(!_2ab){this._promiseFulfilled(_2ac,i);}}}};_2a3.prototype._isResolved=function(){return this._values===null;};_2a3.prototype._resolve=function(_2ad){this._values=null;this._promise._fulfill(_2ad);};_2a3.prototype.__hardReject__=_2a3.prototype._reject=function(_2ae){this._values=null;this._promise._rejectCallback(_2ae,false,true);};_2a3.prototype._promiseProgressed=function(_2af,_2b0){this._promise._progress({index:_2b0,value:_2af});};_2a3.prototype._promiseFulfilled=function(_2b1,_2b2){this._values[_2b2]=_2b1;var _2b3=++this._totalResolved;if(_2b3>=this._length){this._resolve(this._values);}};_2a3.prototype._promiseRejected=function(_2b4,_2b5){this._totalResolved++;this._reject(_2b4);};_2a3.prototype.shouldCopyValues=function(){return true;};_2a3.prototype.getActualLength=function(len){return len;};return _2a3;};},{"./util.js":38}],25:[function(_2b6,_2b7,_2b8){"use strict";var util=_2b6("./util.js");var _2b9=util.maybeWrapAsError;var _2ba=_2b6("./errors.js");var _2bb=_2ba.TimeoutError;var _2bc=_2ba.OperationalError;var _2bd=util.haveGetters;var es5=_2b6("./es5.js");function _2be(obj){return obj instanceof Error&&es5.getPrototypeOf(obj)===Error.prototype;};var _2bf=/^(?:name|message|stack|cause)$/;function _2c0(obj){var ret;if(_2be(obj)){ret=new _2bc(obj);ret.name=obj.name;ret.message=obj.message;ret.stack=obj.stack;var keys=es5.keys(obj);for(var i=0;i<keys.length;++i){var key=keys[i];if(!_2bf.test(key)){ret[key]=obj[key];}}return ret;}util.markAsOriginatingFromRejection(obj);return obj;};function _2c1(_2c2){return function(err,_2c3){if(_2c2===null){return;}if(err){var _2c4=_2c0(_2b9(err));_2c2._attachExtraTrace(_2c4);_2c2._reject(_2c4);}else{if(arguments.length>2){var _2c5=arguments.length;var args=new Array(_2c5-1);for(var $_i=1;$_i<_2c5;++$_i){args[$_i-1]=arguments[$_i];}_2c2._fulfill(args);}else{_2c2._fulfill(_2c3);}}_2c2=null;};};var _2c6;if(!_2bd){_2c6=function(_2c7){this.promise=_2c7;this.asCallback=_2c1(_2c7);this.callback=this.asCallback;};}else{_2c6=function(_2c8){this.promise=_2c8;};}if(_2bd){var prop={get:function(){return _2c1(this.promise);}};es5.defineProperty(_2c6.prototype,"asCallback",prop);es5.defineProperty(_2c6.prototype,"callback",prop);}_2c6._nodebackForPromise=_2c1;_2c6.prototype.toString=function(){return "[object PromiseResolver]";};_2c6.prototype.resolve=_2c6.prototype.fulfill=function(_2c9){if(!(this instanceof _2c6)){throw new TypeError("Illegal invocation, resolver resolve/reject must be called within a resolver context. Consider using the promise constructor instead.\n\n    See http://goo.gl/sdkXL9\n");}this.promise._resolveCallback(_2c9);};_2c6.prototype.reject=function(_2ca){if(!(this instanceof _2c6)){throw new TypeError("Illegal invocation, resolver resolve/reject must be called within a resolver context. Consider using the promise constructor instead.\n\n    See http://goo.gl/sdkXL9\n");}this.promise._rejectCallback(_2ca);};_2c6.prototype.progress=function(_2cb){if(!(this instanceof _2c6)){throw new TypeError("Illegal invocation, resolver resolve/reject must be called within a resolver context. Consider using the promise constructor instead.\n\n    See http://goo.gl/sdkXL9\n");}this.promise._progress(_2cb);};_2c6.prototype.cancel=function(err){this.promise.cancel(err);};_2c6.prototype.timeout=function(){this.reject(new _2bb("timeout"));};_2c6.prototype.isResolved=function(){return this.promise.isResolved();};_2c6.prototype.toJSON=function(){return this.promise.toJSON();};_2b7.exports=_2c6;},{"./errors.js":13,"./es5.js":14,"./util.js":38}],26:[function(_2cc,_2cd,_2ce){"use strict";_2cd.exports=function(_2cf,_2d0){var THIS={};var util=_2cc("./util.js");var _2d1=_2cc("./promise_resolver.js")._nodebackForPromise;var _2d2=util.withAppended;var _2d3=util.maybeWrapAsError;var _2d4=util.canEvaluate;var _2d5=_2cc("./errors").TypeError;var _2d6="Async";var _2d7={__isPromisified__:true};var _2d8=["arity","length","name","arguments","caller","callee","prototype","__isPromisified__"];var _2d9=new RegExp("^(?:"+_2d8.join("|")+")$");var _2da=function(name){return util.isIdentifier(name)&&name.charAt(0)!=="_"&&name!=="constructor";};function _2db(key){return !_2d9.test(key);};function _2dc(fn){try{return fn.__isPromisified__===true;}catch(e){return false;}};function _2dd(obj,key,_2de){var val=util.getDataPropertyOrDefault(obj,key+_2de,_2d7);return val?_2dc(val):false;};function _2df(ret,_2e0,_2e1){for(var i=0;i<ret.length;i+=2){var key=ret[i];if(_2e1.test(key)){var _2e2=key.replace(_2e1,"");for(var j=0;j<ret.length;j+=2){if(ret[j]===_2e2){throw new _2d5("Cannot promisify an API that has normal methods with '%s'-suffix\n\n    See http://goo.gl/iWrZbw\n".replace("%s",_2e0));}}}}};function _2e3(obj,_2e4,_2e5,_2e6){var keys=util.inheritedDataKeys(obj);var ret=[];for(var i=0;i<keys.length;++i){var key=keys[i];var _2e7=obj[key];var _2e8=_2e6===_2da?true:_2da(key,_2e7,obj);if(typeof _2e7==="function"&&!_2dc(_2e7)&&!_2dd(obj,key,_2e4)&&_2e6(key,_2e7,obj,_2e8)){ret.push(key,_2e7);}}_2df(ret,_2e4,_2e5);return ret;};var _2e9=function(str){return str.replace(/([$])/,"\\$");};var _2ea;if(!true){var _2eb=function(_2ec){var ret=[_2ec];var min=Math.max(0,_2ec-1-3);for(var i=_2ec-1;i>=min;--i){ret.push(i);}for(var i=_2ec+1;i<=3;++i){ret.push(i);}return ret;};var _2ed=function(_2ee){return util.filledRange(_2ee,"_arg","");};var _2ef=function(_2f0){return util.filledRange(Math.max(_2f0,3),"_arg","");};var _2f1=function(fn){if(typeof fn.length==="number"){return Math.max(Math.min(fn.length,1023+1),0);}return 0;};_2ea=function(_2f2,_2f3,_2f4,fn){var _2f5=Math.max(0,_2f1(fn)-1);var _2f6=_2eb(_2f5);var _2f7=typeof _2f2==="string"||_2f3===THIS;function _2f8(_2f9){var args=_2ed(_2f9).join(", ");var _2fa=_2f9>0?", ":"";var ret;if(_2f7){ret="ret = callback.call(this, {{args}}, nodeback); break;\n";}else{ret=_2f3===undefined?"ret = callback({{args}}, nodeback); break;\n":"ret = callback.call(receiver, {{args}}, nodeback); break;\n";}return ret.replace("{{args}}",args).replace(", ",_2fa);};function _2fb(){var ret="";for(var i=0;i<_2f6.length;++i){ret+="case "+_2f6[i]+":"+_2f8(_2f6[i]);}ret+="                                                             \n        default:                                                             \n            var args = new Array(len + 1);                                   \n            var i = 0;                                                       \n            for (var i = 0; i < len; ++i) {                                  \n               args[i] = arguments[i];                                       \n            }                                                                \n            args[i] = nodeback;                                              \n            [CodeForCall]                                                    \n            break;                                                           \n        ".replace("[CodeForCall]",(_2f7?"ret = callback.apply(this, args);\n":"ret = callback.apply(receiver, args);\n"));return ret;};var _2fc=typeof _2f2==="string"?("this != null ? this['"+_2f2+"'] : fn"):"fn";return new Function("Promise","fn","receiver","withAppended","maybeWrapAsError","nodebackForPromise","tryCatch","errorObj","notEnumerableProp","INTERNAL","'use strict';                            \n        var ret = function (Parameters) {                                    \n            'use strict';                                                    \n            var len = arguments.length;                                      \n            var promise = new Promise(INTERNAL);                             \n            promise._captureStackTrace();                                    \n            var nodeback = nodebackForPromise(promise);                      \n            var ret;                                                         \n            var callback = tryCatch([GetFunctionCode]);                      \n            switch(len) {                                                    \n                [CodeForSwitchCase]                                          \n            }                                                                \n            if (ret === errorObj) {                                          \n                promise._rejectCallback(maybeWrapAsError(ret.e), true, true);\n            }                                                                \n            return promise;                                                  \n        };                                                                   \n        notEnumerableProp(ret, '__isPromisified__', true);                   \n        return ret;                                                          \n        ".replace("Parameters",_2ef(_2f5)).replace("[CodeForSwitchCase]",_2fb()).replace("[GetFunctionCode]",_2fc))(_2cf,fn,_2f3,_2d2,_2d3,_2d1,util.tryCatch,util.errorObj,util.notEnumerableProp,_2d0);};}function _2fd(_2fe,_2ff,_300,fn){var _301=(function(){return this;})();var _302=_2fe;if(typeof _302==="string"){_2fe=fn;}function _303(){var _304=_2ff;if(_2ff===THIS){_304=this;}var _305=new _2cf(_2d0);_305._captureStackTrace();var cb=typeof _302==="string"&&this!==_301?this[_302]:_2fe;var fn=_2d1(_305);try{cb.apply(_304,_2d2(arguments,fn));}catch(e){_305._rejectCallback(_2d3(e),true,true);}return _305;};util.notEnumerableProp(_303,"__isPromisified__",true);return _303;};var _306=_2d4?_2ea:_2fd;function _307(obj,_308,_309,_30a){var _30b=new RegExp(_2e9(_308)+"$");var _30c=_2e3(obj,_308,_30b,_309);for(var i=0,len=_30c.length;i<len;i+=2){var key=_30c[i];var fn=_30c[i+1];var _30d=key+_308;obj[_30d]=_30a===_306?_306(key,THIS,key,fn,_308):_30a(fn,function(){return _306(key,THIS,key,fn,_308);});}util.toFastProperties(obj);return obj;};function _30e(_30f,_310){return _306(_30f,_310,undefined,_30f);};_2cf.promisify=function(fn,_311){if(typeof fn!=="function"){throw new _2d5("fn must be a function\n\n    See http://goo.gl/916lJJ\n");}if(_2dc(fn)){return fn;}var ret=_30e(fn,arguments.length<2?THIS:_311);util.copyDescriptors(fn,ret,_2db);return ret;};_2cf.promisifyAll=function(_312,_313){if(typeof _312!=="function"&&typeof _312!=="object"){throw new _2d5("the target of promisifyAll must be an object or a function\n\n    See http://goo.gl/9ITlV0\n");}_313=Object(_313);var _314=_313.suffix;if(typeof _314!=="string"){_314=_2d6;}var _315=_313.filter;if(typeof _315!=="function"){_315=_2da;}var _316=_313.promisifier;if(typeof _316!=="function"){_316=_306;}if(!util.isIdentifier(_314)){throw new RangeError("suffix must be a valid identifier\n\n    See http://goo.gl/8FZo5V\n");}var keys=util.inheritedDataKeys(_312);for(var i=0;i<keys.length;++i){var _317=_312[keys[i]];if(keys[i]!=="constructor"&&util.isClass(_317)){_307(_317.prototype,_314,_315,_316);_307(_317,_314,_315,_316);}}return _307(_312,_314,_315,_316);};};},{"./errors":13,"./promise_resolver.js":25,"./util.js":38}],27:[function(_318,_319,_31a){"use strict";_319.exports=function(_31b,_31c,_31d,_31e){var util=_318("./util.js");var _31f=util.isObject;var es5=_318("./es5.js");function _320(obj){var keys=es5.keys(obj);var len=keys.length;var _321=new Array(len*2);for(var i=0;i<len;++i){var key=keys[i];_321[i]=obj[key];_321[i+len]=key;}this.constructor$(_321);};util.inherits(_320,_31c);_320.prototype._init=function(){this._init$(undefined,-3);};_320.prototype._promiseFulfilled=function(_322,_323){this._values[_323]=_322;var _324=++this._totalResolved;if(_324>=this._length){var val={};var _325=this.length();for(var i=0,len=this.length();i<len;++i){val[this._values[i+_325]]=this._values[i];}this._resolve(val);}};_320.prototype._promiseProgressed=function(_326,_327){this._promise._progress({key:this._values[_327+this.length()],value:_326});};_320.prototype.shouldCopyValues=function(){return false;};_320.prototype.getActualLength=function(len){return len>>1;};function _328(_329){var ret;var _32a=_31d(_329);if(!_31f(_32a)){return _31e("cannot await properties of a non-object\n\n    See http://goo.gl/OsFKC8\n");}else{if(_32a instanceof _31b){ret=_32a._then(_31b.props,undefined,undefined,undefined,undefined);}else{ret=new _320(_32a).promise();}}if(_32a instanceof _31b){ret._propagateFrom(_32a,4);}return ret;};_31b.prototype.props=function(){return _328(this);};_31b.props=function(_32b){return _328(_32b);};};},{"./es5.js":14,"./util.js":38}],28:[function(_32c,_32d,_32e){"use strict";function _32f(src,_330,dst,_331,len){for(var j=0;j<len;++j){dst[j+_331]=src[j+_330];src[j+_330]=void 0;}};function _332(_333){this._capacity=_333;this._length=0;this._front=0;};_332.prototype._willBeOverCapacity=function(size){return this._capacity<size;};_332.prototype._pushOne=function(arg){var _334=this.length();this._checkCapacity(_334+1);var i=(this._front+_334)&(this._capacity-1);this[i]=arg;this._length=_334+1;};_332.prototype._unshiftOne=function(_335){var _336=this._capacity;this._checkCapacity(this.length()+1);var _337=this._front;var i=((((_337-1)&(_336-1))^_336)-_336);this[i]=_335;this._front=i;this._length=this.length()+1;};_332.prototype.unshift=function(fn,_338,arg){this._unshiftOne(arg);this._unshiftOne(_338);this._unshiftOne(fn);};_332.prototype.push=function(fn,_339,arg){var _33a=this.length()+3;if(this._willBeOverCapacity(_33a)){this._pushOne(fn);this._pushOne(_339);this._pushOne(arg);return;}var j=this._front+_33a-3;this._checkCapacity(_33a);var _33b=this._capacity-1;this[(j+0)&_33b]=fn;this[(j+1)&_33b]=_339;this[(j+2)&_33b]=arg;this._length=_33a;};_332.prototype.shift=function(){var _33c=this._front,ret=this[_33c];this[_33c]=undefined;this._front=(_33c+1)&(this._capacity-1);this._length--;return ret;};_332.prototype.length=function(){return this._length;};_332.prototype._checkCapacity=function(size){if(this._capacity<size){this._resizeTo(this._capacity<<1);}};_332.prototype._resizeTo=function(_33d){var _33e=this._capacity;this._capacity=_33d;var _33f=this._front;var _340=this._length;var _341=(_33f+_340)&(_33e-1);_32f(this,0,this,_33e,_341);};_32d.exports=_332;},{}],29:[function(_342,_343,_344){"use strict";_343.exports=function(_345,_346,_347,_348){var _349=_342("./util.js").isArray;var _34a=function(_34b){return _34b.then(function(_34c){return race(_34c,_34b);});};function race(_34d,_34e){var _34f=_347(_34d);if(_34f instanceof _345){return _34a(_34f);}else{if(!_349(_34d)){return _348("expecting an array, a promise or a thenable\n\n    See http://goo.gl/s8MMhc\n");}}var ret=new _345(_346);if(_34e!==undefined){ret._propagateFrom(_34e,4|1);}var _350=ret._fulfill;var _351=ret._reject;for(var i=0,len=_34d.length;i<len;++i){var val=_34d[i];if(val===undefined&&!(i in _34d)){continue;}_345.cast(val)._then(_350,_351,undefined,ret,null);}return ret;};_345.race=function(_352){return race(_352,undefined);};_345.prototype.race=function(){return race(this,undefined);};};},{"./util.js":38}],30:[function(_353,_354,_355){"use strict";_354.exports=function(_356,_357,_358,_359,_35a){var _35b=_356._getDomain;var _35c=_353("./async.js");var util=_353("./util.js");var _35d=util.tryCatch;var _35e=util.errorObj;function _35f(_360,fn,_361,_362){this.constructor$(_360);this._promise._captureStackTrace();this._preservedValues=_362===_35a?[]:null;this._zerothIsAccum=(_361===undefined);this._gotAccum=false;this._reducingIndex=(this._zerothIsAccum?1:0);this._valuesPhase=undefined;var _363=_359(_361,this._promise);var _364=false;var _365=_363 instanceof _356;if(_365){_363=_363._target();if(_363._isPending()){_363._proxyPromiseArray(this,-1);}else{if(_363._isFulfilled()){_361=_363._value();this._gotAccum=true;}else{this._reject(_363._reason());_364=true;}}}if(!(_365||this._zerothIsAccum)){this._gotAccum=true;}var _366=_35b();this._callback=_366===null?fn:_366.bind(fn);this._accum=_361;if(!_364){_35c.invoke(init,this,undefined);}};function init(){this._init$(undefined,-5);};util.inherits(_35f,_357);_35f.prototype._init=function(){};_35f.prototype._resolveEmptyArray=function(){if(this._gotAccum||this._zerothIsAccum){this._resolve(this._preservedValues!==null?[]:this._accum);}};_35f.prototype._promiseFulfilled=function(_367,_368){var _369=this._values;_369[_368]=_367;var _36a=this.length();var _36b=this._preservedValues;var _36c=_36b!==null;var _36d=this._gotAccum;var _36e=this._valuesPhase;var _36f;if(!_36e){_36e=this._valuesPhase=new Array(_36a);for(_36f=0;_36f<_36a;++_36f){_36e[_36f]=0;}}_36f=_36e[_368];if(_368===0&&this._zerothIsAccum){this._accum=_367;this._gotAccum=_36d=true;_36e[_368]=((_36f===0)?1:2);}else{if(_368===-1){this._accum=_367;this._gotAccum=_36d=true;}else{if(_36f===0){_36e[_368]=1;}else{_36e[_368]=2;this._accum=_367;}}}if(!_36d){return;}var _370=this._callback;var _371=this._promise._boundValue();var ret;for(var i=this._reducingIndex;i<_36a;++i){_36f=_36e[i];if(_36f===2){this._reducingIndex=i+1;continue;}if(_36f!==1){return;}_367=_369[i];this._promise._pushContext();if(_36c){_36b.push(_367);ret=_35d(_370).call(_371,_367,i,_36a);}else{ret=_35d(_370).call(_371,this._accum,_367,i,_36a);}this._promise._popContext();if(ret===_35e){return this._reject(ret.e);}var _372=_359(ret,this._promise);if(_372 instanceof _356){_372=_372._target();if(_372._isPending()){_36e[i]=4;return _372._proxyPromiseArray(this,i);}else{if(_372._isFulfilled()){ret=_372._value();}else{return this._reject(_372._reason());}}}this._reducingIndex=i+1;this._accum=ret;}this._resolve(_36c?_36b:this._accum);};function _373(_374,fn,_375,_376){if(typeof fn!=="function"){return _358("fn must be a function\n\n    See http://goo.gl/916lJJ\n");}var _377=new _35f(_374,fn,_375,_376);return _377.promise();};_356.prototype.reduce=function(fn,_378){return _373(this,fn,_378,null);};_356.reduce=function(_379,fn,_37a,_37b){return _373(_379,fn,_37a,_37b);};};},{"./async.js":2,"./util.js":38}],31:[function(_37c,_37d,_37e){"use strict";var _37f;var util=_37c("./util");var _380=function(){throw new Error("No async scheduler available\n\n    See http://goo.gl/m3OTXk\n");};if(util.isNode&&typeof MutationObserver==="undefined"){var _381=global.setImmediate;var _382=process.nextTick;_37f=util.isRecentNode?function(fn){_381.call(global,fn);}:function(fn){_382.call(process,fn);};}else{if((typeof MutationObserver!=="undefined")&&!(typeof window!=="undefined"&&window.navigator&&window.navigator.standalone)){_37f=function(fn){var div=document.createElement("div");var _383=new MutationObserver(fn);_383.observe(div,{attributes:true});return function(){div.classList.toggle("foo");};};_37f.isStatic=true;}else{if(typeof setImmediate!=="undefined"){_37f=function(fn){setImmediate(fn);};}else{if(typeof setTimeout!=="undefined"){_37f=function(fn){setTimeout(fn,0);};}else{_37f=_380;}}}}_37d.exports=_37f;},{"./util":38}],32:[function(_384,_385,_386){"use strict";_385.exports=function(_387,_388){var _389=_387.PromiseInspection;var util=_384("./util.js");function _38a(_38b){this.constructor$(_38b);};util.inherits(_38a,_388);_38a.prototype._promiseResolved=function(_38c,_38d){this._values[_38c]=_38d;var _38e=++this._totalResolved;if(_38e>=this._length){this._resolve(this._values);}};_38a.prototype._promiseFulfilled=function(_38f,_390){var ret=new _389();ret._bitField=268435456;ret._settledValue=_38f;this._promiseResolved(_390,ret);};_38a.prototype._promiseRejected=function(_391,_392){var ret=new _389();ret._bitField=134217728;ret._settledValue=_391;this._promiseResolved(_392,ret);};_387.settle=function(_393){return new _38a(_393).promise();};_387.prototype.settle=function(){return new _38a(this).promise();};};},{"./util.js":38}],33:[function(_394,_395,_396){"use strict";_395.exports=function(_397,_398,_399){var util=_394("./util.js");var _39a=_394("./errors.js").RangeError;var _39b=_394("./errors.js").AggregateError;var _39c=util.isArray;function _39d(_39e){this.constructor$(_39e);this._howMany=0;this._unwrap=false;this._initialized=false;};util.inherits(_39d,_398);_39d.prototype._init=function(){if(!this._initialized){return;}if(this._howMany===0){this._resolve([]);return;}this._init$(undefined,-5);var _39f=_39c(this._values);if(!this._isResolved()&&_39f&&this._howMany>this._canPossiblyFulfill()){this._reject(this._getRangeError(this.length()));}};_39d.prototype.init=function(){this._initialized=true;this._init();};_39d.prototype.setUnwrap=function(){this._unwrap=true;};_39d.prototype.howMany=function(){return this._howMany;};_39d.prototype.setHowMany=function(_3a0){this._howMany=_3a0;};_39d.prototype._promiseFulfilled=function(_3a1){this._addFulfilled(_3a1);if(this._fulfilled()===this.howMany()){this._values.length=this.howMany();if(this.howMany()===1&&this._unwrap){this._resolve(this._values[0]);}else{this._resolve(this._values);}}};_39d.prototype._promiseRejected=function(_3a2){this._addRejected(_3a2);if(this.howMany()>this._canPossiblyFulfill()){var e=new _39b();for(var i=this.length();i<this._values.length;++i){e.push(this._values[i]);}this._reject(e);}};_39d.prototype._fulfilled=function(){return this._totalResolved;};_39d.prototype._rejected=function(){return this._values.length-this.length();};_39d.prototype._addRejected=function(_3a3){this._values.push(_3a3);};_39d.prototype._addFulfilled=function(_3a4){this._values[this._totalResolved++]=_3a4;};_39d.prototype._canPossiblyFulfill=function(){return this.length()-this._rejected();};_39d.prototype._getRangeError=function(_3a5){var _3a6="Input array must contain at least "+this._howMany+" items but contains only "+_3a5+" items";return new _39a(_3a6);};_39d.prototype._resolveEmptyArray=function(){this._reject(this._getRangeError(0));};function some(_3a7,_3a8){if((_3a8|0)!==_3a8||_3a8<0){return _399("expecting a positive integer\n\n    See http://goo.gl/1wAmHx\n");}var ret=new _39d(_3a7);var _3a9=ret.promise();ret.setHowMany(_3a8);ret.init();return _3a9;};_397.some=function(_3aa,_3ab){return some(_3aa,_3ab);};_397.prototype.some=function(_3ac){return some(this,_3ac);};_397._SomePromiseArray=_39d;};},{"./errors.js":13,"./util.js":38}],34:[function(_3ad,_3ae,_3af){"use strict";_3ae.exports=function(_3b0){function _3b1(_3b2){if(_3b2!==undefined){_3b2=_3b2._target();this._bitField=_3b2._bitField;this._settledValue=_3b2._settledValue;}else{this._bitField=0;this._settledValue=undefined;}};_3b1.prototype.value=function(){if(!this.isFulfilled()){throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\n\n    See http://goo.gl/hc1DLj\n");}return this._settledValue;};_3b1.prototype.error=_3b1.prototype.reason=function(){if(!this.isRejected()){throw new TypeError("cannot get rejection reason of a non-rejected promise\n\n    See http://goo.gl/hPuiwB\n");}return this._settledValue;};_3b1.prototype.isFulfilled=_3b0.prototype._isFulfilled=function(){return (this._bitField&268435456)>0;};_3b1.prototype.isRejected=_3b0.prototype._isRejected=function(){return (this._bitField&134217728)>0;};_3b1.prototype.isPending=_3b0.prototype._isPending=function(){return (this._bitField&402653184)===0;};_3b1.prototype.isResolved=_3b0.prototype._isResolved=function(){return (this._bitField&402653184)>0;};_3b0.prototype.isPending=function(){return this._target()._isPending();};_3b0.prototype.isRejected=function(){return this._target()._isRejected();};_3b0.prototype.isFulfilled=function(){return this._target()._isFulfilled();};_3b0.prototype.isResolved=function(){return this._target()._isResolved();};_3b0.prototype._value=function(){return this._settledValue;};_3b0.prototype._reason=function(){this._unsetRejectionIsUnhandled();return this._settledValue;};_3b0.prototype.value=function(){var _3b3=this._target();if(!_3b3.isFulfilled()){throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\n\n    See http://goo.gl/hc1DLj\n");}return _3b3._settledValue;};_3b0.prototype.reason=function(){var _3b4=this._target();if(!_3b4.isRejected()){throw new TypeError("cannot get rejection reason of a non-rejected promise\n\n    See http://goo.gl/hPuiwB\n");}_3b4._unsetRejectionIsUnhandled();return _3b4._settledValue;};_3b0.PromiseInspection=_3b1;};},{}],35:[function(_3b5,_3b6,_3b7){"use strict";_3b6.exports=function(_3b8,_3b9){var util=_3b5("./util.js");var _3ba=util.errorObj;var _3bb=util.isObject;function _3bc(obj,_3bd){if(_3bb(obj)){if(obj instanceof _3b8){return obj;}else{if(_3be(obj)){var ret=new _3b8(_3b9);obj._then(ret._fulfillUnchecked,ret._rejectUncheckedCheckError,ret._progressUnchecked,ret,null);return ret;}}var then=util.tryCatch(_3bf)(obj);if(then===_3ba){if(_3bd){_3bd._pushContext();}var ret=_3b8.reject(then.e);if(_3bd){_3bd._popContext();}return ret;}else{if(typeof then==="function"){return _3c0(obj,then,_3bd);}}}return obj;};function _3bf(obj){return obj.then;};var _3c1={}.hasOwnProperty;function _3be(obj){return _3c1.call(obj,"_promise0");};function _3c0(x,then,_3c2){var _3c3=new _3b8(_3b9);var ret=_3c3;if(_3c2){_3c2._pushContext();}_3c3._captureStackTrace();if(_3c2){_3c2._popContext();}var _3c4=true;var _3c5=util.tryCatch(then).call(x,_3c6,_3c7,_3c8);_3c4=false;if(_3c3&&_3c5===_3ba){_3c3._rejectCallback(_3c5.e,true,true);_3c3=null;}function _3c6(_3c9){if(!_3c3){return;}_3c3._resolveCallback(_3c9);_3c3=null;};function _3c7(_3ca){if(!_3c3){return;}_3c3._rejectCallback(_3ca,_3c4,true);_3c3=null;};function _3c8(_3cb){if(!_3c3){return;}if(typeof _3c3._progress==="function"){_3c3._progress(_3cb);}};return ret;};return _3bc;};},{"./util.js":38}],36:[function(_3cc,_3cd,_3ce){"use strict";_3cd.exports=function(_3cf,_3d0){var util=_3cc("./util.js");var _3d1=_3cf.TimeoutError;var _3d2=function(_3d3,_3d4){if(!_3d3.isPending()){return;}if(typeof _3d4!=="string"){_3d4="operation timed out";}var err=new _3d1(_3d4);util.markAsOriginatingFromRejection(err);_3d3._attachExtraTrace(err);_3d3._cancel(err);};var _3d5=function(_3d6){return _3d7(+this).thenReturn(_3d6);};var _3d7=_3cf.delay=function(_3d8,ms){if(ms===undefined){ms=_3d8;_3d8=undefined;var ret=new _3cf(_3d0);setTimeout(function(){ret._fulfill();},ms);return ret;}ms=+ms;return _3cf.resolve(_3d8)._then(_3d5,null,null,ms,undefined);};_3cf.prototype.delay=function(ms){return _3d7(this,ms);};function _3d9(_3da){var _3db=this;if(_3db instanceof Number){_3db=+_3db;}clearTimeout(_3db);return _3da;};function _3dc(_3dd){var _3de=this;if(_3de instanceof Number){_3de=+_3de;}clearTimeout(_3de);throw _3dd;};_3cf.prototype.timeout=function(ms,_3df){ms=+ms;var ret=this.then().cancellable();ret._cancellationParent=this;var _3e0=setTimeout(function timeoutTimeout(){_3d2(ret,_3df);},ms);return ret._then(_3d9,_3dc,undefined,_3e0,undefined);};};},{"./util.js":38}],37:[function(_3e1,_3e2,_3e3){"use strict";_3e2.exports=function(_3e4,_3e5,_3e6,_3e7){var _3e8=_3e1("./errors.js").TypeError;var _3e9=_3e1("./util.js").inherits;var _3ea=_3e4.PromiseInspection;function _3eb(_3ec){var len=_3ec.length;for(var i=0;i<len;++i){var _3ed=_3ec[i];if(_3ed.isRejected()){return _3e4.reject(_3ed.error());}_3ec[i]=_3ed._settledValue;}return _3ec;};function _3ee(e){setTimeout(function(){throw e;},0);};function _3ef(_3f0){var _3f1=_3e6(_3f0);if(_3f1!==_3f0&&typeof _3f0._isDisposable==="function"&&typeof _3f0._getDisposer==="function"&&_3f0._isDisposable()){_3f1._setDisposable(_3f0._getDisposer());}return _3f1;};function _3f2(_3f3,_3f4){var i=0;var len=_3f3.length;var ret=_3e4.defer();function _3f5(){if(i>=len){return ret.resolve();}var _3f6=_3ef(_3f3[i++]);if(_3f6 instanceof _3e4&&_3f6._isDisposable()){try{_3f6=_3e6(_3f6._getDisposer().tryDispose(_3f4),_3f3.promise);}catch(e){return _3ee(e);}if(_3f6 instanceof _3e4){return _3f6._then(_3f5,_3ee,null,null,null);}}_3f5();};_3f5();return ret.promise;};function _3f7(_3f8){var _3f9=new _3ea();_3f9._settledValue=_3f8;_3f9._bitField=268435456;return _3f2(this,_3f9).thenReturn(_3f8);};function _3fa(_3fb){var _3fc=new _3ea();_3fc._settledValue=_3fb;_3fc._bitField=134217728;return _3f2(this,_3fc).thenThrow(_3fb);};function _3fd(data,_3fe,_3ff){this._data=data;this._promise=_3fe;this._context=_3ff;};_3fd.prototype.data=function(){return this._data;};_3fd.prototype.promise=function(){return this._promise;};_3fd.prototype.resource=function(){if(this.promise().isFulfilled()){return this.promise().value();}return null;};_3fd.prototype.tryDispose=function(_400){var _401=this.resource();var _402=this._context;if(_402!==undefined){_402._pushContext();}var ret=_401!==null?this.doDispose(_401,_400):null;if(_402!==undefined){_402._popContext();}this._promise._unsetDisposable();this._data=null;return ret;};_3fd.isDisposer=function(d){return (d!=null&&typeof d.resource==="function"&&typeof d.tryDispose==="function");};function _403(fn,_404,_405){this.constructor$(fn,_404,_405);};_3e9(_403,_3fd);_403.prototype.doDispose=function(_406,_407){var fn=this.data();return fn.call(_406,_406,_407);};function _408(_409){if(_3fd.isDisposer(_409)){this.resources[this.index]._setDisposable(_409);return _409.promise();}return _409;};_3e4.using=function(){var len=arguments.length;if(len<2){return _3e5("you must pass at least 2 arguments to Promise.using");}var fn=arguments[len-1];if(typeof fn!=="function"){return _3e5("fn must be a function\n\n    See http://goo.gl/916lJJ\n");}len--;var _40a=new Array(len);for(var i=0;i<len;++i){var _40b=arguments[i];if(_3fd.isDisposer(_40b)){var _40c=_40b;_40b=_40b.promise();_40b._setDisposable(_40c);}else{var _40d=_3e6(_40b);if(_40d instanceof _3e4){_40b=_40d._then(_408,null,null,{resources:_40a,index:i},undefined);}}_40a[i]=_40b;}var _40e=_3e4.settle(_40a).then(_3eb).then(function(vals){_40e._pushContext();var ret;try{ret=fn.apply(undefined,vals);}finally{_40e._popContext();}return ret;})._then(_3f7,_3fa,undefined,_40a,undefined);_40a.promise=_40e;return _40e;};_3e4.prototype._setDisposable=function(_40f){this._bitField=this._bitField|262144;this._disposer=_40f;};_3e4.prototype._isDisposable=function(){return (this._bitField&262144)>0;};_3e4.prototype._getDisposer=function(){return this._disposer;};_3e4.prototype._unsetDisposable=function(){this._bitField=this._bitField&(~262144);this._disposer=undefined;};_3e4.prototype.disposer=function(fn){if(typeof fn==="function"){return new _403(fn,this,_3e7());}throw new _3e8();};};},{"./errors.js":13,"./util.js":38}],38:[function(_410,_411,_412){"use strict";var es5=_410("./es5.js");var _413=typeof navigator=="undefined";var _414=(function(){try{var o={};es5.defineProperty(o,"f",{get:function(){return 3;}});return o.f===3;}catch(e){return false;}})();var _415={e:{}};var _416;function _417(){try{var _418=_416;_416=null;return _418.apply(this,arguments);}catch(e){_415.e=e;return _415;}};function _419(fn){_416=fn;return _417;};var _41a=function(_41b,_41c){var _41d={}.hasOwnProperty;function T(){this.constructor=_41b;this.constructor$=_41c;for(var _41e in _41c.prototype){if(_41d.call(_41c.prototype,_41e)&&_41e.charAt(_41e.length-1)!=="$"){this[_41e+"$"]=_41c.prototype[_41e];}}};T.prototype=_41c.prototype;_41b.prototype=new T();return _41b.prototype;};function _41f(val){return val==null||val===true||val===false||typeof val==="string"||typeof val==="number";};function _420(_421){return !_41f(_421);};function _422(_423){if(!_41f(_423)){return _423;}return new Error(_424(_423));};function _425(_426,_427){var len=_426.length;var ret=new Array(len+1);var i;for(i=0;i<len;++i){ret[i]=_426[i];}ret[i]=_427;return ret;};function _428(obj,key,_429){if(es5.isES5){var desc=Object.getOwnPropertyDescriptor(obj,key);if(desc!=null){return desc.get==null&&desc.set==null?desc.value:_429;}}else{return {}.hasOwnProperty.call(obj,key)?obj[key]:undefined;}};function _42a(obj,name,_42b){if(_41f(obj)){return obj;}var _42c={value:_42b,configurable:true,enumerable:false,writable:true};es5.defineProperty(obj,name,_42c);return obj;};function _42d(r){throw r;};var _42e=(function(){var _42f=[Array.prototype,Object.prototype,Function.prototype];var _430=function(val){for(var i=0;i<_42f.length;++i){if(_42f[i]===val){return true;}}return false;};if(es5.isES5){var _431=Object.getOwnPropertyNames;return function(obj){var ret=[];var _432=Object.create(null);while(obj!=null&&!_430(obj)){var keys;try{keys=_431(obj);}catch(e){return ret;}for(var i=0;i<keys.length;++i){var key=keys[i];if(_432[key]){continue;}_432[key]=true;var desc=Object.getOwnPropertyDescriptor(obj,key);if(desc!=null&&desc.get==null&&desc.set==null){ret.push(key);}}obj=es5.getPrototypeOf(obj);}return ret;};}else{var _433={}.hasOwnProperty;return function(obj){if(_430(obj)){return [];}var ret=[];enumeration:for(var key in obj){if(_433.call(obj,key)){ret.push(key);}else{for(var i=0;i<_42f.length;++i){if(_433.call(_42f[i],key)){continue enumeration;}}ret.push(key);}}return ret;};}})();var _434=/this\s*\.\s*\S+\s*=/;function _435(fn){try{if(typeof fn==="function"){var keys=es5.names(fn.prototype);var _436=es5.isES5&&keys.length>1;var _437=keys.length>0&&!(keys.length===1&&keys[0]==="constructor");var _438=_434.test(fn+"")&&es5.names(fn).length>0;if(_436||_437||_438){return true;}}return false;}catch(e){return false;}};function _439(obj){function f(){};f.prototype=obj;var l=8;while(l--){new f();}return obj;eval(obj);};var _43a=/^[a-z$_][a-z$_0-9]*$/i;function _43b(str){return _43a.test(str);};function _43c(_43d,_43e,_43f){var ret=new Array(_43d);for(var i=0;i<_43d;++i){ret[i]=_43e+i+_43f;}return ret;};function _424(obj){try{return obj+"";}catch(e){return "[no string representation]";}};function _440(e){try{_42a(e,"isOperational",true);}catch(ignore){}};function _441(e){if(e==null){return false;}return ((e instanceof Error["__BluebirdErrorTypes__"].OperationalError)||e["isOperational"]===true);};function _442(obj){return obj instanceof Error&&es5.propertyIsWritable(obj,"stack");};var _443=(function(){if(!("stack" in new Error())){return function(_444){if(_442(_444)){return _444;}try{throw new Error(_424(_444));}catch(err){return err;}};}else{return function(_445){if(_442(_445)){return _445;}return new Error(_424(_445));};}})();function _446(obj){return {}.toString.call(obj);};function _447(from,to,_448){var keys=es5.names(from);for(var i=0;i<keys.length;++i){var key=keys[i];if(_448(key)){try{es5.defineProperty(to,key,es5.getDescriptor(from,key));}catch(ignore){}}}};var ret={isClass:_435,isIdentifier:_43b,inheritedDataKeys:_42e,getDataPropertyOrDefault:_428,thrower:_42d,isArray:es5.isArray,haveGetters:_414,notEnumerableProp:_42a,isPrimitive:_41f,isObject:_420,canEvaluate:_413,errorObj:_415,tryCatch:_419,inherits:_41a,withAppended:_425,maybeWrapAsError:_422,toFastProperties:_439,filledRange:_43c,toString:_424,canAttachTrace:_442,ensureErrorObject:_443,originatesFromRejection:_441,markAsOriginatingFromRejection:_440,classString:_446,copyDescriptors:_447,hasDevTools:typeof chrome!=="undefined"&&chrome&&typeof chrome.loadTimes==="function",isNode:typeof process!=="undefined"&&_446(process).toLowerCase()==="[object process]"};ret.isRecentNode=ret.isNode&&(function(){var _449=process.versions.node.split(".").map(Number);return (_449[0]===0&&_449[1]>10)||(_449[0]>0);})();if(ret.isNode){ret.toFastProperties(process);}try{throw new Error();}catch(e){ret.lastLineError=e;}_411.exports=ret;},{"./es5.js":14}]},{},[4])(4);});if(typeof window!=="undefined"&&window!==null){window.P=window.Promise;}else{if(typeof self!=="undefined"&&self!==null){self.P=self.Promise;}}});