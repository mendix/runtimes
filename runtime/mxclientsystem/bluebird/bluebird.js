//>>built
define("bluebird/bluebird",function(){var _1,_2,_3;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof _dereq_=="function"&&_dereq_;if(!u&&a){return a(o,!0);}if(i){return i(o,!0);}var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f;}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e);},l,l.exports,e,t,n,r);}return n[o].exports;};var i=typeof _dereq_=="function"&&_dereq_;for(var o=0;o<r.length;o++){s(r[o]);}return s;})({1:[function(_4,_5,_6){"use strict";_5.exports=function(_7){var _8=_7._SomePromiseArray;function _9(_a){var _b=new _8(_a);var _c=_b.promise();_b.setHowMany(1);_b.setUnwrap();_b.init();return _c;};_7.any=function(_d){return _9(_d);};_7.prototype.any=function(){return _9(this);};};},{}],2:[function(_e,_f,_10){"use strict";var _11;try{throw new Error();}catch(e){_11=e;}var _12=_e("./schedule.js");var _13=_e("./queue.js");var _14=_e("./util.js");function _15(){this._isTickUsed=false;this._lateQueue=new _13(16);this._normalQueue=new _13(16);this._trampolineEnabled=true;var _16=this;this.drainQueues=function(){_16._drainQueues();};this._schedule=_12.isStatic?_12(this.drainQueues):_12;};_15.prototype.disableTrampolineIfNecessary=function(){if(_14.hasDevTools){this._trampolineEnabled=false;}};_15.prototype.enableTrampoline=function(){if(!this._trampolineEnabled){this._trampolineEnabled=true;this._schedule=function(fn){setTimeout(fn,0);};}};_15.prototype.haveItemsQueued=function(){return this._normalQueue.length()>0;};_15.prototype.throwLater=function(fn,arg){if(arguments.length===1){arg=fn;fn=function(){throw arg;};}if(typeof setTimeout!=="undefined"){setTimeout(function(){fn(arg);},0);}else{try{this._schedule(function(){fn(arg);});}catch(e){throw new Error("No async scheduler available\n\n    See http://goo.gl/m3OTXk\n");}}};function _17(fn,_18,arg){this._lateQueue.push(fn,_18,arg);this._queueTick();};function _19(fn,_1a,arg){this._normalQueue.push(fn,_1a,arg);this._queueTick();};function _1b(_1c){this._normalQueue._pushOne(_1c);this._queueTick();};if(!_14.hasDevTools){_15.prototype.invokeLater=_17;_15.prototype.invoke=_19;_15.prototype.settlePromises=_1b;}else{if(_12.isStatic){_12=function(fn){setTimeout(fn,0);};}_15.prototype.invokeLater=function(fn,_1d,arg){if(this._trampolineEnabled){_17.call(this,fn,_1d,arg);}else{this._schedule(function(){setTimeout(function(){fn.call(_1d,arg);},100);});}};_15.prototype.invoke=function(fn,_1e,arg){if(this._trampolineEnabled){_19.call(this,fn,_1e,arg);}else{this._schedule(function(){fn.call(_1e,arg);});}};_15.prototype.settlePromises=function(_1f){if(this._trampolineEnabled){_1b.call(this,_1f);}else{this._schedule(function(){_1f._settlePromises();});}};}_15.prototype.invokeFirst=function(fn,_20,arg){this._normalQueue.unshift(fn,_20,arg);this._queueTick();};_15.prototype._drainQueue=function(_21){while(_21.length()>0){var fn=_21.shift();if(typeof fn!=="function"){fn._settlePromises();continue;}var _22=_21.shift();var arg=_21.shift();fn.call(_22,arg);}};_15.prototype._drainQueues=function(){this._drainQueue(this._normalQueue);this._reset();this._drainQueue(this._lateQueue);};_15.prototype._queueTick=function(){if(!this._isTickUsed){this._isTickUsed=true;this._schedule(this.drainQueues);}};_15.prototype._reset=function(){this._isTickUsed=false;};_f.exports=new _15();_f.exports.firstLineError=_11;},{"./queue.js":28,"./schedule.js":31,"./util.js":38}],3:[function(_23,_24,_25){"use strict";_24.exports=function(_26,_27,_28){var _29=function(_2a,e){this._reject(e);};var _2b=function(e,_2c){_2c.promiseRejectionQueued=true;_2c.bindingPromise._then(_29,_29,null,this,e);};var _2d=function(_2e,_2f){if(this._isPending()){this._resolveCallback(_2f.target);}};var _30=function(e,_31){if(!_31.promiseRejectionQueued){this._reject(e);}};_26.prototype.bind=function(_32){var _33=_28(_32);var ret=new _26(_27);ret._propagateFrom(this,1);var _34=this._target();ret._setBoundTo(_33);if(_33 instanceof _26){var _35={promiseRejectionQueued:false,promise:ret,target:_34,bindingPromise:_33};_34._then(_27,_2b,ret._progress,ret,_35);_33._then(_2d,_30,ret._progress,ret,_35);}else{ret._resolveCallback(_34);}return ret;};_26.prototype._setBoundTo=function(obj){if(obj!==undefined){this._bitField=this._bitField|131072;this._boundTo=obj;}else{this._bitField=this._bitField&(~131072);}};_26.prototype._isBound=function(){return (this._bitField&131072)===131072;};_26.bind=function(_36,_37){var _38=_28(_36);var ret=new _26(_27);ret._setBoundTo(_38);if(_38 instanceof _26){_38._then(function(){ret._resolveCallback(_37);},ret._reject,ret._progress,ret,null);}else{ret._resolveCallback(_37);}return ret;};};},{}],4:[function(_39,_3a,_3b){"use strict";var old;if(typeof Promise!=="undefined"){old=Promise;}function _3c(){try{if(Promise===_3d){Promise=old;}}catch(e){}return _3d;};var _3d=_39("./promise.js")();_3d.noConflict=_3c;_3a.exports=_3d;},{"./promise.js":23}],5:[function(_3e,_3f,_40){"use strict";var cr=Object.create;if(cr){var _41=cr(null);var _42=cr(null);_41[" size"]=_42[" size"]=0;}_3f.exports=function(_43){var _44=_3e("./util.js");var _45=_44.canEvaluate;var _46=_44.isIdentifier;var _47;var _48;if(!true){var _49=function(_4a){return new Function("ensureMethod","                                    \n        return function(obj) {                                               \n            'use strict'                                                     \n            var len = this.length;                                           \n            ensureMethod(obj, 'methodName');                                 \n            switch(len) {                                                    \n                case 1: return obj.methodName(this[0]);                      \n                case 2: return obj.methodName(this[0], this[1]);             \n                case 3: return obj.methodName(this[0], this[1], this[2]);    \n                case 0: return obj.methodName();                             \n                default:                                                     \n                    return obj.methodName.apply(obj, this);                  \n            }                                                                \n        };                                                                   \n        ".replace(/methodName/g,_4a))(_4b);};var _4c=function(_4d){return new Function("obj","                                             \n        'use strict';                                                        \n        return obj.propertyName;                                             \n        ".replace("propertyName",_4d));};var _4e=function(_4f,_50,_51){var ret=_51[_4f];if(typeof ret!=="function"){if(!_46(_4f)){return null;}ret=_50(_4f);_51[_4f]=ret;_51[" size"]++;if(_51[" size"]>512){var _52=Object.keys(_51);for(var i=0;i<256;++i){delete _51[_52[i]];}_51[" size"]=_52.length-256;}}return ret;};_47=function(_53){return _4e(_53,_49,_41);};_48=function(_54){return _4e(_54,_4c,_42);};}function _4b(obj,_55){var fn;if(obj!=null){fn=obj[_55];}if(typeof fn!=="function"){var _56="Object "+_44.classString(obj)+" has no method '"+_44.toString(_55)+"'";throw new _43.TypeError(_56);}return fn;};function _57(obj){var _58=this.pop();var fn=_4b(obj,_58);return fn.apply(obj,this);};_43.prototype.call=function(_59){var _5a=arguments.length;var _5b=new Array(_5a-1);for(var $_i=1;$_i<_5a;++$_i){_5b[$_i-1]=arguments[$_i];}if(!true){if(_45){var _5c=_47(_59);if(_5c!==null){return this._then(_5c,undefined,undefined,_5b,undefined);}}}_5b.push(_59);return this._then(_57,undefined,undefined,_5b,undefined);};function _5d(obj){return obj[this];};function _5e(obj){var _5f=+this;if(_5f<0){_5f=Math.max(0,_5f+obj.length);}return obj[_5f];};_43.prototype.get=function(_60){var _61=(typeof _60==="number");var _62;if(!_61){if(_45){var _63=_48(_60);_62=_63!==null?_63:_5d;}else{_62=_5d;}}else{_62=_5e;}return this._then(_62,undefined,undefined,_60,undefined);};};},{"./util.js":38}],6:[function(_64,_65,_66){"use strict";_65.exports=function(_67){var _68=_64("./errors.js");var _69=_64("./async.js");var _6a=_68.CancellationError;_67.prototype._cancel=function(_6b){if(!this.isCancellable()){return this;}var _6c;var _6d=this;while((_6c=_6d._cancellationParent)!==undefined&&_6c.isCancellable()){_6d=_6c;}this._unsetCancellable();_6d._target()._rejectCallback(_6b,false,true);};_67.prototype.cancel=function(_6e){if(!this.isCancellable()){return this;}if(_6e===undefined){_6e=new _6a();}_69.invokeLater(this._cancel,this,_6e);return this;};_67.prototype.cancellable=function(){if(this._cancellable()){return this;}_69.enableTrampoline();this._setCancellable();this._cancellationParent=undefined;return this;};_67.prototype.uncancellable=function(){var ret=this.then();ret._unsetCancellable();return ret;};_67.prototype.fork=function(_6f,_70,_71){var ret=this._then(_6f,_70,_71,undefined,undefined);ret._setCancellable();ret._cancellationParent=undefined;return ret;};};},{"./async.js":2,"./errors.js":13}],7:[function(_72,_73,_74){"use strict";_73.exports=function(){var _75=_72("./async.js");var _76=_72("./util.js");var _77=/[\\\/]bluebird[\\\/]js[\\\/](main|debug|zalgo|instrumented)/;var _78=null;var _79=null;var _7a=false;var _7b;function _7c(_7d){this._parent=_7d;var _7e=this._length=1+(_7d===undefined?0:_7d._length);_7f(this,_7c);if(_7e>32){this.uncycle();}};_76.inherits(_7c,Error);_7c.prototype.uncycle=function(){var _80=this._length;if(_80<2){return;}var _81=[];var _82={};for(var i=0,_83=this;_83!==undefined;++i){_81.push(_83);_83=_83._parent;}_80=this._length=i;for(var i=_80-1;i>=0;--i){var _84=_81[i].stack;if(_82[_84]===undefined){_82[_84]=i;}}for(var i=0;i<_80;++i){var _85=_81[i].stack;var _86=_82[_85];if(_86!==undefined&&_86!==i){if(_86>0){_81[_86-1]._parent=undefined;_81[_86-1]._length=1;}_81[i]._parent=undefined;_81[i]._length=1;var _87=i>0?_81[i-1]:this;if(_86<_80-1){_87._parent=_81[_86+1];_87._parent.uncycle();_87._length=_87._parent._length+1;}else{_87._parent=undefined;_87._length=1;}var _88=_87._length+1;for(var j=i-2;j>=0;--j){_81[j]._length=_88;_88++;}return;}}};_7c.prototype.parent=function(){return this._parent;};_7c.prototype.hasParent=function(){return this._parent!==undefined;};_7c.prototype.attachExtraTrace=function(_89){if(_89.__stackCleaned__){return;}this.uncycle();var _8a=_7c.parseStackAndMessage(_89);var _8b=_8a.message;var _8c=[_8a.stack];var _8d=this;while(_8d!==undefined){_8c.push(_8e(_8d.stack.split("\n")));_8d=_8d._parent;}_8f(_8c);_90(_8c);_76.notEnumerableProp(_89,"stack",_91(_8b,_8c));_76.notEnumerableProp(_89,"__stackCleaned__",true);};function _91(_92,_93){for(var i=0;i<_93.length-1;++i){_93[i].push("From previous event:");_93[i]=_93[i].join("\n");}if(i<_93.length){_93[i]=_93[i].join("\n");}return _92+"\n"+_93.join("\n");};function _90(_94){for(var i=0;i<_94.length;++i){if(_94[i].length===0||((i+1<_94.length)&&_94[i][0]===_94[i+1][0])){_94.splice(i,1);i--;}}};function _8f(_95){var _96=_95[0];for(var i=1;i<_95.length;++i){var _97=_95[i];var _98=_96.length-1;var _99=_96[_98];var _9a=-1;for(var j=_97.length-1;j>=0;--j){if(_97[j]===_99){_9a=j;break;}}for(var j=_9a;j>=0;--j){var _9b=_97[j];if(_96[_98]===_9b){_96.pop();_98--;}else{break;}}_96=_97;}};function _8e(_9c){var ret=[];for(var i=0;i<_9c.length;++i){var _9d=_9c[i];var _9e=_78.test(_9d)||"    (No stack trace)"===_9d;var _9f=_9e&&_a0(_9d);if(_9e&&!_9f){if(_7a&&_9d.charAt(0)!==" "){_9d="    "+_9d;}ret.push(_9d);}}return ret;};function _a1(_a2){var _a3=_a2.stack.replace(/\s+$/g,"").split("\n");for(var i=0;i<_a3.length;++i){var _a4=_a3[i];if("    (No stack trace)"===_a4||_78.test(_a4)){break;}}if(i>0){_a3=_a3.slice(i);}return _a3;};_7c.parseStackAndMessage=function(_a5){var _a6=_a5.stack;var _a7=_a5.toString();_a6=typeof _a6==="string"&&_a6.length>0?_a1(_a5):["    (No stack trace)"];return {message:_a7,stack:_8e(_a6)};};_7c.formatAndLogError=function(_a8,_a9){if(typeof console!=="undefined"){var _aa;if(typeof _a8==="object"||typeof _a8==="function"){var _ab=_a8.stack;_aa=_a9+_79(_ab,_a8);}else{_aa=_a9+String(_a8);}if(typeof _7b==="function"){_7b(_aa);}else{if(typeof console.log==="function"||typeof console.log==="object"){}}}};_7c.unhandledRejection=function(_ac){_7c.formatAndLogError(_ac,"^--- With additional stack trace: ");};_7c.isSupported=function(){return typeof _7f==="function";};_7c.fireRejectionEvent=function(_ad,_ae,_af,_b0){var _b1=false;try{if(typeof _ae==="function"){_b1=true;if(_ad==="rejectionHandled"){_ae(_b0);}else{_ae(_af,_b0);}}}catch(e){_75.throwLater(e);}var _b2=false;try{_b2=_b3(_ad,_af,_b0);}catch(e){_b2=true;_75.throwLater(e);}var _b4=false;if(_b5){try{_b4=_b5(_ad.toLowerCase(),{reason:_af,promise:_b0});}catch(e){_b4=true;_75.throwLater(e);}}if(!_b2&&!_b1&&!_b4&&_ad==="unhandledRejection"){_7c.formatAndLogError(_af,"Unhandled rejection ");}};function _b6(obj){var str;if(typeof obj==="function"){str="[function "+(obj.name||"anonymous")+"]";}else{str=obj.toString();var _b7=/\[object [a-zA-Z0-9$_]+\]/;if(_b7.test(str)){try{var _b8=JSON.stringify(obj);str=_b8;}catch(e){}}if(str.length===0){str="(empty array)";}}return ("(<"+_b9(str)+">, no stack trace)");};function _b9(str){var _ba=41;if(str.length<_ba){return str;}return str.substr(0,_ba-3)+"...";};var _a0=function(){return false;};var _bb=/[\/<\(]([^:\/]+):(\d+):(?:\d+)\)?\s*$/;function _bc(_bd){var _be=_bd.match(_bb);if(_be){return {fileName:_be[1],line:parseInt(_be[2],10)};}};_7c.setBounds=function(_bf,_c0){if(!_7c.isSupported()){return;}var _c1=_bf.stack.split("\n");var _c2=_c0.stack.split("\n");var _c3=-1;var _c4=-1;var _c5;var _c6;for(var i=0;i<_c1.length;++i){var _c7=_bc(_c1[i]);if(_c7){_c5=_c7.fileName;_c3=_c7.line;break;}}for(var i=0;i<_c2.length;++i){var _c7=_bc(_c2[i]);if(_c7){_c6=_c7.fileName;_c4=_c7.line;break;}}if(_c3<0||_c4<0||!_c5||!_c6||_c5!==_c6||_c3>=_c4){return;}_a0=function(_c8){if(_77.test(_c8)){return true;}var _c9=_bc(_c8);if(_c9){if(_c9.fileName===_c5&&(_c3<=_c9.line&&_c9.line<=_c4)){return true;}}return false;};};var _7f=(function stackDetection(){var _ca=/^\s*at\s*/;var _cb=function(_cc,_cd){if(typeof _cc==="string"){return _cc;}if(_cd.name!==undefined&&_cd.message!==undefined){return _cd.toString();}return _b6(_cd);};if(typeof Error.stackTraceLimit==="number"&&typeof Error.captureStackTrace==="function"){Error.stackTraceLimit=Error.stackTraceLimit+6;_78=_ca;_79=_cb;var _ce=Error.captureStackTrace;_a0=function(_cf){return _77.test(_cf);};return function(_d0,_d1){Error.stackTraceLimit=Error.stackTraceLimit+6;_ce(_d0,_d1);Error.stackTraceLimit=Error.stackTraceLimit-6;};}var err=new Error();if(typeof err.stack==="string"&&err.stack.split("\n")[0].indexOf("stackDetection@")>=0){_78=/@/;_79=_cb;_7a=true;return function _ce(o){o.stack=new Error().stack;};}var _d2;try{throw new Error();}catch(e){_d2=("stack" in e);}if(!("stack" in err)&&_d2&&typeof Error.stackTraceLimit==="number"){_78=_ca;_79=_cb;return function _ce(o){Error.stackTraceLimit=Error.stackTraceLimit+6;try{throw new Error();}catch(e){o.stack=e.stack;}Error.stackTraceLimit=Error.stackTraceLimit-6;};}_79=function(_d3,_d4){if(typeof _d3==="string"){return _d3;}if((typeof _d4==="object"||typeof _d4==="function")&&_d4.name!==undefined&&_d4.message!==undefined){return _d4.toString();}return _b6(_d4);};return null;})([]);var _b5;var _b3=(function(){if(_76.isNode){return function(_d5,_d6,_d7){if(_d5==="rejectionHandled"){return process.emit(_d5,_d7);}else{return process.emit(_d5,_d6,_d7);}};}else{var _d8=false;var _d9=true;try{var ev=new self.CustomEvent("test");_d8=ev instanceof CustomEvent;}catch(e){}if(!_d8){try{var _da=document.createEvent("CustomEvent");_da.initCustomEvent("testingtheevent",false,true,{});self.dispatchEvent(_da);}catch(e){_d9=false;}}if(_d9){_b5=function(_db,_dc){var _dd;if(_d8){_dd=new self.CustomEvent(_db,{detail:_dc,bubbles:false,cancelable:true});}else{if(self.dispatchEvent){_dd=document.createEvent("CustomEvent");_dd.initCustomEvent(_db,false,true,_dc);}}return _dd?!self.dispatchEvent(_dd):false;};}var _de={};_de["unhandledRejection"]=("on"+"unhandledRejection").toLowerCase();_de["rejectionHandled"]=("on"+"rejectionHandled").toLowerCase();return function(_df,_e0,_e1){var _e2=_de[_df];var _e3=self[_e2];if(!_e3){return false;}if(_df==="rejectionHandled"){_e3.call(self,_e1);}else{_e3.call(self,_e0,_e1);}return true;};}})();if(typeof console!=="undefined"&&typeof console.warn!=="undefined"){_7b=function(_e4){console.warn(_e4);};if(_76.isNode&&process.stderr.isTTY){_7b=function(_e5){process.stderr.write("[31m"+_e5+"[39m\n");};}else{if(!_76.isNode&&typeof (new Error().stack)==="string"){_7b=function(_e6){console.warn("%c"+_e6,"color: red");};}}}return _7c;};},{"./async.js":2,"./util.js":38}],8:[function(_e7,_e8,_e9){"use strict";_e8.exports=function(_ea){var _eb=_e7("./util.js");var _ec=_e7("./errors.js");var _ed=_eb.tryCatch;var _ee=_eb.errorObj;var _ef=_e7("./es5.js").keys;var _f0=_ec.TypeError;function _f1(_f2,_f3,_f4){this._instances=_f2;this._callback=_f3;this._promise=_f4;};function _f5(_f6,e){var _f7={};var _f8=_ed(_f6).call(_f7,e);if(_f8===_ee){return _f8;}var _f9=_ef(_f7);if(_f9.length){_ee.e=new _f0("Catch filter must inherit from Error or be a simple predicate function\n\n    See http://goo.gl/o84o68\n");return _ee;}return _f8;};_f1.prototype.doFilter=function(e){var cb=this._callback;var _fa=this._promise;var _fb=_fa._boundValue();for(var i=0,len=this._instances.length;i<len;++i){var _fc=this._instances[i];var _fd=_fc===Error||(_fc!=null&&_fc.prototype instanceof Error);if(_fd&&e instanceof _fc){var ret=_ed(cb).call(_fb,e);if(ret===_ee){_ea.e=ret.e;return _ea;}return ret;}else{if(typeof _fc==="function"&&!_fd){var _fe=_f5(_fc,e);if(_fe===_ee){e=_ee.e;break;}else{if(_fe){var ret=_ed(cb).call(_fb,e);if(ret===_ee){_ea.e=ret.e;return _ea;}return ret;}}}}}_ea.e=e;return _ea;};return _f1;};},{"./errors.js":13,"./es5.js":14,"./util.js":38}],9:[function(_ff,_100,_101){"use strict";_100.exports=function(_102,_103,_104){var _105=[];function _106(){this._trace=new _103(_107());};_106.prototype._pushContext=function(){if(!_104()){return;}if(this._trace!==undefined){_105.push(this._trace);}};_106.prototype._popContext=function(){if(!_104()){return;}if(this._trace!==undefined){_105.pop();}};function _108(){if(_104()){return new _106();}};function _107(){var _109=_105.length-1;if(_109>=0){return _105[_109];}return undefined;};_102.prototype._peekContext=_107;_102.prototype._pushContext=_106.prototype._pushContext;_102.prototype._popContext=_106.prototype._popContext;return _108;};},{}],10:[function(_10a,_10b,_10c){"use strict";_10b.exports=function(_10d,_10e){var _10f=_10d._getDomain;var _110=_10a("./async.js");var _111=_10a("./errors.js").Warning;var util=_10a("./util.js");var _112=util.canAttachTrace;var _113;var _114;var _115=false||(util.isNode&&(!!process.env["BLUEBIRD_DEBUG"]||process.env["NODE_ENV"]==="development"));if(_115){_110.disableTrampolineIfNecessary();}_10d.prototype._ignoreRejections=function(){this._unsetRejectionIsUnhandled();this._bitField=this._bitField|16777216;};_10d.prototype._ensurePossibleRejectionHandled=function(){if((this._bitField&16777216)!==0){return;}this._setRejectionIsUnhandled();_110.invokeLater(this._notifyUnhandledRejection,this,undefined);};_10d.prototype._notifyUnhandledRejectionIsHandled=function(){_10e.fireRejectionEvent("rejectionHandled",_113,undefined,this);};_10d.prototype._notifyUnhandledRejection=function(){if(this._isRejectionUnhandled()){var _116=this._getCarriedStackTrace()||this._settledValue;this._setUnhandledRejectionIsNotified();_10e.fireRejectionEvent("unhandledRejection",_114,_116,this);}};_10d.prototype._setUnhandledRejectionIsNotified=function(){this._bitField=this._bitField|524288;};_10d.prototype._unsetUnhandledRejectionIsNotified=function(){this._bitField=this._bitField&(~524288);};_10d.prototype._isUnhandledRejectionNotified=function(){return (this._bitField&524288)>0;};_10d.prototype._setRejectionIsUnhandled=function(){this._bitField=this._bitField|2097152;};_10d.prototype._unsetRejectionIsUnhandled=function(){this._bitField=this._bitField&(~2097152);if(this._isUnhandledRejectionNotified()){this._unsetUnhandledRejectionIsNotified();this._notifyUnhandledRejectionIsHandled();}};_10d.prototype._isRejectionUnhandled=function(){return (this._bitField&2097152)>0;};_10d.prototype._setCarriedStackTrace=function(_117){this._bitField=this._bitField|1048576;this._fulfillmentHandler0=_117;};_10d.prototype._isCarryingStackTrace=function(){return (this._bitField&1048576)>0;};_10d.prototype._getCarriedStackTrace=function(){return this._isCarryingStackTrace()?this._fulfillmentHandler0:undefined;};_10d.prototype._captureStackTrace=function(){if(_115){this._trace=new _10e(this._peekContext());}return this;};_10d.prototype._attachExtraTrace=function(_118,_119){if(_115&&_112(_118)){var _11a=this._trace;if(_11a!==undefined){if(_119){_11a=_11a._parent;}}if(_11a!==undefined){_11a.attachExtraTrace(_118);}else{if(!_118.__stackCleaned__){var _11b=_10e.parseStackAndMessage(_118);util.notEnumerableProp(_118,"stack",_11b.message+"\n"+_11b.stack.join("\n"));util.notEnumerableProp(_118,"__stackCleaned__",true);}}}};_10d.prototype._warn=function(_11c){var _11d=new _111(_11c);var ctx=this._peekContext();if(ctx){ctx.attachExtraTrace(_11d);}else{var _11e=_10e.parseStackAndMessage(_11d);_11d.stack=_11e.message+"\n"+_11e.stack.join("\n");}_10e.formatAndLogError(_11d,"");};_10d.onPossiblyUnhandledRejection=function(fn){var _11f=_10f();_114=typeof fn==="function"?(_11f===null?fn:_11f.bind(fn)):undefined;};_10d.onUnhandledRejectionHandled=function(fn){var _120=_10f();_113=typeof fn==="function"?(_120===null?fn:_120.bind(fn)):undefined;};_10d.longStackTraces=function(){if(_110.haveItemsQueued()&&_115===false){throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/DT1qyG\n");}_115=_10e.isSupported();if(_115){_110.disableTrampolineIfNecessary();}};_10d.hasLongStackTraces=function(){return _115&&_10e.isSupported();};if(!_10e.isSupported()){_10d.longStackTraces=function(){};_115=false;}return function(){return _115;};};},{"./async.js":2,"./errors.js":13,"./util.js":38}],11:[function(_121,_122,_123){"use strict";var util=_121("./util.js");var _124=util.isPrimitive;_122.exports=function(_125){var _126=function(){return this;};var _127=function(){throw this;};var _128=function(){};var _129=function(){throw undefined;};var _12a=function(_12b,_12c){if(_12c===1){return function(){throw _12b;};}else{if(_12c===2){return function(){return _12b;};}}};_125.prototype["return"]=_125.prototype.thenReturn=function(_12d){if(_12d===undefined){return this.then(_128);}if(_124(_12d)){return this._then(_12a(_12d,2),undefined,undefined,undefined,undefined);}return this._then(_126,undefined,undefined,_12d,undefined);};_125.prototype["throw"]=_125.prototype.thenThrow=function(_12e){if(_12e===undefined){return this.then(_129);}if(_124(_12e)){return this._then(_12a(_12e,1),undefined,undefined,undefined,undefined);}return this._then(_127,undefined,undefined,_12e,undefined);};};},{"./util.js":38}],12:[function(_12f,_130,_131){"use strict";_130.exports=function(_132,_133){var _134=_132.reduce;_132.prototype.each=function(fn){return _134(this,fn,null,_133);};_132.each=function(_135,fn){return _134(_135,fn,null,_133);};};},{}],13:[function(_136,_137,_138){"use strict";var es5=_136("./es5.js");var _139=es5.freeze;var util=_136("./util.js");var _13a=util.inherits;var _13b=util.notEnumerableProp;function _13c(_13d,_13e){function _13f(_140){if(!(this instanceof _13f)){return new _13f(_140);}_13b(this,"message",typeof _140==="string"?_140:_13e);_13b(this,"name",_13d);if(Error.captureStackTrace){Error.captureStackTrace(this,this.constructor);}else{Error.call(this);}};_13a(_13f,Error);return _13f;};var _141,_142;var _143=_13c("Warning","warning");var _144=_13c("CancellationError","cancellation error");var _145=_13c("TimeoutError","timeout error");var _146=_13c("AggregateError","aggregate error");try{_141=TypeError;_142=RangeError;}catch(e){_141=_13c("TypeError","type error");_142=_13c("RangeError","range error");}var _147=("join pop push shift unshift slice filter forEach some "+"every map indexOf lastIndexOf reduce reduceRight sort reverse").split(" ");for(var i=0;i<_147.length;++i){if(typeof Array.prototype[_147[i]]==="function"){_146.prototype[_147[i]]=Array.prototype[_147[i]];}}es5.defineProperty(_146.prototype,"length",{value:0,configurable:false,writable:true,enumerable:true});_146.prototype["isOperational"]=true;var _148=0;_146.prototype.toString=function(){var _149=Array(_148*4+1).join(" ");var ret="\n"+_149+"AggregateError of:"+"\n";_148++;_149=Array(_148*4+1).join(" ");for(var i=0;i<this.length;++i){var str=this[i]===this?"[Circular AggregateError]":this[i]+"";var _14a=str.split("\n");for(var j=0;j<_14a.length;++j){_14a[j]=_149+_14a[j];}str=_14a.join("\n");ret+=str+"\n";}_148--;return ret;};function _14b(_14c){if(!(this instanceof _14b)){return new _14b(_14c);}_13b(this,"name","OperationalError");_13b(this,"message",_14c);this.cause=_14c;this["isOperational"]=true;if(_14c instanceof Error){_13b(this,"message",_14c.message);_13b(this,"stack",_14c.stack);}else{if(Error.captureStackTrace){Error.captureStackTrace(this,this.constructor);}}};_13a(_14b,Error);var _14d=Error["__BluebirdErrorTypes__"];if(!_14d){_14d=_139({CancellationError:_144,TimeoutError:_145,OperationalError:_14b,RejectionError:_14b,AggregateError:_146});_13b(Error,"__BluebirdErrorTypes__",_14d);}_137.exports={Error:Error,TypeError:_141,RangeError:_142,CancellationError:_14d.CancellationError,OperationalError:_14d.OperationalError,TimeoutError:_14d.TimeoutError,AggregateError:_14d.AggregateError,Warning:_143};},{"./es5.js":14,"./util.js":38}],14:[function(_14e,_14f,_150){var _151=(function(){"use strict";return this===undefined;})();if(_151){_14f.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,getDescriptor:Object.getOwnPropertyDescriptor,keys:Object.keys,names:Object.getOwnPropertyNames,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:_151,propertyIsWritable:function(obj,prop){var _152=Object.getOwnPropertyDescriptor(obj,prop);return !!(!_152||_152.writable||_152.set);}};}else{var has={}.hasOwnProperty;var str={}.toString;var _153={}.constructor.prototype;var _154=function(o){var ret=[];for(var key in o){if(has.call(o,key)){ret.push(key);}}return ret;};var _155=function(o,key){return {value:o[key]};};var _156=function(o,key,desc){o[key]=desc.value;return o;};var _157=function(obj){return obj;};var _158=function(obj){try{return Object(obj).constructor.prototype;}catch(e){return _153;}};var _159=function(obj){try{return str.call(obj)==="[object Array]";}catch(e){return false;}};_14f.exports={isArray:_159,keys:_154,names:_154,defineProperty:_156,getDescriptor:_155,freeze:_157,getPrototypeOf:_158,isES5:_151,propertyIsWritable:function(){return true;}};}},{}],15:[function(_15a,_15b,_15c){"use strict";_15b.exports=function(_15d,_15e){var _15f=_15d.map;_15d.prototype.filter=function(fn,_160){return _15f(this,fn,_160,_15e);};_15d.filter=function(_161,fn,_162){return _15f(_161,fn,_162,_15e);};};},{}],16:[function(_163,_164,_165){"use strict";_164.exports=function(_166,_167,_168){var util=_163("./util.js");var _169=util.isPrimitive;var _16a=util.thrower;function _16b(){return this;};function _16c(){throw this;};function _16d(r){return function(){return r;};};function _16e(r){return function(){throw r;};};function _16f(ret,_170,_171){var then;if(_169(_170)){then=_171?_16d(_170):_16e(_170);}else{then=_171?_16b:_16c;}return ret._then(then,_16a,undefined,_170,undefined);};function _172(_173){var _174=this.promise;var _175=this.handler;var ret=_174._isBound()?_175.call(_174._boundValue()):_175();if(ret!==undefined){var _176=_168(ret,_174);if(_176 instanceof _166){_176=_176._target();return _16f(_176,_173,_174.isFulfilled());}}if(_174.isRejected()){_167.e=_173;return _167;}else{return _173;}};function _177(_178){var _179=this.promise;var _17a=this.handler;var ret=_179._isBound()?_17a.call(_179._boundValue(),_178):_17a(_178);if(ret!==undefined){var _17b=_168(ret,_179);if(_17b instanceof _166){_17b=_17b._target();return _16f(_17b,_178,true);}}return _178;};_166.prototype._passThroughHandler=function(_17c,_17d){if(typeof _17c!=="function"){return this.then();}var _17e={promise:this,handler:_17c};return this._then(_17d?_172:_177,_17d?_172:undefined,undefined,_17e,undefined);};_166.prototype.lastly=_166.prototype["finally"]=function(_17f){return this._passThroughHandler(_17f,true);};_166.prototype.tap=function(_180){return this._passThroughHandler(_180,false);};};},{"./util.js":38}],17:[function(_181,_182,_183){"use strict";_182.exports=function(_184,_185,_186,_187){var _188=_181("./errors.js");var _189=_188.TypeError;var util=_181("./util.js");var _18a=util.errorObj;var _18b=util.tryCatch;var _18c=[];function _18d(_18e,_18f,_190){for(var i=0;i<_18f.length;++i){_190._pushContext();var _191=_18b(_18f[i])(_18e);_190._popContext();if(_191===_18a){_190._pushContext();var ret=_184.reject(_18a.e);_190._popContext();return ret;}var _192=_187(_191,_190);if(_192 instanceof _184){return _192;}}return null;};function _193(_194,_195,_196,_197){var _198=this._promise=new _184(_186);_198._captureStackTrace();this._stack=_197;this._generatorFunction=_194;this._receiver=_195;this._generator=undefined;this._yieldHandlers=typeof _196==="function"?[_196].concat(_18c):_18c;};_193.prototype.promise=function(){return this._promise;};_193.prototype._run=function(){this._generator=this._generatorFunction.call(this._receiver);this._receiver=this._generatorFunction=undefined;this._next(undefined);};_193.prototype._continue=function(_199){if(_199===_18a){return this._promise._rejectCallback(_199.e,false,true);}var _19a=_199.value;if(_199.done===true){this._promise._resolveCallback(_19a);}else{var _19b=_187(_19a,this._promise);if(!(_19b instanceof _184)){_19b=_18d(_19b,this._yieldHandlers,this._promise);if(_19b===null){this._throw(new _189("A value %s was yielded that could not be treated as a promise\n\n    See http://goo.gl/4Y4pDk\n\n".replace("%s",_19a)+"From coroutine:\n"+this._stack.split("\n").slice(1,-7).join("\n")));return;}}_19b._then(this._next,this._throw,undefined,this,null);}};_193.prototype._throw=function(_19c){this._promise._attachExtraTrace(_19c);this._promise._pushContext();var _19d=_18b(this._generator["throw"]).call(this._generator,_19c);this._promise._popContext();this._continue(_19d);};_193.prototype._next=function(_19e){this._promise._pushContext();var _19f=_18b(this._generator.next).call(this._generator,_19e);this._promise._popContext();this._continue(_19f);};_184.coroutine=function(_1a0,_1a1){if(typeof _1a0!=="function"){throw new _189("generatorFunction must be a function\n\n    See http://goo.gl/6Vqhm0\n");}var _1a2=Object(_1a1).yieldHandler;var _1a3=_193;var _1a4=new Error().stack;return function(){var _1a5=_1a0.apply(this,arguments);var _1a6=new _1a3(undefined,undefined,_1a2,_1a4);_1a6._generator=_1a5;_1a6._next(undefined);return _1a6.promise();};};_184.coroutine.addYieldHandler=function(fn){if(typeof fn!=="function"){throw new _189("fn must be a function\n\n    See http://goo.gl/916lJJ\n");}_18c.push(fn);};_184.spawn=function(_1a7){if(typeof _1a7!=="function"){return _185("generatorFunction must be a function\n\n    See http://goo.gl/6Vqhm0\n");}var _1a8=new _193(_1a7,this);var ret=_1a8.promise();_1a8._run(_184.spawn);return ret;};};},{"./errors.js":13,"./util.js":38}],18:[function(_1a9,_1aa,_1ab){"use strict";_1aa.exports=function(_1ac,_1ad,_1ae,_1af){var util=_1a9("./util.js");var _1b0=util.canEvaluate;var _1b1=util.tryCatch;var _1b2=util.errorObj;var _1b3;if(!true){if(_1b0){var _1b4=function(i){return new Function("value","holder","                             \n            'use strict';                                                    \n            holder.pIndex = value;                                           \n            holder.checkFulfillment(this);                                   \n            ".replace(/Index/g,i));};var _1b5=function(_1b6){var _1b7=[];for(var i=1;i<=_1b6;++i){_1b7.push("holder.p"+i);}return new Function("holder","                                      \n            'use strict';                                                    \n            var callback = holder.fn;                                        \n            return callback(values);                                         \n            ".replace(/values/g,_1b7.join(", ")));};var _1b8=[];var _1b9=[undefined];for(var i=1;i<=5;++i){_1b8.push(_1b4(i));_1b9.push(_1b5(i));}var _1ba=function(_1bb,fn){this.p1=this.p2=this.p3=this.p4=this.p5=null;this.fn=fn;this.total=_1bb;this.now=0;};_1ba.prototype.callers=_1b9;_1ba.prototype.checkFulfillment=function(_1bc){var now=this.now;now++;var _1bd=this.total;if(now>=_1bd){var _1be=this.callers[_1bd];_1bc._pushContext();var ret=_1b1(_1be)(this);_1bc._popContext();if(ret===_1b2){_1bc._rejectCallback(ret.e,false,true);}else{_1bc._resolveCallback(ret);}}else{this.now=now;}};var _1b3=function(_1bf){this._reject(_1bf);};}}_1ac.join=function(){var last=arguments.length-1;var fn;if(last>0&&typeof arguments[last]==="function"){fn=arguments[last];if(!true){if(last<6&&_1b0){var ret=new _1ac(_1af);ret._captureStackTrace();var _1c0=new _1ba(last,fn);var _1c1=_1b8;for(var i=0;i<last;++i){var _1c2=_1ae(arguments[i],ret);if(_1c2 instanceof _1ac){_1c2=_1c2._target();if(_1c2._isPending()){_1c2._then(_1c1[i],_1b3,undefined,ret,_1c0);}else{if(_1c2._isFulfilled()){_1c1[i].call(ret,_1c2._value(),_1c0);}else{ret._reject(_1c2._reason());}}}else{_1c1[i].call(ret,_1c2,_1c0);}}return ret;}}}var _1c3=arguments.length;var args=new Array(_1c3);for(var $_i=0;$_i<_1c3;++$_i){args[$_i]=arguments[$_i];}if(fn){args.pop();}var ret=new _1ad(args).promise();return fn!==undefined?ret.spread(fn):ret;};};},{"./util.js":38}],19:[function(_1c4,_1c5,_1c6){"use strict";_1c5.exports=function(_1c7,_1c8,_1c9,_1ca,_1cb){var _1cc=_1c7._getDomain;var _1cd=_1c4("./async.js");var util=_1c4("./util.js");var _1ce=util.tryCatch;var _1cf=util.errorObj;var _1d0={};var _1d1=[];function _1d2(_1d3,fn,_1d4,_1d5){this.constructor$(_1d3);this._promise._captureStackTrace();var _1d6=_1cc();this._callback=_1d6===null?fn:_1d6.bind(fn);this._preservedValues=_1d5===_1cb?new Array(this.length()):null;this._limit=_1d4;this._inFlight=0;this._queue=_1d4>=1?[]:_1d1;_1cd.invoke(init,this,undefined);};util.inherits(_1d2,_1c8);function init(){this._init$(undefined,-2);};_1d2.prototype._init=function(){};_1d2.prototype._promiseFulfilled=function(_1d7,_1d8){var _1d9=this._values;var _1da=this.length();var _1db=this._preservedValues;var _1dc=this._limit;if(_1d9[_1d8]===_1d0){_1d9[_1d8]=_1d7;if(_1dc>=1){this._inFlight--;this._drainQueue();if(this._isResolved()){return;}}}else{if(_1dc>=1&&this._inFlight>=_1dc){_1d9[_1d8]=_1d7;this._queue.push(_1d8);return;}if(_1db!==null){_1db[_1d8]=_1d7;}var _1dd=this._callback;var _1de=this._promise._boundValue();this._promise._pushContext();var ret=_1ce(_1dd).call(_1de,_1d7,_1d8,_1da);this._promise._popContext();if(ret===_1cf){return this._reject(ret.e);}var _1df=_1ca(ret,this._promise);if(_1df instanceof _1c7){_1df=_1df._target();if(_1df._isPending()){if(_1dc>=1){this._inFlight++;}_1d9[_1d8]=_1d0;return _1df._proxyPromiseArray(this,_1d8);}else{if(_1df._isFulfilled()){ret=_1df._value();}else{return this._reject(_1df._reason());}}}_1d9[_1d8]=ret;}var _1e0=++this._totalResolved;if(_1e0>=_1da){if(_1db!==null){this._filter(_1d9,_1db);}else{this._resolve(_1d9);}}};_1d2.prototype._drainQueue=function(){var _1e1=this._queue;var _1e2=this._limit;var _1e3=this._values;while(_1e1.length>0&&this._inFlight<_1e2){if(this._isResolved()){return;}var _1e4=_1e1.pop();this._promiseFulfilled(_1e3[_1e4],_1e4);}};_1d2.prototype._filter=function(_1e5,_1e6){var len=_1e6.length;var ret=new Array(len);var j=0;for(var i=0;i<len;++i){if(_1e5[i]){ret[j++]=_1e6[i];}}ret.length=j;this._resolve(ret);};_1d2.prototype.preservedValues=function(){return this._preservedValues;};function map(_1e7,fn,_1e8,_1e9){var _1ea=typeof _1e8==="object"&&_1e8!==null?_1e8.concurrency:0;_1ea=typeof _1ea==="number"&&isFinite(_1ea)&&_1ea>=1?_1ea:0;return new _1d2(_1e7,fn,_1ea,_1e9);};_1c7.prototype.map=function(fn,_1eb){if(typeof fn!=="function"){return _1c9("fn must be a function\n\n    See http://goo.gl/916lJJ\n");}return map(this,fn,_1eb,null).promise();};_1c7.map=function(_1ec,fn,_1ed,_1ee){if(typeof fn!=="function"){return _1c9("fn must be a function\n\n    See http://goo.gl/916lJJ\n");}return map(_1ec,fn,_1ed,_1ee).promise();};};},{"./async.js":2,"./util.js":38}],20:[function(_1ef,_1f0,_1f1){"use strict";_1f0.exports=function(_1f2,_1f3,_1f4,_1f5){var util=_1ef("./util.js");var _1f6=util.tryCatch;_1f2.method=function(fn){if(typeof fn!=="function"){throw new _1f2.TypeError("fn must be a function\n\n    See http://goo.gl/916lJJ\n");}return function(){var ret=new _1f2(_1f3);ret._captureStackTrace();ret._pushContext();var _1f7=_1f6(fn).apply(this,arguments);ret._popContext();ret._resolveFromSyncValue(_1f7);return ret;};};_1f2.attempt=_1f2["try"]=function(fn,args,ctx){if(typeof fn!=="function"){return _1f5("fn must be a function\n\n    See http://goo.gl/916lJJ\n");}var ret=new _1f2(_1f3);ret._captureStackTrace();ret._pushContext();var _1f8=util.isArray(args)?_1f6(fn).apply(ctx,args):_1f6(fn).call(ctx,args);ret._popContext();ret._resolveFromSyncValue(_1f8);return ret;};_1f2.prototype._resolveFromSyncValue=function(_1f9){if(_1f9===util.errorObj){this._rejectCallback(_1f9.e,false,true);}else{this._resolveCallback(_1f9,true);}};};},{"./util.js":38}],21:[function(_1fa,_1fb,_1fc){"use strict";_1fb.exports=function(_1fd){var util=_1fa("./util.js");var _1fe=_1fa("./async.js");var _1ff=util.tryCatch;var _200=util.errorObj;function _201(val,_202){var _203=this;if(!util.isArray(val)){return _204.call(_203,val,_202);}var ret=_1ff(_202).apply(_203._boundValue(),[null].concat(val));if(ret===_200){_1fe.throwLater(ret.e);}};function _204(val,_205){var _206=this;var _207=_206._boundValue();var ret=val===undefined?_1ff(_205).call(_207,null):_1ff(_205).call(_207,null,val);if(ret===_200){_1fe.throwLater(ret.e);}};function _208(_209,_20a){var _20b=this;if(!_209){var _20c=_20b._target();var _20d=_20c._getCarriedStackTrace();_20d.cause=_209;_209=_20d;}var ret=_1ff(_20a).call(_20b._boundValue(),_209);if(ret===_200){_1fe.throwLater(ret.e);}};_1fd.prototype.asCallback=_1fd.prototype.nodeify=function(_20e,_20f){if(typeof _20e=="function"){var _210=_204;if(_20f!==undefined&&Object(_20f).spread){_210=_201;}this._then(_210,_208,undefined,this,_20e);}return this;};};},{"./async.js":2,"./util.js":38}],22:[function(_211,_212,_213){"use strict";_212.exports=function(_214,_215){var util=_211("./util.js");var _216=_211("./async.js");var _217=util.tryCatch;var _218=util.errorObj;_214.prototype.progressed=function(_219){return this._then(undefined,undefined,_219,undefined,undefined);};_214.prototype._progress=function(_21a){if(this._isFollowingOrFulfilledOrRejected()){return;}this._target()._progressUnchecked(_21a);};_214.prototype._progressHandlerAt=function(_21b){return _21b===0?this._progressHandler0:this[(_21b<<2)+_21b-5+2];};_214.prototype._doProgressWith=function(_21c){var _21d=_21c.value;var _21e=_21c.handler;var _21f=_21c.promise;var _220=_21c.receiver;var ret=_217(_21e).call(_220,_21d);if(ret===_218){if(ret.e!=null&&ret.e.name!=="StopProgressPropagation"){var _221=util.canAttachTrace(ret.e)?ret.e:new Error(util.toString(ret.e));_21f._attachExtraTrace(_221);_21f._progress(ret.e);}}else{if(ret instanceof _214){ret._then(_21f._progress,null,null,_21f,undefined);}else{_21f._progress(ret);}}};_214.prototype._progressUnchecked=function(_222){var len=this._length();var _223=this._progress;for(var i=0;i<len;i++){var _224=this._progressHandlerAt(i);var _225=this._promiseAt(i);if(!(_225 instanceof _214)){var _226=this._receiverAt(i);if(typeof _224==="function"){_224.call(_226,_222,_225);}else{if(_226 instanceof _215&&!_226._isResolved()){_226._promiseProgressed(_222,_225);}}continue;}if(typeof _224==="function"){_216.invoke(this._doProgressWith,this,{handler:_224,promise:_225,receiver:this._receiverAt(i),value:_222});}else{_216.invoke(_223,_225,_222);}}};};},{"./async.js":2,"./util.js":38}],23:[function(_227,_228,_229){"use strict";_228.exports=function(){var _22a=function(){return new _22b("circular promise resolution chain\n\n    See http://goo.gl/LhFpo0\n");};var _22c=function(){return new _22d.PromiseInspection(this._target());};var _22e=function(msg){return _22d.reject(new _22b(msg));};var util=_227("./util.js");var _22f;if(util.isNode){_22f=function(){var ret=process.domain;if(ret===undefined){ret=null;}return ret;};}else{_22f=function(){return null;};}util.notEnumerableProp(_22d,"_getDomain",_22f);var _230=_227("./async.js");var _231=_227("./errors.js");var _22b=_22d.TypeError=_231.TypeError;_22d.RangeError=_231.RangeError;_22d.CancellationError=_231.CancellationError;_22d.TimeoutError=_231.TimeoutError;_22d.OperationalError=_231.OperationalError;_22d.RejectionError=_231.OperationalError;_22d.AggregateError=_231.AggregateError;var _232=function(){};var _233={};var _234={e:null};var _235=_227("./thenables.js")(_22d,_232);var _236=_227("./promise_array.js")(_22d,_232,_235,_22e);var _237=_227("./captured_trace.js")();var _238=_227("./debuggability.js")(_22d,_237);var _239=_227("./context.js")(_22d,_237,_238);var _23a=_227("./catch_filter.js")(_234);var _23b=_227("./promise_resolver.js");var _23c=_23b._nodebackForPromise;var _23d=util.errorObj;var _23e=util.tryCatch;function _22d(_23f){if(typeof _23f!=="function"){throw new _22b("the promise constructor requires a resolver function\n\n    See http://goo.gl/EC22Yn\n");}if(this.constructor!==_22d){throw new _22b("the promise constructor cannot be invoked directly\n\n    See http://goo.gl/KsIlge\n");}this._bitField=0;this._fulfillmentHandler0=undefined;this._rejectionHandler0=undefined;this._progressHandler0=undefined;this._promise0=undefined;this._receiver0=undefined;this._settledValue=undefined;if(_23f!==_232){this._resolveFromResolver(_23f);}};_22d.prototype.toString=function(){return "[object Promise]";};_22d.prototype.caught=_22d.prototype["catch"]=function(fn){var len=arguments.length;if(len>1){var _240=new Array(len-1),j=0,i;for(i=0;i<len-1;++i){var item=arguments[i];if(typeof item==="function"){_240[j++]=item;}else{return _22d.reject(new _22b("Catch filter must inherit from Error or be a simple predicate function\n\n    See http://goo.gl/o84o68\n"));}}_240.length=j;fn=arguments[i];var _241=new _23a(_240,fn,this);return this._then(undefined,_241.doFilter,undefined,_241,undefined);}return this._then(undefined,fn,undefined,undefined,undefined);};_22d.prototype.reflect=function(){return this._then(_22c,_22c,undefined,this,undefined);};_22d.prototype.then=function(_242,_243,_244){if(_238()&&arguments.length>0&&typeof _242!=="function"&&typeof _243!=="function"){var msg=".then() only accepts functions but was passed: "+util.classString(_242);if(arguments.length>1){msg+=", "+util.classString(_243);}this._warn(msg);}return this._then(_242,_243,_244,undefined,undefined);};_22d.prototype.done=function(_245,_246,_247){var _248=this._then(_245,_246,_247,undefined,undefined);_248._setIsFinal();};_22d.prototype.spread=function(_249,_24a){return this.all()._then(_249,_24a,undefined,_233,undefined);};_22d.prototype.isCancellable=function(){return !this.isResolved()&&this._cancellable();};_22d.prototype.toJSON=function(){var ret={isFulfilled:false,isRejected:false,fulfillmentValue:undefined,rejectionReason:undefined};if(this.isFulfilled()){ret.fulfillmentValue=this.value();ret.isFulfilled=true;}else{if(this.isRejected()){ret.rejectionReason=this.reason();ret.isRejected=true;}}return ret;};_22d.prototype.all=function(){return new _236(this).promise();};_22d.prototype.error=function(fn){return this.caught(util.originatesFromRejection,fn);};_22d.is=function(val){return val instanceof _22d;};_22d.fromNode=function(fn){var ret=new _22d(_232);var _24b=_23e(fn)(_23c(ret));if(_24b===_23d){ret._rejectCallback(_24b.e,true,true);}return ret;};_22d.all=function(_24c){return new _236(_24c).promise();};_22d.defer=_22d.pending=function(){var _24d=new _22d(_232);return new _23b(_24d);};_22d.cast=function(obj){var ret=_235(obj);if(!(ret instanceof _22d)){var val=ret;ret=new _22d(_232);ret._fulfillUnchecked(val);}return ret;};_22d.resolve=_22d.fulfilled=_22d.cast;_22d.reject=_22d.rejected=function(_24e){var ret=new _22d(_232);ret._captureStackTrace();ret._rejectCallback(_24e,true);return ret;};_22d.setScheduler=function(fn){if(typeof fn!=="function"){throw new _22b("fn must be a function\n\n    See http://goo.gl/916lJJ\n");}var prev=_230._schedule;_230._schedule=fn;return prev;};_22d.prototype._then=function(_24f,_250,_251,_252,_253){var _254=_253!==undefined;var ret=_254?_253:new _22d(_232);if(!_254){ret._propagateFrom(this,4|1);ret._captureStackTrace();}var _255=this._target();if(_255!==this){if(_252===undefined){_252=this._boundTo;}if(!_254){ret._setIsMigrated();}}var _256=_255._addCallbacks(_24f,_250,_251,ret,_252,_22f());if(_255._isResolved()&&!_255._isSettlePromisesQueued()){_230.invoke(_255._settlePromiseAtPostResolution,_255,_256);}return ret;};_22d.prototype._settlePromiseAtPostResolution=function(_257){if(this._isRejectionUnhandled()){this._unsetRejectionIsUnhandled();}this._settlePromiseAt(_257);};_22d.prototype._length=function(){return this._bitField&131071;};_22d.prototype._isFollowingOrFulfilledOrRejected=function(){return (this._bitField&939524096)>0;};_22d.prototype._isFollowing=function(){return (this._bitField&536870912)===536870912;};_22d.prototype._setLength=function(len){this._bitField=(this._bitField&-131072)|(len&131071);};_22d.prototype._setFulfilled=function(){this._bitField=this._bitField|268435456;};_22d.prototype._setRejected=function(){this._bitField=this._bitField|134217728;};_22d.prototype._setFollowing=function(){this._bitField=this._bitField|536870912;};_22d.prototype._setIsFinal=function(){this._bitField=this._bitField|33554432;};_22d.prototype._isFinal=function(){return (this._bitField&33554432)>0;};_22d.prototype._cancellable=function(){return (this._bitField&67108864)>0;};_22d.prototype._setCancellable=function(){this._bitField=this._bitField|67108864;};_22d.prototype._unsetCancellable=function(){this._bitField=this._bitField&(~67108864);};_22d.prototype._setIsMigrated=function(){this._bitField=this._bitField|4194304;};_22d.prototype._unsetIsMigrated=function(){this._bitField=this._bitField&(~4194304);};_22d.prototype._isMigrated=function(){return (this._bitField&4194304)>0;};_22d.prototype._receiverAt=function(_258){var ret=_258===0?this._receiver0:this[_258*5-5+4];if(ret===undefined&&this._isBound()){return this._boundValue();}return ret;};_22d.prototype._promiseAt=function(_259){return _259===0?this._promise0:this[_259*5-5+3];};_22d.prototype._fulfillmentHandlerAt=function(_25a){return _25a===0?this._fulfillmentHandler0:this[_25a*5-5+0];};_22d.prototype._rejectionHandlerAt=function(_25b){return _25b===0?this._rejectionHandler0:this[_25b*5-5+1];};_22d.prototype._boundValue=function(){var ret=this._boundTo;if(ret!==undefined){if(ret instanceof _22d){if(ret.isFulfilled()){return ret.value();}else{return undefined;}}}return ret;};_22d.prototype._migrateCallbacks=function(_25c,_25d){var _25e=_25c._fulfillmentHandlerAt(_25d);var _25f=_25c._rejectionHandlerAt(_25d);var _260=_25c._progressHandlerAt(_25d);var _261=_25c._promiseAt(_25d);var _262=_25c._receiverAt(_25d);if(_261 instanceof _22d){_261._setIsMigrated();}this._addCallbacks(_25e,_25f,_260,_261,_262,null);};_22d.prototype._addCallbacks=function(_263,_264,_265,_266,_267,_268){var _269=this._length();if(_269>=131071-5){_269=0;this._setLength(0);}if(_269===0){this._promise0=_266;if(_267!==undefined){this._receiver0=_267;}if(typeof _263==="function"&&!this._isCarryingStackTrace()){this._fulfillmentHandler0=_268===null?_263:_268.bind(_263);}if(typeof _264==="function"){this._rejectionHandler0=_268===null?_264:_268.bind(_264);}if(typeof _265==="function"){this._progressHandler0=_268===null?_265:_268.bind(_265);}}else{var base=_269*5-5;this[base+3]=_266;this[base+4]=_267;if(typeof _263==="function"){this[base+0]=_268===null?_263:_268.bind(_263);}if(typeof _264==="function"){this[base+1]=_268===null?_264:_268.bind(_264);}if(typeof _265==="function"){this[base+2]=_268===null?_265:_268.bind(_265);}}this._setLength(_269+1);return _269;};_22d.prototype._setProxyHandlers=function(_26a,_26b){var _26c=this._length();if(_26c>=131071-5){_26c=0;this._setLength(0);}if(_26c===0){this._promise0=_26b;this._receiver0=_26a;}else{var base=_26c*5-5;this[base+3]=_26b;this[base+4]=_26a;}this._setLength(_26c+1);};_22d.prototype._proxyPromiseArray=function(_26d,_26e){this._setProxyHandlers(_26d,_26e);};_22d.prototype._resolveCallback=function(_26f,_270){if(this._isFollowingOrFulfilledOrRejected()){return;}if(_26f===this){return this._rejectCallback(_22a(),false,true);}var _271=_235(_26f,this);if(!(_271 instanceof _22d)){return this._fulfill(_26f);}var _272=1|(_270?4:0);this._propagateFrom(_271,_272);var _273=_271._target();if(_273._isPending()){var len=this._length();for(var i=0;i<len;++i){_273._migrateCallbacks(this,i);}this._setFollowing();this._setLength(0);this._setFollowee(_273);}else{if(_273._isFulfilled()){this._fulfillUnchecked(_273._value());}else{this._rejectUnchecked(_273._reason(),_273._getCarriedStackTrace());}}};_22d.prototype._rejectCallback=function(_274,_275,_276){if(!_276){util.markAsOriginatingFromRejection(_274);}var _277=util.ensureErrorObject(_274);var _278=_277===_274;this._attachExtraTrace(_277,_275?_278:false);this._reject(_274,_278?undefined:_277);};_22d.prototype._resolveFromResolver=function(_279){var _27a=this;this._captureStackTrace();this._pushContext();var _27b=true;var r=_23e(_279)(function(_27c){if(_27a===null){return;}_27a._resolveCallback(_27c);_27a=null;},function(_27d){if(_27a===null){return;}_27a._rejectCallback(_27d,_27b);_27a=null;});_27b=false;this._popContext();if(r!==undefined&&r===_23d&&_27a!==null){_27a._rejectCallback(r.e,true,true);_27a=null;}};_22d.prototype._settlePromiseFromHandler=function(_27e,_27f,_280,_281){if(_281._isRejected()){return;}_281._pushContext();var x;if(_27f===_233&&!this._isRejected()){x=_23e(_27e).apply(this._boundValue(),_280);}else{x=_23e(_27e).call(_27f,_280);}_281._popContext();if(x===_23d||x===_281||x===_234){var err=x===_281?_22a():x.e;_281._rejectCallback(err,false,true);}else{_281._resolveCallback(x);}};_22d.prototype._target=function(){var ret=this;while(ret._isFollowing()){ret=ret._followee();}return ret;};_22d.prototype._followee=function(){return this._rejectionHandler0;};_22d.prototype._setFollowee=function(_282){this._rejectionHandler0=_282;};_22d.prototype._cleanValues=function(){if(this._cancellable()){this._cancellationParent=undefined;}};_22d.prototype._propagateFrom=function(_283,_284){if((_284&1)>0&&_283._cancellable()){this._setCancellable();this._cancellationParent=_283;}if((_284&4)>0&&_283._isBound()){this._setBoundTo(_283._boundTo);}};_22d.prototype._fulfill=function(_285){if(this._isFollowingOrFulfilledOrRejected()){return;}this._fulfillUnchecked(_285);};_22d.prototype._reject=function(_286,_287){if(this._isFollowingOrFulfilledOrRejected()){return;}this._rejectUnchecked(_286,_287);};_22d.prototype._settlePromiseAt=function(_288){var _289=this._promiseAt(_288);var _28a=_289 instanceof _22d;if(_28a&&_289._isMigrated()){_289._unsetIsMigrated();return _230.invoke(this._settlePromiseAt,this,_288);}var _28b=this._isFulfilled()?this._fulfillmentHandlerAt(_288):this._rejectionHandlerAt(_288);var _28c=this._isCarryingStackTrace()?this._getCarriedStackTrace():undefined;var _28d=this._settledValue;var _28e=this._receiverAt(_288);this._clearCallbackDataAtIndex(_288);if(typeof _28b==="function"){if(!_28a){_28b.call(_28e,_28d,_289);}else{this._settlePromiseFromHandler(_28b,_28e,_28d,_289);}}else{if(_28e instanceof _236){if(!_28e._isResolved()){if(this._isFulfilled()){_28e._promiseFulfilled(_28d,_289);}else{_28e._promiseRejected(_28d,_289);}}}else{if(_28a){if(this._isFulfilled()){_289._fulfill(_28d);}else{_289._reject(_28d,_28c);}}}}if(_288>=4&&(_288&31)===4){_230.invokeLater(this._setLength,this,0);}};_22d.prototype._clearCallbackDataAtIndex=function(_28f){if(_28f===0){if(!this._isCarryingStackTrace()){this._fulfillmentHandler0=undefined;}this._rejectionHandler0=this._progressHandler0=this._receiver0=this._promise0=undefined;}else{var base=_28f*5-5;this[base+3]=this[base+4]=this[base+0]=this[base+1]=this[base+2]=undefined;}};_22d.prototype._isSettlePromisesQueued=function(){return (this._bitField&-1073741824)===-1073741824;};_22d.prototype._setSettlePromisesQueued=function(){this._bitField=this._bitField|-1073741824;};_22d.prototype._unsetSettlePromisesQueued=function(){this._bitField=this._bitField&(~-1073741824);};_22d.prototype._queueSettlePromises=function(){_230.settlePromises(this);this._setSettlePromisesQueued();};_22d.prototype._fulfillUnchecked=function(_290){if(_290===this){var err=_22a();this._attachExtraTrace(err);return this._rejectUnchecked(err,undefined);}this._setFulfilled();this._settledValue=_290;this._cleanValues();if(this._length()>0){this._queueSettlePromises();}};_22d.prototype._rejectUncheckedCheckError=function(_291){var _292=util.ensureErrorObject(_291);this._rejectUnchecked(_291,_292===_291?undefined:_292);};_22d.prototype._rejectUnchecked=function(_293,_294){if(_293===this){var err=_22a();this._attachExtraTrace(err);return this._rejectUnchecked(err);}this._setRejected();this._settledValue=_293;this._cleanValues();if(this._isFinal()){_230.throwLater(function(e){if("stack" in e){_230.invokeFirst(_237.unhandledRejection,undefined,e);}throw e;},_294===undefined?_293:_294);return;}if(_294!==undefined&&_294!==_293){this._setCarriedStackTrace(_294);}if(this._length()>0){this._queueSettlePromises();}else{this._ensurePossibleRejectionHandled();}};_22d.prototype._settlePromises=function(){this._unsetSettlePromisesQueued();var len=this._length();for(var i=0;i<len;i++){this._settlePromiseAt(i);}};util.notEnumerableProp(_22d,"_makeSelfResolutionError",_22a);_227("./progress.js")(_22d,_236);_227("./method.js")(_22d,_232,_235,_22e);_227("./bind.js")(_22d,_232,_235);_227("./finally.js")(_22d,_234,_235);_227("./direct_resolve.js")(_22d);_227("./synchronous_inspection.js")(_22d);_227("./join.js")(_22d,_236,_235,_232);_22d.Promise=_22d;_227("./map.js")(_22d,_236,_22e,_235,_232);_227("./cancel.js")(_22d);_227("./using.js")(_22d,_22e,_235,_239);_227("./generators.js")(_22d,_22e,_232,_235);_227("./nodeify.js")(_22d);_227("./call_get.js")(_22d);_227("./props.js")(_22d,_236,_235,_22e);_227("./race.js")(_22d,_232,_235,_22e);_227("./reduce.js")(_22d,_236,_22e,_235,_232);_227("./settle.js")(_22d,_236);_227("./some.js")(_22d,_236,_22e);_227("./promisify.js")(_22d,_232);_227("./any.js")(_22d);_227("./each.js")(_22d,_232);_227("./timers.js")(_22d,_232);_227("./filter.js")(_22d,_232);util.toFastProperties(_22d);util.toFastProperties(_22d.prototype);function _295(_296){var p=new _22d(_232);p._fulfillmentHandler0=_296;p._rejectionHandler0=_296;p._progressHandler0=_296;p._promise0=_296;p._receiver0=_296;p._settledValue=_296;};_295({a:1});_295({b:2});_295({c:3});_295(1);_295(function(){});_295(undefined);_295(false);_295(new _22d(_232));_237.setBounds(_230.firstLineError,util.lastLineError);return _22d;};},{"./any.js":1,"./async.js":2,"./bind.js":3,"./call_get.js":5,"./cancel.js":6,"./captured_trace.js":7,"./catch_filter.js":8,"./context.js":9,"./debuggability.js":10,"./direct_resolve.js":11,"./each.js":12,"./errors.js":13,"./filter.js":15,"./finally.js":16,"./generators.js":17,"./join.js":18,"./map.js":19,"./method.js":20,"./nodeify.js":21,"./progress.js":22,"./promise_array.js":24,"./promise_resolver.js":25,"./promisify.js":26,"./props.js":27,"./race.js":29,"./reduce.js":30,"./settle.js":32,"./some.js":33,"./synchronous_inspection.js":34,"./thenables.js":35,"./timers.js":36,"./using.js":37,"./util.js":38}],24:[function(_297,_298,_299){"use strict";_298.exports=function(_29a,_29b,_29c,_29d){var util=_297("./util.js");var _29e=util.isArray;function _29f(val){switch(val){case -2:return [];case -3:return {};}};function _2a0(_2a1){var _2a2=this._promise=new _29a(_29b);var _2a3;if(_2a1 instanceof _29a){_2a3=_2a1;_2a2._propagateFrom(_2a3,1|4);}this._values=_2a1;this._length=0;this._totalResolved=0;this._init(undefined,-2);};_2a0.prototype.length=function(){return this._length;};_2a0.prototype.promise=function(){return this._promise;};_2a0.prototype._init=function init(_2a4,_2a5){var _2a6=_29c(this._values,this._promise);if(_2a6 instanceof _29a){_2a6=_2a6._target();this._values=_2a6;if(_2a6._isFulfilled()){_2a6=_2a6._value();if(!_29e(_2a6)){var err=new _29a.TypeError("expecting an array, a promise or a thenable\n\n    See http://goo.gl/s8MMhc\n");this.__hardReject__(err);return;}}else{if(_2a6._isPending()){_2a6._then(init,this._reject,undefined,this,_2a5);return;}else{this._reject(_2a6._reason());return;}}}else{if(!_29e(_2a6)){this._promise._reject(_29d("expecting an array, a promise or a thenable\n\n    See http://goo.gl/s8MMhc\n")._reason());return;}}if(_2a6.length===0){if(_2a5===-5){this._resolveEmptyArray();}else{this._resolve(_29f(_2a5));}return;}var len=this.getActualLength(_2a6.length);this._length=len;this._values=this.shouldCopyValues()?new Array(len):this._values;var _2a7=this._promise;for(var i=0;i<len;++i){var _2a8=this._isResolved();var _2a9=_29c(_2a6[i],_2a7);if(_2a9 instanceof _29a){_2a9=_2a9._target();if(_2a8){_2a9._ignoreRejections();}else{if(_2a9._isPending()){_2a9._proxyPromiseArray(this,i);}else{if(_2a9._isFulfilled()){this._promiseFulfilled(_2a9._value(),i);}else{this._promiseRejected(_2a9._reason(),i);}}}}else{if(!_2a8){this._promiseFulfilled(_2a9,i);}}}};_2a0.prototype._isResolved=function(){return this._values===null;};_2a0.prototype._resolve=function(_2aa){this._values=null;this._promise._fulfill(_2aa);};_2a0.prototype.__hardReject__=_2a0.prototype._reject=function(_2ab){this._values=null;this._promise._rejectCallback(_2ab,false,true);};_2a0.prototype._promiseProgressed=function(_2ac,_2ad){this._promise._progress({index:_2ad,value:_2ac});};_2a0.prototype._promiseFulfilled=function(_2ae,_2af){this._values[_2af]=_2ae;var _2b0=++this._totalResolved;if(_2b0>=this._length){this._resolve(this._values);}};_2a0.prototype._promiseRejected=function(_2b1,_2b2){this._totalResolved++;this._reject(_2b1);};_2a0.prototype.shouldCopyValues=function(){return true;};_2a0.prototype.getActualLength=function(len){return len;};return _2a0;};},{"./util.js":38}],25:[function(_2b3,_2b4,_2b5){"use strict";var util=_2b3("./util.js");var _2b6=util.maybeWrapAsError;var _2b7=_2b3("./errors.js");var _2b8=_2b7.TimeoutError;var _2b9=_2b7.OperationalError;var _2ba=util.haveGetters;var es5=_2b3("./es5.js");function _2bb(obj){return obj instanceof Error&&es5.getPrototypeOf(obj)===Error.prototype;};var _2bc=/^(?:name|message|stack|cause)$/;function _2bd(obj){var ret;if(_2bb(obj)){ret=new _2b9(obj);ret.name=obj.name;ret.message=obj.message;ret.stack=obj.stack;var keys=es5.keys(obj);for(var i=0;i<keys.length;++i){var key=keys[i];if(!_2bc.test(key)){ret[key]=obj[key];}}return ret;}util.markAsOriginatingFromRejection(obj);return obj;};function _2be(_2bf){return function(err,_2c0){if(_2bf===null){return;}if(err){var _2c1=_2bd(_2b6(err));_2bf._attachExtraTrace(_2c1);_2bf._reject(_2c1);}else{if(arguments.length>2){var _2c2=arguments.length;var args=new Array(_2c2-1);for(var $_i=1;$_i<_2c2;++$_i){args[$_i-1]=arguments[$_i];}_2bf._fulfill(args);}else{_2bf._fulfill(_2c0);}}_2bf=null;};};var _2c3;if(!_2ba){_2c3=function(_2c4){this.promise=_2c4;this.asCallback=_2be(_2c4);this.callback=this.asCallback;};}else{_2c3=function(_2c5){this.promise=_2c5;};}if(_2ba){var prop={get:function(){return _2be(this.promise);}};es5.defineProperty(_2c3.prototype,"asCallback",prop);es5.defineProperty(_2c3.prototype,"callback",prop);}_2c3._nodebackForPromise=_2be;_2c3.prototype.toString=function(){return "[object PromiseResolver]";};_2c3.prototype.resolve=_2c3.prototype.fulfill=function(_2c6){if(!(this instanceof _2c3)){throw new TypeError("Illegal invocation, resolver resolve/reject must be called within a resolver context. Consider using the promise constructor instead.\n\n    See http://goo.gl/sdkXL9\n");}this.promise._resolveCallback(_2c6);};_2c3.prototype.reject=function(_2c7){if(!(this instanceof _2c3)){throw new TypeError("Illegal invocation, resolver resolve/reject must be called within a resolver context. Consider using the promise constructor instead.\n\n    See http://goo.gl/sdkXL9\n");}this.promise._rejectCallback(_2c7);};_2c3.prototype.progress=function(_2c8){if(!(this instanceof _2c3)){throw new TypeError("Illegal invocation, resolver resolve/reject must be called within a resolver context. Consider using the promise constructor instead.\n\n    See http://goo.gl/sdkXL9\n");}this.promise._progress(_2c8);};_2c3.prototype.cancel=function(err){this.promise.cancel(err);};_2c3.prototype.timeout=function(){this.reject(new _2b8("timeout"));};_2c3.prototype.isResolved=function(){return this.promise.isResolved();};_2c3.prototype.toJSON=function(){return this.promise.toJSON();};_2b4.exports=_2c3;},{"./errors.js":13,"./es5.js":14,"./util.js":38}],26:[function(_2c9,_2ca,_2cb){"use strict";_2ca.exports=function(_2cc,_2cd){var THIS={};var util=_2c9("./util.js");var _2ce=_2c9("./promise_resolver.js")._nodebackForPromise;var _2cf=util.withAppended;var _2d0=util.maybeWrapAsError;var _2d1=util.canEvaluate;var _2d2=_2c9("./errors").TypeError;var _2d3="Async";var _2d4={__isPromisified__:true};var _2d5=["arity","length","name","arguments","caller","callee","prototype","__isPromisified__"];var _2d6=new RegExp("^(?:"+_2d5.join("|")+")$");var _2d7=function(name){return util.isIdentifier(name)&&name.charAt(0)!=="_"&&name!=="constructor";};function _2d8(key){return !_2d6.test(key);};function _2d9(fn){try{return fn.__isPromisified__===true;}catch(e){return false;}};function _2da(obj,key,_2db){var val=util.getDataPropertyOrDefault(obj,key+_2db,_2d4);return val?_2d9(val):false;};function _2dc(ret,_2dd,_2de){for(var i=0;i<ret.length;i+=2){var key=ret[i];if(_2de.test(key)){var _2df=key.replace(_2de,"");for(var j=0;j<ret.length;j+=2){if(ret[j]===_2df){throw new _2d2("Cannot promisify an API that has normal methods with '%s'-suffix\n\n    See http://goo.gl/iWrZbw\n".replace("%s",_2dd));}}}}};function _2e0(obj,_2e1,_2e2,_2e3){var keys=util.inheritedDataKeys(obj);var ret=[];for(var i=0;i<keys.length;++i){var key=keys[i];var _2e4=obj[key];var _2e5=_2e3===_2d7?true:_2d7(key,_2e4,obj);if(typeof _2e4==="function"&&!_2d9(_2e4)&&!_2da(obj,key,_2e1)&&_2e3(key,_2e4,obj,_2e5)){ret.push(key,_2e4);}}_2dc(ret,_2e1,_2e2);return ret;};var _2e6=function(str){return str.replace(/([$])/,"\\$");};var _2e7;if(!true){var _2e8=function(_2e9){var ret=[_2e9];var min=Math.max(0,_2e9-1-3);for(var i=_2e9-1;i>=min;--i){ret.push(i);}for(var i=_2e9+1;i<=3;++i){ret.push(i);}return ret;};var _2ea=function(_2eb){return util.filledRange(_2eb,"_arg","");};var _2ec=function(_2ed){return util.filledRange(Math.max(_2ed,3),"_arg","");};var _2ee=function(fn){if(typeof fn.length==="number"){return Math.max(Math.min(fn.length,1023+1),0);}return 0;};_2e7=function(_2ef,_2f0,_2f1,fn){var _2f2=Math.max(0,_2ee(fn)-1);var _2f3=_2e8(_2f2);var _2f4=typeof _2ef==="string"||_2f0===THIS;function _2f5(_2f6){var args=_2ea(_2f6).join(", ");var _2f7=_2f6>0?", ":"";var ret;if(_2f4){ret="ret = callback.call(this, {{args}}, nodeback); break;\n";}else{ret=_2f0===undefined?"ret = callback({{args}}, nodeback); break;\n":"ret = callback.call(receiver, {{args}}, nodeback); break;\n";}return ret.replace("{{args}}",args).replace(", ",_2f7);};function _2f8(){var ret="";for(var i=0;i<_2f3.length;++i){ret+="case "+_2f3[i]+":"+_2f5(_2f3[i]);}ret+="                                                             \n        default:                                                             \n            var args = new Array(len + 1);                                   \n            var i = 0;                                                       \n            for (var i = 0; i < len; ++i) {                                  \n               args[i] = arguments[i];                                       \n            }                                                                \n            args[i] = nodeback;                                              \n            [CodeForCall]                                                    \n            break;                                                           \n        ".replace("[CodeForCall]",(_2f4?"ret = callback.apply(this, args);\n":"ret = callback.apply(receiver, args);\n"));return ret;};var _2f9=typeof _2ef==="string"?("this != null ? this['"+_2ef+"'] : fn"):"fn";return new Function("Promise","fn","receiver","withAppended","maybeWrapAsError","nodebackForPromise","tryCatch","errorObj","notEnumerableProp","INTERNAL","'use strict';                            \n        var ret = function (Parameters) {                                    \n            'use strict';                                                    \n            var len = arguments.length;                                      \n            var promise = new Promise(INTERNAL);                             \n            promise._captureStackTrace();                                    \n            var nodeback = nodebackForPromise(promise);                      \n            var ret;                                                         \n            var callback = tryCatch([GetFunctionCode]);                      \n            switch(len) {                                                    \n                [CodeForSwitchCase]                                          \n            }                                                                \n            if (ret === errorObj) {                                          \n                promise._rejectCallback(maybeWrapAsError(ret.e), true, true);\n            }                                                                \n            return promise;                                                  \n        };                                                                   \n        notEnumerableProp(ret, '__isPromisified__', true);                   \n        return ret;                                                          \n        ".replace("Parameters",_2ec(_2f2)).replace("[CodeForSwitchCase]",_2f8()).replace("[GetFunctionCode]",_2f9))(_2cc,fn,_2f0,_2cf,_2d0,_2ce,util.tryCatch,util.errorObj,util.notEnumerableProp,_2cd);};}function _2fa(_2fb,_2fc,_2fd,fn){var _2fe=(function(){return this;})();var _2ff=_2fb;if(typeof _2ff==="string"){_2fb=fn;}function _300(){var _301=_2fc;if(_2fc===THIS){_301=this;}var _302=new _2cc(_2cd);_302._captureStackTrace();var cb=typeof _2ff==="string"&&this!==_2fe?this[_2ff]:_2fb;var fn=_2ce(_302);try{cb.apply(_301,_2cf(arguments,fn));}catch(e){_302._rejectCallback(_2d0(e),true,true);}return _302;};util.notEnumerableProp(_300,"__isPromisified__",true);return _300;};var _303=_2d1?_2e7:_2fa;function _304(obj,_305,_306,_307){var _308=new RegExp(_2e6(_305)+"$");var _309=_2e0(obj,_305,_308,_306);for(var i=0,len=_309.length;i<len;i+=2){var key=_309[i];var fn=_309[i+1];var _30a=key+_305;obj[_30a]=_307===_303?_303(key,THIS,key,fn,_305):_307(fn,function(){return _303(key,THIS,key,fn,_305);});}util.toFastProperties(obj);return obj;};function _30b(_30c,_30d){return _303(_30c,_30d,undefined,_30c);};_2cc.promisify=function(fn,_30e){if(typeof fn!=="function"){throw new _2d2("fn must be a function\n\n    See http://goo.gl/916lJJ\n");}if(_2d9(fn)){return fn;}var ret=_30b(fn,arguments.length<2?THIS:_30e);util.copyDescriptors(fn,ret,_2d8);return ret;};_2cc.promisifyAll=function(_30f,_310){if(typeof _30f!=="function"&&typeof _30f!=="object"){throw new _2d2("the target of promisifyAll must be an object or a function\n\n    See http://goo.gl/9ITlV0\n");}_310=Object(_310);var _311=_310.suffix;if(typeof _311!=="string"){_311=_2d3;}var _312=_310.filter;if(typeof _312!=="function"){_312=_2d7;}var _313=_310.promisifier;if(typeof _313!=="function"){_313=_303;}if(!util.isIdentifier(_311)){throw new RangeError("suffix must be a valid identifier\n\n    See http://goo.gl/8FZo5V\n");}var keys=util.inheritedDataKeys(_30f);for(var i=0;i<keys.length;++i){var _314=_30f[keys[i]];if(keys[i]!=="constructor"&&util.isClass(_314)){_304(_314.prototype,_311,_312,_313);_304(_314,_311,_312,_313);}}return _304(_30f,_311,_312,_313);};};},{"./errors":13,"./promise_resolver.js":25,"./util.js":38}],27:[function(_315,_316,_317){"use strict";_316.exports=function(_318,_319,_31a,_31b){var util=_315("./util.js");var _31c=util.isObject;var es5=_315("./es5.js");function _31d(obj){var keys=es5.keys(obj);var len=keys.length;var _31e=new Array(len*2);for(var i=0;i<len;++i){var key=keys[i];_31e[i]=obj[key];_31e[i+len]=key;}this.constructor$(_31e);};util.inherits(_31d,_319);_31d.prototype._init=function(){this._init$(undefined,-3);};_31d.prototype._promiseFulfilled=function(_31f,_320){this._values[_320]=_31f;var _321=++this._totalResolved;if(_321>=this._length){var val={};var _322=this.length();for(var i=0,len=this.length();i<len;++i){val[this._values[i+_322]]=this._values[i];}this._resolve(val);}};_31d.prototype._promiseProgressed=function(_323,_324){this._promise._progress({key:this._values[_324+this.length()],value:_323});};_31d.prototype.shouldCopyValues=function(){return false;};_31d.prototype.getActualLength=function(len){return len>>1;};function _325(_326){var ret;var _327=_31a(_326);if(!_31c(_327)){return _31b("cannot await properties of a non-object\n\n    See http://goo.gl/OsFKC8\n");}else{if(_327 instanceof _318){ret=_327._then(_318.props,undefined,undefined,undefined,undefined);}else{ret=new _31d(_327).promise();}}if(_327 instanceof _318){ret._propagateFrom(_327,4);}return ret;};_318.prototype.props=function(){return _325(this);};_318.props=function(_328){return _325(_328);};};},{"./es5.js":14,"./util.js":38}],28:[function(_329,_32a,_32b){"use strict";function _32c(src,_32d,dst,_32e,len){for(var j=0;j<len;++j){dst[j+_32e]=src[j+_32d];src[j+_32d]=void 0;}};function _32f(_330){this._capacity=_330;this._length=0;this._front=0;};_32f.prototype._willBeOverCapacity=function(size){return this._capacity<size;};_32f.prototype._pushOne=function(arg){var _331=this.length();this._checkCapacity(_331+1);var i=(this._front+_331)&(this._capacity-1);this[i]=arg;this._length=_331+1;};_32f.prototype._unshiftOne=function(_332){var _333=this._capacity;this._checkCapacity(this.length()+1);var _334=this._front;var i=((((_334-1)&(_333-1))^_333)-_333);this[i]=_332;this._front=i;this._length=this.length()+1;};_32f.prototype.unshift=function(fn,_335,arg){this._unshiftOne(arg);this._unshiftOne(_335);this._unshiftOne(fn);};_32f.prototype.push=function(fn,_336,arg){var _337=this.length()+3;if(this._willBeOverCapacity(_337)){this._pushOne(fn);this._pushOne(_336);this._pushOne(arg);return;}var j=this._front+_337-3;this._checkCapacity(_337);var _338=this._capacity-1;this[(j+0)&_338]=fn;this[(j+1)&_338]=_336;this[(j+2)&_338]=arg;this._length=_337;};_32f.prototype.shift=function(){var _339=this._front,ret=this[_339];this[_339]=undefined;this._front=(_339+1)&(this._capacity-1);this._length--;return ret;};_32f.prototype.length=function(){return this._length;};_32f.prototype._checkCapacity=function(size){if(this._capacity<size){this._resizeTo(this._capacity<<1);}};_32f.prototype._resizeTo=function(_33a){var _33b=this._capacity;this._capacity=_33a;var _33c=this._front;var _33d=this._length;var _33e=(_33c+_33d)&(_33b-1);_32c(this,0,this,_33b,_33e);};_32a.exports=_32f;},{}],29:[function(_33f,_340,_341){"use strict";_340.exports=function(_342,_343,_344,_345){var _346=_33f("./util.js").isArray;var _347=function(_348){return _348.then(function(_349){return race(_349,_348);});};function race(_34a,_34b){var _34c=_344(_34a);if(_34c instanceof _342){return _347(_34c);}else{if(!_346(_34a)){return _345("expecting an array, a promise or a thenable\n\n    See http://goo.gl/s8MMhc\n");}}var ret=new _342(_343);if(_34b!==undefined){ret._propagateFrom(_34b,4|1);}var _34d=ret._fulfill;var _34e=ret._reject;for(var i=0,len=_34a.length;i<len;++i){var val=_34a[i];if(val===undefined&&!(i in _34a)){continue;}_342.cast(val)._then(_34d,_34e,undefined,ret,null);}return ret;};_342.race=function(_34f){return race(_34f,undefined);};_342.prototype.race=function(){return race(this,undefined);};};},{"./util.js":38}],30:[function(_350,_351,_352){"use strict";_351.exports=function(_353,_354,_355,_356,_357){var _358=_353._getDomain;var _359=_350("./async.js");var util=_350("./util.js");var _35a=util.tryCatch;var _35b=util.errorObj;function _35c(_35d,fn,_35e,_35f){this.constructor$(_35d);this._promise._captureStackTrace();this._preservedValues=_35f===_357?[]:null;this._zerothIsAccum=(_35e===undefined);this._gotAccum=false;this._reducingIndex=(this._zerothIsAccum?1:0);this._valuesPhase=undefined;var _360=_356(_35e,this._promise);var _361=false;var _362=_360 instanceof _353;if(_362){_360=_360._target();if(_360._isPending()){_360._proxyPromiseArray(this,-1);}else{if(_360._isFulfilled()){_35e=_360._value();this._gotAccum=true;}else{this._reject(_360._reason());_361=true;}}}if(!(_362||this._zerothIsAccum)){this._gotAccum=true;}var _363=_358();this._callback=_363===null?fn:_363.bind(fn);this._accum=_35e;if(!_361){_359.invoke(init,this,undefined);}};function init(){this._init$(undefined,-5);};util.inherits(_35c,_354);_35c.prototype._init=function(){};_35c.prototype._resolveEmptyArray=function(){if(this._gotAccum||this._zerothIsAccum){this._resolve(this._preservedValues!==null?[]:this._accum);}};_35c.prototype._promiseFulfilled=function(_364,_365){var _366=this._values;_366[_365]=_364;var _367=this.length();var _368=this._preservedValues;var _369=_368!==null;var _36a=this._gotAccum;var _36b=this._valuesPhase;var _36c;if(!_36b){_36b=this._valuesPhase=new Array(_367);for(_36c=0;_36c<_367;++_36c){_36b[_36c]=0;}}_36c=_36b[_365];if(_365===0&&this._zerothIsAccum){this._accum=_364;this._gotAccum=_36a=true;_36b[_365]=((_36c===0)?1:2);}else{if(_365===-1){this._accum=_364;this._gotAccum=_36a=true;}else{if(_36c===0){_36b[_365]=1;}else{_36b[_365]=2;this._accum=_364;}}}if(!_36a){return;}var _36d=this._callback;var _36e=this._promise._boundValue();var ret;for(var i=this._reducingIndex;i<_367;++i){_36c=_36b[i];if(_36c===2){this._reducingIndex=i+1;continue;}if(_36c!==1){return;}_364=_366[i];this._promise._pushContext();if(_369){_368.push(_364);ret=_35a(_36d).call(_36e,_364,i,_367);}else{ret=_35a(_36d).call(_36e,this._accum,_364,i,_367);}this._promise._popContext();if(ret===_35b){return this._reject(ret.e);}var _36f=_356(ret,this._promise);if(_36f instanceof _353){_36f=_36f._target();if(_36f._isPending()){_36b[i]=4;return _36f._proxyPromiseArray(this,i);}else{if(_36f._isFulfilled()){ret=_36f._value();}else{return this._reject(_36f._reason());}}}this._reducingIndex=i+1;this._accum=ret;}this._resolve(_369?_368:this._accum);};function _370(_371,fn,_372,_373){if(typeof fn!=="function"){return _355("fn must be a function\n\n    See http://goo.gl/916lJJ\n");}var _374=new _35c(_371,fn,_372,_373);return _374.promise();};_353.prototype.reduce=function(fn,_375){return _370(this,fn,_375,null);};_353.reduce=function(_376,fn,_377,_378){return _370(_376,fn,_377,_378);};};},{"./async.js":2,"./util.js":38}],31:[function(_379,_37a,_37b){"use strict";var _37c;var util=_379("./util");var _37d=function(){throw new Error("No async scheduler available\n\n    See http://goo.gl/m3OTXk\n");};if(util.isNode&&typeof MutationObserver==="undefined"){var _37e=global.setImmediate;var _37f=process.nextTick;_37c=util.isRecentNode?function(fn){_37e.call(global,fn);}:function(fn){_37f.call(process,fn);};}else{if((typeof MutationObserver!=="undefined")&&!(typeof window!=="undefined"&&window.navigator&&window.navigator.standalone)){_37c=function(fn){var div=document.createElement("div");var _380=new MutationObserver(fn);_380.observe(div,{attributes:true});return function(){div.classList.toggle("foo");};};_37c.isStatic=true;}else{if(typeof setImmediate!=="undefined"){_37c=function(fn){setImmediate(fn);};}else{if(typeof setTimeout!=="undefined"){_37c=function(fn){setTimeout(fn,0);};}else{_37c=_37d;}}}}_37a.exports=_37c;},{"./util":38}],32:[function(_381,_382,_383){"use strict";_382.exports=function(_384,_385){var _386=_384.PromiseInspection;var util=_381("./util.js");function _387(_388){this.constructor$(_388);};util.inherits(_387,_385);_387.prototype._promiseResolved=function(_389,_38a){this._values[_389]=_38a;var _38b=++this._totalResolved;if(_38b>=this._length){this._resolve(this._values);}};_387.prototype._promiseFulfilled=function(_38c,_38d){var ret=new _386();ret._bitField=268435456;ret._settledValue=_38c;this._promiseResolved(_38d,ret);};_387.prototype._promiseRejected=function(_38e,_38f){var ret=new _386();ret._bitField=134217728;ret._settledValue=_38e;this._promiseResolved(_38f,ret);};_384.settle=function(_390){return new _387(_390).promise();};_384.prototype.settle=function(){return new _387(this).promise();};};},{"./util.js":38}],33:[function(_391,_392,_393){"use strict";_392.exports=function(_394,_395,_396){var util=_391("./util.js");var _397=_391("./errors.js").RangeError;var _398=_391("./errors.js").AggregateError;var _399=util.isArray;function _39a(_39b){this.constructor$(_39b);this._howMany=0;this._unwrap=false;this._initialized=false;};util.inherits(_39a,_395);_39a.prototype._init=function(){if(!this._initialized){return;}if(this._howMany===0){this._resolve([]);return;}this._init$(undefined,-5);var _39c=_399(this._values);if(!this._isResolved()&&_39c&&this._howMany>this._canPossiblyFulfill()){this._reject(this._getRangeError(this.length()));}};_39a.prototype.init=function(){this._initialized=true;this._init();};_39a.prototype.setUnwrap=function(){this._unwrap=true;};_39a.prototype.howMany=function(){return this._howMany;};_39a.prototype.setHowMany=function(_39d){this._howMany=_39d;};_39a.prototype._promiseFulfilled=function(_39e){this._addFulfilled(_39e);if(this._fulfilled()===this.howMany()){this._values.length=this.howMany();if(this.howMany()===1&&this._unwrap){this._resolve(this._values[0]);}else{this._resolve(this._values);}}};_39a.prototype._promiseRejected=function(_39f){this._addRejected(_39f);if(this.howMany()>this._canPossiblyFulfill()){var e=new _398();for(var i=this.length();i<this._values.length;++i){e.push(this._values[i]);}this._reject(e);}};_39a.prototype._fulfilled=function(){return this._totalResolved;};_39a.prototype._rejected=function(){return this._values.length-this.length();};_39a.prototype._addRejected=function(_3a0){this._values.push(_3a0);};_39a.prototype._addFulfilled=function(_3a1){this._values[this._totalResolved++]=_3a1;};_39a.prototype._canPossiblyFulfill=function(){return this.length()-this._rejected();};_39a.prototype._getRangeError=function(_3a2){var _3a3="Input array must contain at least "+this._howMany+" items but contains only "+_3a2+" items";return new _397(_3a3);};_39a.prototype._resolveEmptyArray=function(){this._reject(this._getRangeError(0));};function some(_3a4,_3a5){if((_3a5|0)!==_3a5||_3a5<0){return _396("expecting a positive integer\n\n    See http://goo.gl/1wAmHx\n");}var ret=new _39a(_3a4);var _3a6=ret.promise();ret.setHowMany(_3a5);ret.init();return _3a6;};_394.some=function(_3a7,_3a8){return some(_3a7,_3a8);};_394.prototype.some=function(_3a9){return some(this,_3a9);};_394._SomePromiseArray=_39a;};},{"./errors.js":13,"./util.js":38}],34:[function(_3aa,_3ab,_3ac){"use strict";_3ab.exports=function(_3ad){function _3ae(_3af){if(_3af!==undefined){_3af=_3af._target();this._bitField=_3af._bitField;this._settledValue=_3af._settledValue;}else{this._bitField=0;this._settledValue=undefined;}};_3ae.prototype.value=function(){if(!this.isFulfilled()){throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\n\n    See http://goo.gl/hc1DLj\n");}return this._settledValue;};_3ae.prototype.error=_3ae.prototype.reason=function(){if(!this.isRejected()){throw new TypeError("cannot get rejection reason of a non-rejected promise\n\n    See http://goo.gl/hPuiwB\n");}return this._settledValue;};_3ae.prototype.isFulfilled=_3ad.prototype._isFulfilled=function(){return (this._bitField&268435456)>0;};_3ae.prototype.isRejected=_3ad.prototype._isRejected=function(){return (this._bitField&134217728)>0;};_3ae.prototype.isPending=_3ad.prototype._isPending=function(){return (this._bitField&402653184)===0;};_3ae.prototype.isResolved=_3ad.prototype._isResolved=function(){return (this._bitField&402653184)>0;};_3ad.prototype.isPending=function(){return this._target()._isPending();};_3ad.prototype.isRejected=function(){return this._target()._isRejected();};_3ad.prototype.isFulfilled=function(){return this._target()._isFulfilled();};_3ad.prototype.isResolved=function(){return this._target()._isResolved();};_3ad.prototype._value=function(){return this._settledValue;};_3ad.prototype._reason=function(){this._unsetRejectionIsUnhandled();return this._settledValue;};_3ad.prototype.value=function(){var _3b0=this._target();if(!_3b0.isFulfilled()){throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\n\n    See http://goo.gl/hc1DLj\n");}return _3b0._settledValue;};_3ad.prototype.reason=function(){var _3b1=this._target();if(!_3b1.isRejected()){throw new TypeError("cannot get rejection reason of a non-rejected promise\n\n    See http://goo.gl/hPuiwB\n");}_3b1._unsetRejectionIsUnhandled();return _3b1._settledValue;};_3ad.PromiseInspection=_3ae;};},{}],35:[function(_3b2,_3b3,_3b4){"use strict";_3b3.exports=function(_3b5,_3b6){var util=_3b2("./util.js");var _3b7=util.errorObj;var _3b8=util.isObject;function _3b9(obj,_3ba){if(_3b8(obj)){if(obj instanceof _3b5){return obj;}else{if(_3bb(obj)){var ret=new _3b5(_3b6);obj._then(ret._fulfillUnchecked,ret._rejectUncheckedCheckError,ret._progressUnchecked,ret,null);return ret;}}var then=util.tryCatch(_3bc)(obj);if(then===_3b7){if(_3ba){_3ba._pushContext();}var ret=_3b5.reject(then.e);if(_3ba){_3ba._popContext();}return ret;}else{if(typeof then==="function"){return _3bd(obj,then,_3ba);}}}return obj;};function _3bc(obj){return obj.then;};var _3be={}.hasOwnProperty;function _3bb(obj){return _3be.call(obj,"_promise0");};function _3bd(x,then,_3bf){var _3c0=new _3b5(_3b6);var ret=_3c0;if(_3bf){_3bf._pushContext();}_3c0._captureStackTrace();if(_3bf){_3bf._popContext();}var _3c1=true;var _3c2=util.tryCatch(then).call(x,_3c3,_3c4,_3c5);_3c1=false;if(_3c0&&_3c2===_3b7){_3c0._rejectCallback(_3c2.e,true,true);_3c0=null;}function _3c3(_3c6){if(!_3c0){return;}_3c0._resolveCallback(_3c6);_3c0=null;};function _3c4(_3c7){if(!_3c0){return;}_3c0._rejectCallback(_3c7,_3c1,true);_3c0=null;};function _3c5(_3c8){if(!_3c0){return;}if(typeof _3c0._progress==="function"){_3c0._progress(_3c8);}};return ret;};return _3b9;};},{"./util.js":38}],36:[function(_3c9,_3ca,_3cb){"use strict";_3ca.exports=function(_3cc,_3cd){var util=_3c9("./util.js");var _3ce=_3cc.TimeoutError;var _3cf=function(_3d0,_3d1){if(!_3d0.isPending()){return;}if(typeof _3d1!=="string"){_3d1="operation timed out";}var err=new _3ce(_3d1);util.markAsOriginatingFromRejection(err);_3d0._attachExtraTrace(err);_3d0._cancel(err);};var _3d2=function(_3d3){return _3d4(+this).thenReturn(_3d3);};var _3d4=_3cc.delay=function(_3d5,ms){if(ms===undefined){ms=_3d5;_3d5=undefined;var ret=new _3cc(_3cd);setTimeout(function(){ret._fulfill();},ms);return ret;}ms=+ms;return _3cc.resolve(_3d5)._then(_3d2,null,null,ms,undefined);};_3cc.prototype.delay=function(ms){return _3d4(this,ms);};function _3d6(_3d7){var _3d8=this;if(_3d8 instanceof Number){_3d8=+_3d8;}clearTimeout(_3d8);return _3d7;};function _3d9(_3da){var _3db=this;if(_3db instanceof Number){_3db=+_3db;}clearTimeout(_3db);throw _3da;};_3cc.prototype.timeout=function(ms,_3dc){ms=+ms;var ret=this.then().cancellable();ret._cancellationParent=this;var _3dd=setTimeout(function timeoutTimeout(){_3cf(ret,_3dc);},ms);return ret._then(_3d6,_3d9,undefined,_3dd,undefined);};};},{"./util.js":38}],37:[function(_3de,_3df,_3e0){"use strict";_3df.exports=function(_3e1,_3e2,_3e3,_3e4){var _3e5=_3de("./errors.js").TypeError;var _3e6=_3de("./util.js").inherits;var _3e7=_3e1.PromiseInspection;function _3e8(_3e9){var len=_3e9.length;for(var i=0;i<len;++i){var _3ea=_3e9[i];if(_3ea.isRejected()){return _3e1.reject(_3ea.error());}_3e9[i]=_3ea._settledValue;}return _3e9;};function _3eb(e){setTimeout(function(){throw e;},0);};function _3ec(_3ed){var _3ee=_3e3(_3ed);if(_3ee!==_3ed&&typeof _3ed._isDisposable==="function"&&typeof _3ed._getDisposer==="function"&&_3ed._isDisposable()){_3ee._setDisposable(_3ed._getDisposer());}return _3ee;};function _3ef(_3f0,_3f1){var i=0;var len=_3f0.length;var ret=_3e1.defer();function _3f2(){if(i>=len){return ret.resolve();}var _3f3=_3ec(_3f0[i++]);if(_3f3 instanceof _3e1&&_3f3._isDisposable()){try{_3f3=_3e3(_3f3._getDisposer().tryDispose(_3f1),_3f0.promise);}catch(e){return _3eb(e);}if(_3f3 instanceof _3e1){return _3f3._then(_3f2,_3eb,null,null,null);}}_3f2();};_3f2();return ret.promise;};function _3f4(_3f5){var _3f6=new _3e7();_3f6._settledValue=_3f5;_3f6._bitField=268435456;return _3ef(this,_3f6).thenReturn(_3f5);};function _3f7(_3f8){var _3f9=new _3e7();_3f9._settledValue=_3f8;_3f9._bitField=134217728;return _3ef(this,_3f9).thenThrow(_3f8);};function _3fa(data,_3fb,_3fc){this._data=data;this._promise=_3fb;this._context=_3fc;};_3fa.prototype.data=function(){return this._data;};_3fa.prototype.promise=function(){return this._promise;};_3fa.prototype.resource=function(){if(this.promise().isFulfilled()){return this.promise().value();}return null;};_3fa.prototype.tryDispose=function(_3fd){var _3fe=this.resource();var _3ff=this._context;if(_3ff!==undefined){_3ff._pushContext();}var ret=_3fe!==null?this.doDispose(_3fe,_3fd):null;if(_3ff!==undefined){_3ff._popContext();}this._promise._unsetDisposable();this._data=null;return ret;};_3fa.isDisposer=function(d){return (d!=null&&typeof d.resource==="function"&&typeof d.tryDispose==="function");};function _400(fn,_401,_402){this.constructor$(fn,_401,_402);};_3e6(_400,_3fa);_400.prototype.doDispose=function(_403,_404){var fn=this.data();return fn.call(_403,_403,_404);};function _405(_406){if(_3fa.isDisposer(_406)){this.resources[this.index]._setDisposable(_406);return _406.promise();}return _406;};_3e1.using=function(){var len=arguments.length;if(len<2){return _3e2("you must pass at least 2 arguments to Promise.using");}var fn=arguments[len-1];if(typeof fn!=="function"){return _3e2("fn must be a function\n\n    See http://goo.gl/916lJJ\n");}len--;var _407=new Array(len);for(var i=0;i<len;++i){var _408=arguments[i];if(_3fa.isDisposer(_408)){var _409=_408;_408=_408.promise();_408._setDisposable(_409);}else{var _40a=_3e3(_408);if(_40a instanceof _3e1){_408=_40a._then(_405,null,null,{resources:_407,index:i},undefined);}}_407[i]=_408;}var _40b=_3e1.settle(_407).then(_3e8).then(function(vals){_40b._pushContext();var ret;try{ret=fn.apply(undefined,vals);}finally{_40b._popContext();}return ret;})._then(_3f4,_3f7,undefined,_407,undefined);_407.promise=_40b;return _40b;};_3e1.prototype._setDisposable=function(_40c){this._bitField=this._bitField|262144;this._disposer=_40c;};_3e1.prototype._isDisposable=function(){return (this._bitField&262144)>0;};_3e1.prototype._getDisposer=function(){return this._disposer;};_3e1.prototype._unsetDisposable=function(){this._bitField=this._bitField&(~262144);this._disposer=undefined;};_3e1.prototype.disposer=function(fn){if(typeof fn==="function"){return new _400(fn,this,_3e4());}throw new _3e5();};};},{"./errors.js":13,"./util.js":38}],38:[function(_40d,_40e,_40f){"use strict";var es5=_40d("./es5.js");var _410=typeof navigator=="undefined";var _411=(function(){try{var o={};es5.defineProperty(o,"f",{get:function(){return 3;}});return o.f===3;}catch(e){return false;}})();var _412={e:{}};var _413;function _414(){try{var _415=_413;_413=null;return _415.apply(this,arguments);}catch(e){_412.e=e;return _412;}};function _416(fn){_413=fn;return _414;};var _417=function(_418,_419){var _41a={}.hasOwnProperty;function T(){this.constructor=_418;this.constructor$=_419;for(var _41b in _419.prototype){if(_41a.call(_419.prototype,_41b)&&_41b.charAt(_41b.length-1)!=="$"){this[_41b+"$"]=_419.prototype[_41b];}}};T.prototype=_419.prototype;_418.prototype=new T();return _418.prototype;};function _41c(val){return val==null||val===true||val===false||typeof val==="string"||typeof val==="number";};function _41d(_41e){return !_41c(_41e);};function _41f(_420){if(!_41c(_420)){return _420;}return new Error(_421(_420));};function _422(_423,_424){var len=_423.length;var ret=new Array(len+1);var i;for(i=0;i<len;++i){ret[i]=_423[i];}ret[i]=_424;return ret;};function _425(obj,key,_426){if(es5.isES5){var desc=Object.getOwnPropertyDescriptor(obj,key);if(desc!=null){return desc.get==null&&desc.set==null?desc.value:_426;}}else{return {}.hasOwnProperty.call(obj,key)?obj[key]:undefined;}};function _427(obj,name,_428){if(_41c(obj)){return obj;}var _429={value:_428,configurable:true,enumerable:false,writable:true};es5.defineProperty(obj,name,_429);return obj;};function _42a(r){throw r;};var _42b=(function(){var _42c=[Array.prototype,Object.prototype,Function.prototype];var _42d=function(val){for(var i=0;i<_42c.length;++i){if(_42c[i]===val){return true;}}return false;};if(es5.isES5){var _42e=Object.getOwnPropertyNames;return function(obj){var ret=[];var _42f=Object.create(null);while(obj!=null&&!_42d(obj)){var keys;try{keys=_42e(obj);}catch(e){return ret;}for(var i=0;i<keys.length;++i){var key=keys[i];if(_42f[key]){continue;}_42f[key]=true;var desc=Object.getOwnPropertyDescriptor(obj,key);if(desc!=null&&desc.get==null&&desc.set==null){ret.push(key);}}obj=es5.getPrototypeOf(obj);}return ret;};}else{var _430={}.hasOwnProperty;return function(obj){if(_42d(obj)){return [];}var ret=[];enumeration:for(var key in obj){if(_430.call(obj,key)){ret.push(key);}else{for(var i=0;i<_42c.length;++i){if(_430.call(_42c[i],key)){continue enumeration;}}ret.push(key);}}return ret;};}})();var _431=/this\s*\.\s*\S+\s*=/;function _432(fn){try{if(typeof fn==="function"){var keys=es5.names(fn.prototype);var _433=es5.isES5&&keys.length>1;var _434=keys.length>0&&!(keys.length===1&&keys[0]==="constructor");var _435=_431.test(fn+"")&&es5.names(fn).length>0;if(_433||_434||_435){return true;}}return false;}catch(e){return false;}};function _436(obj){function f(){};f.prototype=obj;var l=8;while(l--){new f();}return obj;eval(obj);};var _437=/^[a-z$_][a-z$_0-9]*$/i;function _438(str){return _437.test(str);};function _439(_43a,_43b,_43c){var ret=new Array(_43a);for(var i=0;i<_43a;++i){ret[i]=_43b+i+_43c;}return ret;};function _421(obj){try{return obj+"";}catch(e){return "[no string representation]";}};function _43d(e){try{_427(e,"isOperational",true);}catch(ignore){}};function _43e(e){if(e==null){return false;}return ((e instanceof Error["__BluebirdErrorTypes__"].OperationalError)||e["isOperational"]===true);};function _43f(obj){return obj instanceof Error&&es5.propertyIsWritable(obj,"stack");};var _440=(function(){if(!("stack" in new Error())){return function(_441){if(_43f(_441)){return _441;}try{throw new Error(_421(_441));}catch(err){return err;}};}else{return function(_442){if(_43f(_442)){return _442;}return new Error(_421(_442));};}})();function _443(obj){return {}.toString.call(obj);};function _444(from,to,_445){var keys=es5.names(from);for(var i=0;i<keys.length;++i){var key=keys[i];if(_445(key)){try{es5.defineProperty(to,key,es5.getDescriptor(from,key));}catch(ignore){}}}};var ret={isClass:_432,isIdentifier:_438,inheritedDataKeys:_42b,getDataPropertyOrDefault:_425,thrower:_42a,isArray:es5.isArray,haveGetters:_411,notEnumerableProp:_427,isPrimitive:_41c,isObject:_41d,canEvaluate:_410,errorObj:_412,tryCatch:_416,inherits:_417,withAppended:_422,maybeWrapAsError:_41f,toFastProperties:_436,filledRange:_439,toString:_421,canAttachTrace:_43f,ensureErrorObject:_440,originatesFromRejection:_43e,markAsOriginatingFromRejection:_43d,classString:_443,copyDescriptors:_444,hasDevTools:typeof chrome!=="undefined"&&chrome&&typeof chrome.loadTimes==="function",isNode:typeof process!=="undefined"&&_443(process).toLowerCase()==="[object process]"};ret.isRecentNode=ret.isNode&&(function(){var _446=process.versions.node.split(".").map(Number);return (_446[0]===0&&_446[1]>10)||(_446[0]>0);})();if(ret.isNode){ret.toFastProperties(process);}try{throw new Error();}catch(e){ret.lastLineError=e;}_40e.exports=ret;},{"./es5.js":14}]},{},[4])(4);});