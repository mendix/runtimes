/*
    Copyright (c) 2005-2015, Mendix bv. All rights reserved.
    See licenses.txt for third party licenses that apply.
*/

//>>built
define("webcore/datasource/_XPathSourceBase",["./_DataSource","mendix/logger","dojo/_base/declare"],function(_1,_2,_3){var _4=_3(_1,{name:"webcore.datasource.XPathSourceBase",_sorting:null,_constraints:"",_staticconstraint:"",_aggData:null,_aggregates:false,_distinct:false,constructor:function(_5){this._sorting=_5.sortparams||[];this._aggregates=_5.aggregates||false;this._attributes=_5.attributes||null;this._depth=_5.depth||0;this._staticconstraint=_5.constraint||"";this._distinct=_5.distinct||false;},setConstraints:function(c,_6){this._constraints=c;this.first();if(_6){this.refresh(_6);}},getConstraints:function(){return this._constraints;},getStaticConstraint:function(){return this._staticconstraint;},getFilterOptions:function(){var _7={sort:this._sorting};if(this._hasPaging()){_7.offset=this.getOffset();_7.limit=this.getPageSize();}if(this._attributes){_7.attributes=this._attributes;}if(this._schemaId){_7.id=this._schemaId;}if(this._depth){_7.depth=this._depth;}if(this._distinct){_7.distinct=this._distinct;}return _7;},getSortSettings:function(){return this._sorting;},setSortOptions:function(_8,_9,_a){this._offset=0;if(_8==null||_8===""){throw new Error(this.name+".setSortOptions : illegal sorton parameter!");}else{_9=(_9===""||_9==null)?"asc":_9;if(_a){this._sortFilter(_8,_9);}else{this._sorting=[[_8,_9]];}}},getAggregates:function(){return this._aggData;},getCurrentXPath:function(){return "";},_sortFilter:function(_b,_c){var _d=false;for(var i=0,e;e=this._sorting[i];++i){if(e[0]==_b){this._sorting[i]=[_b,_c];_d=true;continue;}}if(!_d){this._sorting.push([_b,_c]);}},_setAggregates:function(_e){this._aggData=_e;}});return _4;});