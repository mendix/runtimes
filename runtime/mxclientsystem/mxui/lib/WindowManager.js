
/* Copyright (c) 2005-2012, Mendix bv. All rights reserved. */

//>>built
define("mxui/lib/WindowManager",["mendix/lib/MxContext","mxui/wm/focus","mxui/widget/Window","dojo/aspect","dojo/_base/lang","dojo/_base/declare"],function(_1,_2,_3,_4,_5,_6){var _7=_6(null,{declaredClass:"mxui.lib.WindowManager",_stack:null,_shown:null,_modals:0,constructor:function(){this._shown={};},show:function(_8,_9,_a){var _b=this,_c=this._modals||_9.location==="modal",_d={mxform:_8,title:_9.title||_8.title,width:_9.width,height:_9.height,content:_8.domNode,modal:_c};if("resizable" in _9){_d.resizable=_9.resizable;}var _e=new _3(_d);this._shown[_e.id]=_e;var _f=[_4.after(_8,"resize",_5.hitch(_e,"resize")),_4.after(_8,"dispose",function(){while(_f.length){_f.pop().remove();}_b.hide(_e);})];if(_c){this._modals++;}_e._form=_8;_e._focus=_2.get();_e.focus();_8.startup(function(){_8.applyContext(_9.context||new _1(),function(){if(_c){_e.center();}else{_e.stack();}_8.onBeforeShow();_e.show();_8.onAfterShow();_a&&_a(_8);});});},hide:function(win){if(win.modal){this._modals--;}delete this._shown[win.id];var _10=win._form;_10.onBeforeHide();if(win._focus){_2.put(win._focus);}win.hide(function(){_10.onAfterHide();_10.destroy();win.destroy();});},hideAll:function(){for(var id in this._shown){this.hide(this._shown[id]);}}});return _7;});