
/* Copyright (c) 2005-2012, Mendix bv. All rights reserved. */

//>>built
define("mxui/lib/WindowManager",["dojo","dijit","dojox"],function(_1,_2,_3){_1.provide("mxui.lib.WindowManager");_1.declare("mxui.lib.WindowManager",null,{_stack:null,_shown:null,_modals:0,constructor:function(){this._shown={};},show:function(_4,_5,_6){var _7=this,_8=this._modals||_5.location==="modal",_9={mxform:_4,title:_5.title||_4.title,width:_5.width,height:_5.height,content:_4.domNode,modal:_8};if("resizable" in _5){_9.resizable=_5.resizable;}var _a=new mxui.widget.Window(_9);this._shown[_a.id]=_a;var _b=[_1.connect(_4,"resize",_a,"resize"),_1.connect(_4,"dispose",function(){while(_b.length){_1.disconnect(_b.pop());}_7.hide(_a);})];if(_8){this._modals++;}_a._form=_4;_a._focus=mxui.wm.focus.get();_a.focus();_4.startup(function(){_4.applyContext(_5.context||new mendix.lib.MxContext(),function(){if(_8){_a.center();}else{_a.stack();}_6&&_6(_4);_4.onBeforeShow();_a.show();_4.onAfterShow();});});},hide:function(_c){if(_c.modal){this._modals--;}delete this._shown[_c.id];var _d=this,_e=_c._form;_e.onBeforeHide();if(_c._focus){mxui.wm.focus.put(_c._focus);}_c.hide(function(){_e.onAfterHide();_e.destroy();_c.destroy();});},hideAll:function(){for(var id in this._shown){this.hide(this._shown[id]);}}});});