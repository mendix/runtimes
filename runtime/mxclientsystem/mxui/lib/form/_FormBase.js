/*
    Copyright (c) 2005-2015, Mendix bv. All rights reserved.
    See licenses.txt for third party licenses that apply.
*/

//>>built
define("mxui/lib/form/_FormBase",["mxui/lib/form/FormData","mxui/wm/focus","mxui/widget","mendix/lang","dojo/dom-class","dojo/_base/array","dojo/_base/lang","dojo/_base/declare","dijit/registry"],function(_1,_2,_3,_4,_5,_6,_7,_8,_9){"use strict";var _a;var _b=_8(null,{id:"",hash:"",title:"",place:"",path:"",viewState:null,_suspended:false,_listeners:null,_formData:null,_context:null,domNode:null,constructor:function(){this.hash=_4.getUniqueId();this._listeners={};this._formData=new _1();this.listen("commit",this._formData.commit.bind(this._formData));this.listen("rollback",this._formData.rollback.bind(this._formData));},postscript:function(){_2.addBox(this.domNode);_2.cyclic(this.domNode,true);},getTitle:function(){return this.title;},getContext:function(){return this._context;},reload:function(_c){_3.applyContext(_9.findWidgets(this.domNode),this._context,_c);},onNavigation:function(){},onPersistViewState:function(_d){},onResume:function(){},validate:function(_e,_f){this.publish("validate",_e,_f);},validateRemote:function(_10,_11){this._formData.validateRemote(_10,_11);},submit:function(_12,_13){this.publish("submit",_12,_13);},commit:function(_14,_15){this._suspended=true;this.publish("submit",function(){this.publish("commit",this._resumeCallback(_14),this._resumeCallback(_15));}.bind(this),this._resumeCallback(_15));},rollback:function(_16,_17){this._suspended=true;this.publish("rollback",this._resumeCallback(_16),this._resumeCallback(_17));},close:function(_18){this.publish("close",_18,null);},publish:function(_19,_1a,_1b,_1c){var _1d=this._listeners[_19];if(_1d){var _1e=[];for(var _1f in _1d){_1e.unshift(_7.partial(function(_20,_21){_20(_21,_1b,_1c);},_1d[_1f]));}_4.sequence(_1e,_1a);}else{if(_1a){_1a();}}},listen:function(_22,_23){var sid=_4.getUniqueId(),_24=this._listeners[_22]||(this._listeners[_22]={});_24[sid]=_23;return [_22,sid];},unlisten:function(_25){var sid=_25[1],msg=_25[0],_26=this._listeners[msg];if(_26){delete _26[sid];for(var i in _26){return;}delete this._listeners[msg];}},addSubmitProvider:function(_27,_28){return this._formData.addSubmitProvider(_27,_28);},getSubmitGuids:function(){return this._formData.getSubmitGuids();},isSuspended:function(){return this._suspended;},getChildren:function(_29){if(_29){return _3.getDescendantWidgets(this.domNode);}else{return _9.findWidgets(this.domNode);}},callRecursive:function(_2a,_2b){var _2c=this.getChildren(),_2d=Array.prototype.slice.call(arguments,1);for(var i=0,_2e;_2e=_2c[i];i++){if(_2e[_2a]){_2e[_2a].apply(_2e,_2d);}}},enable:function(){this.callRecursive("set","disabled",true);},disable:function(){this.callRecursive("set","disabled",false);},resize:function(_2f){var _30=this;window.clearTimeout(_a);if(_2f===true){_31();}else{_a=window.setTimeout(_31,0);}function _31(){_5.add(document.body,"mx-no-scroll");_30.onResize();setTimeout(function(){_5.remove(document.body,"mx-no-scroll");},0);};},onResize:function(){},_resumeCallback:function(_32){var _33=this;return function(){_33._suspended=false;_33.onResume();if(_32){_32.apply(null,arguments);}};}});return _b;});