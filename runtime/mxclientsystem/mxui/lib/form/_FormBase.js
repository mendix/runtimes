
/* Copyright (c) 2005-2012, Mendix bv. All rights reserved. */

//>>built
define("mxui/lib/form/_FormBase",["mxui/wm/focus","mxui/widget","mendix/lang","dojo/_base/array","dojo/_base/lang","dojo/_base/declare","dijit/registry"],function(_1,_2,_3,_4,_5,_6,_7){"use strict";var _8=_6(null,{id:"",hash:"",title:"",place:"",path:"",viewState:null,_suspended:false,_listeners:null,_context:null,domNode:null,constructor:function(){this.hash=+new Date()+"";this._listeners={};},postscript:function(){_1.addBox(this.domNode);_1.cyclic(this.domNode,true);},getTitle:function(){return this.title;},reload:function(_9){_2.applyContext(_7.findWidgets(this.domNode),this._context,_9);},dispose:function(){},onBeforeShow:function(){this.resize();},onBeforeHide:function(){},onAfterShow:function(){_1.first(this.domNode);},onAfterHide:function(){},close:function(){this.publish("close",_5.hitch(this,"dispose"));},onPersistViewState:function(_a){},onResume:function(){},validate:function(_b,_c){this.publish("validate",_b,_c);},save:function(_d,_e){this.publish("save",_d,_e);},commit:function(_f,_10){this._suspended=true;this.publish("commit",this._resumeCallback(_f),this._resumeCallback(_10));},rollback:function(_11,_12){this._suspended=true;this.publish("rollback",this._resumeCallback(_11),this._resumeCallback(_12));},publish:function(_13,_14,_15,_16){var _17=this._listeners[_13];if(_17){var _18=[];for(var _19 in _17){_18.unshift(_5.partial(function(_1a,_1b){_1a(_1b,_15,_16);},_17[_19]));}_3.sequence(_18,_14);}else{_14&&_14();}},listen:function(_1c,_1d){var sid=_3.getUniqueId(),_1e=this._listeners[_1c]||(this._listeners[_1c]={});_1e[sid]=_1d;return [_1c,sid];},unlisten:function(_1f){var sid=_1f[1],msg=_1f[0],_20=this._listeners[msg];if(_20){delete _20[sid];for(var i in _20){return;}delete this._listeners[msg];}},isSuspended:function(){return this._suspended;},hasInterface:function(_21){return _21=="close";},invokeCall:function(_22){if(_22=="close"){this.dispose();}},getChildren:function(_23){if(_23){return _4.map(this.domNode.querySelectorAll("[widgetid]"),_7.byNode);}else{return _7.findWidgets(this.domNode);}},callRecursive:function(_24,_25,_26){var _27=this.getChildren(),_28=Array.prototype.slice.call(arguments,1);for(var i=0,_29;_29=_27[i];i++){_29[_24]&&_29[_24].apply(_29,_28);}},enable:function(){this.callRecursive("set","disabled",true);},disable:function(){this.callRecursive("set","disabled",false);},_resumeCallback:function(_2a){var _2b=this;return function(){_2b._suspended=false;_2b.onResume();_2a&&_2a.apply(null,arguments);};}});return _8;});