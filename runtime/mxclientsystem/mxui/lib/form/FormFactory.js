
/* Copyright (c) 2005-2012, Mendix bv. All rights reserved. */

//>>built
define("mxui/lib/form/FormFactory",["mxui/lib/form/InlineForm","mxui/lib/pageTemplating/pageProvider","mxui/lib/pageTemplating/pageComponentComposer","mxui/widget/Window","mxui/dom","mendix/lang","dojo/on","dojo/aspect","dojo/dom-class","dojo/_base/lang"],function(_1,_2,_3,_4,_5,_6,_7,_8,_9,_a){"use strict";function _b(_c,_d,_e){_2.get(_c,function(_f){if(_f.isBasedOnLegacyLayout){var _10=_6.find(_f.components,function(_11){return _11.isMain;});_f.components=[_10];_d(_f);}else{_3.composeAllComponentsIn(_f,_d,_e);}},_e);};function _12(_13){this._windowManager=_13;};_12.prototype.openPopupForm=function(_14,_15,_16,_17,_18,_19){var _1a=this;_b(_14,function(_1b){_a.mixin(window.mx.ui.getCurrentForm().widgetTemplates,_1b.widgetTemplates);var _1c=new _1("popup",_1b,_17,_15.title),wnd=new _4({title:_1c.title,width:_15.width,height:_15.height,resizable:"resizable" in _15?_15.resizable:true,content:_1c.domNode,cssClass:_1b["class"],cssStyle:_1b.style});_8.after(_1c,"dispose",_a.hitch(wnd,"hide"));_8.after(_1c,"resize",_a.hitch(wnd,"resize"));_8.after(wnd,"onClose",_a.hitch(_1c,"close"));_8.before(wnd,"onShow",_a.hitch(_1c,"onBeforeShow"));_8.before(wnd,"onAfterShow",_a.hitch(_1c,"onAfterShow"));_8.before(wnd,"onHide",_a.hitch(_1c,"onBeforeHide"));_8.before(wnd,"destroy",function(){_1c.onAfterHide();_1c.destroy();});_1c.loadWidgets(_16,function(){_1a._windowManager.show(wnd,_15.modal);_18&&_18(_1c);});},_19);};_12.prototype.openInlineForm=function(_1d,_1e,_1f,_20,_21,_22){_b(_1d,function(_23){_a.mixin(window.mx.ui.getCurrentForm().widgetTemplates,_23.widgetTemplates);var _24=new _1("custom",_23,_20);_9.add(_24.domNode,"mx-placeholder-hidden");_1e.appendChild(_24.domNode);_8.before(_24,"destroy",function(){_24.onBeforeHide();_9.add(_24.domNode,"mx-placeholder-hidden");_24.onAfterHide();});_8.after(_24,"destroy",function(){_5.orphan(_24.domNode);});_8.after(_24,"dispose",_a.hitch(_24,"destroy"));_24.loadWidgets(_1f,function(){_24.onBeforeShow();_9.remove(_24.domNode,"mx-placeholder-hidden");_24.onAfterShow();_21&&_21(_24);});},_22);};return _12;});