/*
    Copyright (c) 2005-2015, Mendix bv. All rights reserved.
    See licenses.txt for third party licenses that apply.
*/

//>>built
define("mxui/lib/form/FormFactory",["mxui/lib/form/InlineForm","mxui/lib/pageTemplating/pageProvider","mxui/lib/pageTemplating/pageComponentComposer","mxui/widget/Window","mxui/dom","mendix/lang","dojo/on","dojo/aspect","dojo/dom-class","dojo/_base/lang"],function(_1,_2,_3,_4,_5,_6,_7,_8,_9,_a){"use strict";function _b(_c,_d,_e){_2.get(_c,function(_f){if(_f.isBasedOnLegacyLayout){var _10=_6.find(_f.components,function(_11){return _11.isMain;});_f.components=[_10];_d(_f);}else{_3.composeAllComponentsIn(_f,_d,_e);}},_e);};function _12(){};_12.prototype.openPopupForm=function(_13,_14,_15,_16,_17,_18){var _19=this;_b(_13,function(_1a){_a.mixin(window.mx.ui.getCurrentForm().widgetTemplates,_1a.widgetTemplates);var _1b=new _1("popup",_1a,_16,_14.title),wnd=new _4({title:_1b.title,width:_14.width,height:_14.height,resizable:"resizable" in _14?_14.resizable:true,content:_1b.domNode,cssClass:_1a["class"],cssStyle:_1a.style});_8.after(_1b,"dispose",_a.hitch(wnd,"hide"));_8.after(_1b,"onResize",_a.hitch(wnd,"resize"));_8.after(wnd,"onClose",_a.hitch(_1b,"close"));_8.before(wnd,"onShow",_a.hitch(_1b,"onBeforeShow"));_8.before(wnd,"onAfterShow",_a.hitch(_1b,"onAfterShow"));_8.before(wnd,"onHide",_a.hitch(_1b,"onBeforeHide"));_8.before(wnd,"destroy",function(){_1b.onAfterHide();_1b.destroy();});_1b.loadWidgets(_15,function(){wnd.show(_14.modal);_17&&_17(_1b);});},_18);};_12.prototype.openInlineForm=function(_1c,_1d,_1e,_1f,_20,_21){_b(_1c,function(_22){_a.mixin(window.mx.ui.getCurrentForm().widgetTemplates,_22.widgetTemplates);var _23=new _1("custom",_22,_1f);_9.add(_23.domNode,"mx-offscreen");_1d.appendChild(_23.domNode);_8.before(_23,"destroy",function(){_23.onBeforeHide();_9.add(_23.domNode,"mx-offscreen");_23.onAfterHide();});_8.after(_23,"destroy",function(){_5.orphan(_23.domNode);});_8.after(_23,"dispose",_a.hitch(_23,"destroy"));_23.loadWidgets(_1e,function(){_23.onBeforeShow();_9.remove(_23.domNode,"mx-offscreen");_23.onAfterShow();_20&&_20(_23);});},_21);};return _12;});