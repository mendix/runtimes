/*
    Copyright (c) 2005-2015, Mendix bv. All rights reserved.
    See licenses.txt for third party licenses that apply.
*/

//>>built
define("mxui/lib/form/FormFactory",["mxui/lib/form/InlineForm","mxui/lib/pageTemplating/pageProvider","mxui/lib/pageTemplating/pageComponentComposer","mxui/widget/Window","mxui/dom","mxui/widget","mendix/lang","dojo/on","dojo/aspect","dojo/dom-class","dojo/_base/lang"],function(_1,_2,_3,_4,_5,_6,_7,_8,_9,_a,_b){"use strict";function _c(_d,_e,_f){_2.get(_d,function(_10){_3.composeAllComponentsIn(_10,_e,_f);},_f);};function _11(_12){this._templateProvider=_12;};_11.prototype.openPopupForm=function(_13,_14,_15,_16,_17,_18){var _19=this;_c(_13,function(_1a){_19._templateProvider.add(_1a.widgetTemplates);var _1b=new _1("popup",_1a,_16,_14.title),wnd=new _4({title:_1b.title,width:_14.width,height:_14.height,resizable:"resizable" in _14?_14.resizable:true,content:_1b.domNode,cssClass:_1a["class"],cssStyle:_1a.style});_9.after(_1b,"dispose",_b.hitch(wnd,"hide"));_9.after(_1b,"onResize",_b.hitch(wnd,"resize"));_9.after(wnd,"onClose",function(){var _1c=_1a.closeButton&&_6.findWidgetByMxId(_1a.closeButton,_1b.domNode);if(_1c&&!_1c.get("disabled")){_1c.onClick();}else{_1b.rollback(function(){_1b.dispose();});}});_9.before(wnd,"onBeforeShow",function(){_1b.onBeforeShow();_1b.onNavigation();});_9.before(wnd,"onAfterShow",_b.hitch(_1b,"onAfterShow"));_9.before(wnd,"onHide",_b.hitch(_1b,"onBeforeHide"));_9.before(wnd,"destroy",function(){_1b.onAfterHide();_1b.destroy();});_1b.loadWidgets(_15,function(){wnd.show(_14.modal);if(_17){_17(_1b);}});},_18);};_11.prototype.openInlineForm=function(_1d,_1e,_1f,_20,_21,_22){var _23=this;_c(_1d,function(_24){_23._templateProvider.add(_24.widgetTemplates);var _25=new _1("custom",_24,_20);_a.add(_25.domNode,"mx-offscreen");_1e.appendChild(_25.domNode);_9.before(_25,"destroy",function(){_25.onBeforeHide();_a.add(_25.domNode,"mx-offscreen");_25.onAfterHide();});_9.after(_25,"destroy",function(){_5.orphan(_25.domNode);});_9.after(_25,"dispose",_b.hitch(_25,"destroy"));_25.loadWidgets(_1f,function(){_25.onBeforeShow();_25.onNavigation();_a.remove(_25.domNode,"mx-offscreen");_25.onAfterShow();if(_21){_21(_25);}});},_22);};return _11;});