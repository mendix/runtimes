<html>
	<head>
		<title>Mendix | 2.5</title>
		<meta http-equiv="expires" content="0" />
		<meta http-equiv="pragma" content="no-cache" />
        
		<script type="text/javascript" src="/mxclientsystem/dojo/dojo.js"
			djConfig="
				isDebug: true,
				usePlainJson: true,
				parseOnLoad : true
			">
		</script>
		<script type="text/javascript" src="mxclientsystem/dijit/dijit.js"></script>
		<script>
			dojo.require("mendix.wm.focus")

			logger = {
				debug : function(){
					console.debug.apply(console,arguments);
				},
				warn : function(){
					console.warn.apply(console,arguments);
				}
			}

			do_test = function() {
				// focus should go to the next node one
				var hider = document.getElementById("thehider");
				hider.style.display = "none";
				var one = document.getElementById("one");

				var stack = mendix.wm.focus._getStack(one);
				var current = stack.find(one);

				mendix.wm.focus.put(current.next.node);
			}

			dojo.addOnLoad(function(){

				var nodes = dojo.query('[focus-container=true]');
				console.debug('parse',nodes);
				dojo.forEach(nodes, function(node) {
					var fbox = mendix.wm.focus.addBox( node );
				});

				var do_next_node = dojo.query("#do_next_node")[0];
				if(do_next_node) {
					dojo.connect( do_next_node, 'onmousedown', function(e){
						mendix.wm.focus.next();
						dojo.stopEvent(e);
					});
				}

				var bcheck = dojo.query("#browser-check")[0];
				if (bcheck) {
					dojo.forEach(bcheck.childNodes, function(node){
						console.debug(node,node.tabIndex,node.disabled,node.readOnly);
					});
				}

			});

			dojo.require("dojo.parser");
			dojo.require("dijit.form.CurrencyTextBox");
			dojo.require("dijit.form.Slider");    

			window.doit = function(select) {
				console.debug('he');

				var index = select.selectedIndex;
				var option = select.options[index];
				var node = document.getElementById("blue_two");

				if(option.value == "show") {
					node.style.display = "block";
				} else if (option.value == "hide") {
					node.style.display = "none";
				}
			}
		</script>

		<style>
			.container {
				float:left;border:1px solid black;padding:5px;
				margin:5px;
			}

			#blue {
				border:2px solid blue;margin:3px;color:blue;
			}

			#blue input {
				color: blue
			}

			#yellow {
				color : yellow;
			}

			#green {
				border:2px solid green;margin:3px;color:green;
			}

			#green input {
				color: green;
			}

			#lolipop {
				border:2px solid red;margin:3px;color:red;
			}

			#lolipop input {
				color: red;
			}
		</style>
		<style type="text/css">			
			@import "ui/base-default.css";
		</style>
        <!--[if IE 6]>
		<style type="text/css">
            @import "ui/ie6/banner.css";
        </style>
		<![endif]-->
	</head>
	<body class="tundra">
		<div style="" focus-container="true">

			<div style="" class="container" focus-container="true">
				3. <input type="text" tabindex="3"/>	 <br/>
				2. <div tabindex="2">div	</div>
				1. <input type="text" tabindex="1"/>	 <br/>
				5. <input type="text" tabindex="5"/>	 <br/>
				4. <input type="text" tabindex="4"/>	 <br/>
				0. <input type="text">
			</div>

			<div style="" class="container" id="blue" focus-container="true" focusCycle="false">

				<input id="5" type="text" tabindex="5"/ value="5">	 <br/>

				<div style="" tabindex="7" focus-container="true">
					7. HAHAHA !!!
				</div>

				<div id="green" style="" navigate="up-down" tabindex="7" focus-container="true" >
					<span style="color:blue">7.</span>
					asaddas

					<div style="" tabindex="0">
						some node
					</div>
					
					<div id="lolipop" navigate="left-right"  tabindex="0" style="" focus-container="true">
						<span style="color:green">4;</span>
						<input type="text" value="2" tabindex="2" id="three"/>

						<span>
							<span id="thehider">
								<span>
									<input type="text" value="1" tabindex="1" id="one" readonly=""/>
								</span>
							</span>
						</span>


						<input type="text" value="0" id="two"/>
					</div>

					<div style="" tabindex="0">
						some other node
					</div>
				</div>

				<input id="blue_three" type="text" tabindex="3" value="3"/>	 <br/>

				<input id="blue_two" type="text" tabindex="2" value="2 disabled" disabled/>	 <br/>

				<select id="4" type="text" tabindex="2" value="-1"  onchange="doit(this)">
					<option value="show">show</option>
					<option value="hide">hide</option>
				</select>	 <br/>

				<input id="1" type="text" tabindex="1" value="1"/>	 <br/>
				<input id="blue_four" type="text" tabindex="4" value=" (readonly) 4" readonly=""/>	 <br/>

			</div>

			<div class="container" focus-position="3" focus-container="true">
				<input type="text" focus-position="3"/>	 <br/>
				<input type="text" focus-position="4"/>	 <br/>
				 <input type="text" disabled name="income1" value="54775.53"
						dojoType="dijit.form.CurrencyTextBox"
						required="true"
						constraints="{fractional:true}"
						currency="USD"
						invalidMessage="Invalid amount.  Include dollar sign, commas, and cents." />
						<br/>
				<input type="text" disabled focus-position="5"/>	 <br/>
				<div disabled dojoType="dijit.form.VerticalSlider" name="vertical1"
					value="10"
					maximum="100"
					minimum="0"
					discreteValues="11"
					style="height:300px;"
					id="slider2">
					<ol dojoType="dijit.form.VerticalRuleLabels" container="leftDecoration" style="width:2em;color:gray;" labelStyle="right:0px;">
						<li>0</li>
						<li>100</li>
					</ol>
					<div dojoType="dijit.form.VerticalRule" container="leftDecoration" count=11 style="width:5px;" ruleStyle="border-color:gray;"></div>
					<div dojoType="dijit.form.VerticalRule" container="rightDecoration" count=11 style="width:5px;" ruleStyle="border-color:gray;"></div>
					<ol dojoType="dijit.form.VerticalRuleLabels" container="rightDecoration" style="width:2em;color:gray;" count="6" numericMargin="1" maximum="100" constraints={pattern:'#'}></ol>
				</div>
				<input type="text" focus-position="1"/>	 <br/>
			</div>
		</div>
		<div style="clear:left;"></div>
		<button id="do_next_node">next</button>

		<div style="clear:both" id="browser-check">
			<input type="text" readonly="true"/>	<br/>
			<input type="text" disabled="true" value="didsabled"/>	<br/>
			<div id="plus" readonly="true">plus</div>
			<input type="text" aria-disabled="true" value="aria"/>
		</div>

		<button onclick="do_test()">testing hidden stuff focuser</button>


		<div focus-container="true" id="up-down" style="border:1px solid gray;margin:5px;">
			<input type="text" tabIndex="0"/>	

			<div focusIndex="0" id="left-right" focus-container="true">
				<div tabIndex="0">One</div>	
				<div tabIndex="0">Two</div>	
			</div>

			<input type="text" tabIndex="0"/>	
		</div>
	</body>
</html>
