
/* Copyright (c) 2005-2012, Mendix bv. All rights reserved. */

//>>built
define("mxui/widget",["mxui/widget/_MasterTooltip","mxui/widget/_Button","mxui/widget/_WidgetBase","mxui/widget/_Widget","mxui/html/parser","mxui/dom","mendix/lang","mendix/logger","dijit/_Widget","dijit/registry","dojo/_base/kernel","dojo/_base/array","dojo/_base/lang","dojo/_base/declare","exports"],function(_1,_2,_3,_4,_5,_6,_7,_8,_9,_a,_b,_c,_d,_e,_f){_f.getDisableables=function(_10){var _11=[];var run=function(_12){var _13=_12.childNodes;for(var i=0,_14;_14=_13[i];i++){if(_14.nodeType!=1){continue;}var id=_14.getAttribute("widgetId"),_15=_a.byId(id);if(_15&&!(/^dijit/.test(id)||_15._btn_||_15 instanceof _2)){_11.push(_15);}if(!(_15 instanceof _3)){run(_14);}}};run(_10);return _11;};_f.findNonPlaceholderParent=function(_16){var pn=_16.parentNode;while(pn&&pn.hasAttribute("data-mx-placeholder")){pn=pn.parentNode;}return pn;};_f.resizeChildrenIn=function(_17){var _18=_a.findWidgets(_17),_19=_18[0];if(_18.length!==1){return;}if(_f.findNonPlaceholderParent(_19.domNode)===_17){if(typeof _19.resize==="function"){_17.style.height="100%";_19.resize({w:_17.offsetWidth,h:_17.offsetHeight});_17.style.height="";}}};_f.fireOnReady=function(_1a,_1b){var _1c=[];dojo.forEach(_1a,function(w){if(w.addOnLoad){_1c.push(function(h){w.addOnLoad(h);});}});if(_1b){_1c.push(function(){_1b();});}_7.sequence(_1c);};_f.destroyChildren=function(_1d){var _1e=_a.findWidgets(_1d);_c.forEach(_1e,function(_1f){try{_1f.destroyRecursive();}catch(e){_8.error(_1f.id+".destroy: Unable to destroy:"+e.message);}});};function _20(_21,_22,_23){var _24=[],i=_21.length;while(i--){var _25=_21[i].prototype,fnc=_25[_23];fnc&&_24.push(fnc);}return _24.length?function(){var _26=null;for(var i=0,_27;_27=_24[i];i++){try{_27.call(this);}catch(e){var _28=_27.ctor&&_27.ctor.prototype,_29=(_28&&_28.declaredClass)||"some";_8.error(this.id+"."+_22+": Can not execute "+_23+" function of "+_29+" addon :"+e.message);}}}:function(){};};function _2a(_2b,_2c,_2d){var _2e=function(_2f){if(this instanceof arguments.callee){var _30=(_2f&&_2f.callee==arguments.callee)?_2f:arguments;try{_2b&&_2b.apply(this,_30);}catch(e){var _31=typeof e=="string"?e:e.message;_8.error(this.id+".Unable to render widget. ERROR: "+_31);this.loaded();this._broken=true;this._brokenError=_31;var _32=this.domNode&&this.domNode.parentNode,_33=_6.div({refWidgetId:this.id,style:"color:red"},"Unable to render "+this.id+" widget: "+_31);if(_32){_32.removeChild(this.domNode);_32.appendChild(_33);}else{var _34=(arguments.length==2&&arguments[1].nodeName)?arguments[1]:null;if(_34&&_34.parentNode){_34.parentNode.appendChild(_33);}}}}else{if(_2c){var _35=(arguments.callee.caller)?"from scope "+arguments.callee.caller.toString():"from unknown scope";}return new arguments.callee(arguments);}};if(_2b){for(var x in _2b){_2e[x]=_2b[x];}_2e.prototype=_2b.prototype;_2e.prototype.constructor=_2e;}return _2e;};function _36(_37){var _38=[];for(var i=0,l=_37.length;i<l;i++){var _39=_37[i],_3a=(typeof _39=="string")?_d.getObject(_39):_39;if(_3a==null||typeof (_3a)=="object"){throw new Error("mxui.widget.declare: Mixin '"+_39.toString()+"' is not loaded! Maybe it's broken???");}_38.push(_3a);}return _38;};function _3b(_3c,_3d,_3e){var _3f=function(_40){var _41=_40.inputargs,_42=false;if(_41 instanceof Array){var _43={};for(var i=0,l=_41.length;i<l;i++){if(typeof _41[i]=="object"){for(var x in _41[i]){_43[x]=_41[i][x];break;}_42=true;}else{_43[_41[i]]="";}}if(_42){}_41=_43;}if(_41){var _44=_3c.__inputargs?_3c.__inputargs:(_3c.__inputargs={});for(var i in _41){_44[i]=_3c[i]=_41[i];}}};for(var i=0,l=_3d.length;i<l;i++){var _45=_3d[i].prototype;_3f(_45);}_3f(_3c);for(var i=0,l=_3e.length;i<l;i++){var _46=_3e[i].prototype;_3f(_46);}};_f.declare=function(_47,_48){var _49=_48.superclass||_9,_4a=_48.mixins,_4b=_48.constructor,_4c=_47.split(".");if(!_4a&&_48.addons){_b.deprecated("mxui.widget.declare: addons are deprecated, use mixins instead (widget: "+_47+")","","3.1");_4a=_48.addons;}_4a=_4a||[];if(_4c.length==1){_47="mxui.widget."+_4c;_4c=_47.split(".");}var _4d=_49.prototype["_mx_"]?[_49]:[_49,_4];var _4a=_36(_4a),_4e=_4d.concat(_4a),_4f=_4c.pop();_48.moduleName=_4c.join(".");_48.className=_4f;_48["initializer"]=_20(_4e,"create","initialize");_48["uninitializer"]=_20(_4e,"destroy","uninitialize");_3b(_48,_4d,_4a);var _50=_e(_47,_4e,_48);var _51=_2a(_50,true,_47);return _d.setObject(_47,_51);};_f.createCSSMap=function(_52,css){for(var i in css){css[i]=_52+"-"+css[i];}css.baseClass=_52;return css;};_f.loadWidgetsIn=function(_53,_54,_55,_56){_5.parse(_53,_54);var _57=_a.findWidgets(_53);_7.collect(_c.map(_57,function(_58){var _59=_c.map(_58.domNode.querySelectorAll("[widgetid]"),_a.byNode),_5a=_59.concat([_58]);return function(_5b){_f.fireOnReady(_5a,function(){_f.applyContext([_58],_55,_5b);});};}),_56);};_f.ready=function(_5c,_5d,_5e){var _5f=[];_c.forEach(_5c,function(_60){if(_60.addOnLoad){_5f.push(function(_61){_60.addOnLoad(_61);});}});_7.collect(_5f,_5d,_5e);};_f.applyContext=function(_62,_63,_64){_7.collect(_c.map(_62,function(_65){if(_65.applyContext){return function(cb){try{_65.applyContext(_63,cb);}catch(e){throw new Error(_65.id+".applyContext: "+e);}};}else{return function(cb){try{var _66=_a.findWidgets(_65.domNode);_f.applyContext(_66,_63,cb);}catch(e){throw new Error(_65.id+".applyContext: "+e);}};}}),_64);};var _67=null;_f.showTooltip=function(){if(!_67){_67=new _1();}_67.show.apply(_67,arguments);};_f.hideTooltip=function(_68){if(!_67){_67=new _1();}if(_68==null){_68=_67.currentNode;}_67.hide(_68);};});