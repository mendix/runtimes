/*
    Copyright (c) 2005-2015, Mendix bv. All rights reserved.
    See licenses.txt for third party licenses that apply.
*/

//>>built
define("mxui/widget",["mxui/widget/_Button","mxui/widget/_WidgetBase","mxui/widget/_Widget","mxui/html/parser","mxui/dom","mendix/lang","mendix/logger","dijit/_Widget","dijit/registry","dojo/dom-geometry","dojo/_base/kernel","dojo/_base/array","dojo/_base/lang","dojo/_base/declare","exports"],function(_1,_2,_3,_4,_5,_6,_7,_8,_9,_a,_b,_c,_d,_e,_f){_f.findWidgetByMxId=function(_10,_11){var _12=_11.querySelector("[data-mendix-id='"+_10+"']");return _12?_9.byNode(_12)||null:null;};_f.getDisableables=function(_13){var _14=[];var run=function(_15){var _16=_15.childNodes;for(var i=0,_17;_17=_16[i];i++){if(_17.nodeType!=1){continue;}var id=_17.getAttribute("widgetId"),_18=_9.byId(id);if(_18&&!(/^dijit/.test(id)||_18._btn_||_18 instanceof _1)){_14.push(_18);}if(!(_18 instanceof _2)){run(_17);}}};run(_13);return _14;};_f.findNonPlaceholderParent=function(_19){var pn=_19.parentNode;while(pn&&pn.hasAttribute("data-mx-placeholder")){pn=pn.parentNode;}return pn;};_f.resizeWidgetsIn=function(_1a,_1b){var _1c=_9.findWidgets(_1a);if(!_1b&&_1c.length==1&&_1a.children.length==1&&_1c[0].domNode.parentNode.children.length==1){var _1d=_1c[0],_1e=_f.findNonPlaceholderParent(_1d.domNode);if(_1e==_1a||_1e==_1d.mxform.domNode){var box=_a.getContentBox(_1a);var _1f=_1d.domNode.style;_1f.marginTop=_1f.marginBottom="0";_1d.resize({w:box.w,h:box.h});return;}}_c.forEach(_1c,function(_20){_20.resize();});};_f.fireOnReady=function(_21,_22){var _23=[];dojo.forEach(_21,function(w){if(w.addOnLoad){_23.push(function(h){w.addOnLoad(h);});}});_6.sequence(_23,_22);};_f.destroyWidgetsIn=function(_24){var _25=_9.findWidgets(_24),_26=_f.getDescendantWidgets(_24);_c.forEach(_25,function(_27){try{_27.destroyRecursive();}catch(e){_7.error(_27.id+".destroy: Unable to destroy:"+e.message);}});_c.forEach(_26,function(_28){if(!_28._destroyed){_7.error(_28.id+": widget not destroyed, check parent's uninitialize method");}});};function _29(_2a,_2b,_2c){var _2d=[],i=_2a.length;while(i--){var _2e=_2a[i].prototype,fnc=_2e[_2c];if(fnc){_2d.push(fnc);}}return _2d.length?function(){for(var i=0,_2f;_2f=_2d[i];i++){try{_2f.call(this);}catch(e){var _30=_2f.ctor&&_2f.ctor.prototype,_31=(_30&&_30.declaredClass)||"some";_7.error(this.id+"."+_2b+": Can not execute "+_2c+" function of "+_31+" addon :"+e.message);}}}:function(){};};function _32(_33,_34,_35){var _36=function(_37){if(this instanceof arguments.callee){var _38=(_37&&_37.callee==arguments.callee)?_37:arguments;try{if(_33){_33.apply(this,_38);}}catch(e){var _39=typeof e=="string"?e:e.message;_7.error(this.id+".Unable to render widget. ERROR: "+_39);this.loaded();this._broken=true;this._brokenError=_39;var _3a=this.domNode&&this.domNode.parentNode,_3b=_5.div({refWidgetId:this.id,style:"color:red"},"Unable to render "+this.id+" widget: "+_39);if(_3a){_3a.removeChild(this.domNode);_3a.appendChild(_3b);}else{var _3c=(arguments.length==2&&arguments[1].nodeName)?arguments[1]:null;if(_3c&&_3c.parentNode){_3c.parentNode.appendChild(_3b);}}}}else{if(_34){var _3d=(arguments.callee.caller)?"from scope "+arguments.callee.caller.toString():"from unknown scope";}return new arguments.callee(arguments);}};if(_33){for(var x in _33){_36[x]=_33[x];}_36.prototype=_33.prototype;_36.prototype.constructor=_36;}return _36;};function _3e(_3f){var _40=[];for(var i=0,l=_3f.length;i<l;i++){var _41=_3f[i],_42=(typeof _41=="string")?_d.getObject(_41):_41;if(_42==null||typeof (_42)=="object"){throw new Error("mxui/widget/declare: Mixin '"+_41.toString()+"' is not loaded! Maybe it's broken???");}_40.push(_42);}return _40;};function _43(_44,_45,_46){var _47=function(_48){var _49=_48.inputargs,_4a=false;if(_49 instanceof Array){var _4b={};for(var i=0,l=_49.length;i<l;i++){if(typeof _49[i]=="object"){for(var x in _49[i]){_4b[x]=_49[i][x];break;}_4a=true;}else{_4b[_49[i]]="";}}if(_4a){}_49=_4b;}if(_49){var _4c=_44.__inputargs?_44.__inputargs:(_44.__inputargs={});for(var j in _49){_4c[j]=_44[j]=_49[j];}}};for(var k=0,l=_45.length;k<l;k++){var _4d=_45[k].prototype;_47(_4d);}_47(_44);for(var m=0,n=_46.length;m<n;m++){var _4e=_46[m].prototype;_47(_4e);}};_f.declare=function(_4f,_50){var _51=_50.superclass||_8,_52=_50.mixins||[],_53=_4f.split(".");if(_53.length==1){_4f="mxui.widget."+_53;_53=_4f.split(".");}var _54=_51.prototype._mx_?[_51]:[_51,_3];var _55=_54.concat(_3e(_52)),_56=_53.pop();_50.moduleName=_53.join(".");_50.className=_56;_50.initializer=_29(_55,"create","initialize");_50.uninitializer=_29(_55,"destroy","uninitialize");_43(_50,_54,_52);var _57=_e(_4f,_55,_50);var _58=_32(_57,true,_4f);return _d.setObject(_4f,_58);};_f.createCSSMap=function(_59,css){for(var i in css){css[i]=_59+"-"+css[i];}css.baseClass=_59;return css;};_f.getDescendantWidgets=function(_5a){return _5a?_c.map(_5a.querySelectorAll("[widgetid]"),_9.byNode):[];};_f.loadWidgetsIn=function(_5b,_5c,_5d,_5e){_4.parse(_5b,_5c);var _5f=_9.findWidgets(_5b);_6.collect(_c.map(_5f,function(_60){var _61=_f.getDescendantWidgets(_60.domNode),_62=_61.concat([_60]);return function(_63){_f.fireOnReady(_62,function(){_f.applyContext([_60],_5d,_63);});};}),_5e);};_f.ready=function(_64,_65,_66){var _67=[];_c.forEach(_64,function(_68){if(_68.addOnLoad){_67.push(function(_69){_68.addOnLoad(_69);});}});_6.collect(_67,_65,_66);};_f.applyContext=function(_6a,_6b,_6c){_6.collect(_c.map(_6a,function(_6d){if(_6d.applyContext){return function(cb){try{_6d.applyContext(_6b,cb);}catch(e){throw new Error(_6d.id+".applyContext: "+e);}};}else{return function(cb){try{var _6e=_9.findWidgets(_6d.domNode);_f.applyContext(_6e,_6b,cb);}catch(e){throw new Error(_6d.id+".applyContext: "+e);}};}}),_6c);};});