
/* Copyright (c) 2005-2012, Mendix bv. All rights reserved. */

//>>built
define("mxui/widget/_Grid",["dojo","dijit","dojox","dojo/require!dojo/fx,mxui/lib/MxGridConfig,mxui/mixin/_OverflowHelper,mxui/mixin/_Contextable,mxui/mixin/_Pluggable,mxui/mixin/_Scriptable,mxui/mixin/_Internationalized"],function(_1,_2,_3){_1.provide("mxui.widget._Grid");_1.require("dojo.fx");_1.require("mxui.lib.MxGridConfig");_1.require("mxui.mixin._OverflowHelper");_1.require("mxui.mixin._Contextable");_1.require("mxui.mixin._Pluggable");_1.require("mxui.mixin._Scriptable");_1.require("mxui.mixin._Internationalized");mxui.widget.declare("mxui.widget._Grid",{mixins:[_2._TemplatedMixin,mxui.mixin._Contextable,mxui.mixin._Scriptable,mxui.mixin._Pluggable,mxui.mixin._OverflowHelper],baseClass:"mx-grid",css:mxui.widget.createCSSMap("mx-grid",{pagingStatus:"paging-status",searchButton:"search-button",resetButton:"reset-button"}),entity:"",schema:"",reference:"",useContext:false,reqConstraints:"",xpathConstraint:"",customDataSource:null,pagingBarNode:null,searchNode:null,toolBarNode:null,messageNode:null,searchButton:null,resetButton:null,_dataSource:null,_gridConfig:null,_gridState:null,_metaEntity:null,_toolWidgets:null,_pagingStatusNode:null,fetchMetaObject:function(){this._metaEntity=mx.meta.getEntity(this.entity);if(this._metaEntity==null){logger.error(this.id+".fetchMetaObject : This grid has been configured for an entity the current user doesn't have access to - ABORTING");this.loaded();return false;}return true;},_saveSelection:function(){this.mxform.setReturnValue("selection",this._getSelectedGuids());},setupGridConfig:function(){this._gridConfig=new mxui.lib.MxGridConfig({config:this.config,nested:this.nested});},setupGridState:function(){var _4=this._gridConfig,_5=this._gridState;_5.updateperiod=_4.gridSetting("refresh");_5.searchbar=_4.gridSetting("searchbar");_5.controlbar=_4.gridSetting("controlbar");_5.pagingbar=_4.gridSetting("pagingbar");_5.selectionmode=_4.gridSetting("selectionmode");_5.editable=_4.gridSetting("editable");_5.showemptyrows=_4.gridSetting("showemptyrows");_5.selectfirst=_4.gridSetting("selectfirst");_5.selectable=(_5.selectionmode!=="none");if(this.selectable){_5.selectable=/^(single|multi)$/.test(this.selectable);if(this.selectable!=="multi"||_5.selectionmode!=="simplemulti"){_5.selectionmode=this.selectable;}this.mxform.setReturnValue("selection",[]);}},setupDataSource:function(){var _6=this._gridConfig,_7=_6.getDataSource(),_8;if(this.customDataSource){_8=this.customDataSource;_8.setPageSize(_6.gridSetting("pageSize"));_8.setOffset(0);var _9=_6.gridSetting("sortparams");if(_9){_8.setSortOptions(_9[0][0],_9[0][1]);}}else{if(_7){var _a=this instanceof mxui.widget.DataGrid?this.schema:"";if(_7.microflow){_8=new mendix.lib.MicroflowSource({microflow:_7.microflow.name,queryid:_a,context:this.mxcontext,page:_6.gridSetting("pageSize")});}else{if(_7.entityPath){_8=new mendix.lib.EntityPathSource({path:_7.entityPath.path,queryid:_a,context:this.mxcontext,page:_6.gridSetting("pageSize")});}else{_8=new mendix.lib.XPathSource({entity:this.entity,queryid:_a,constraint:this.constraint,useContext:this.useContext,context:this.mxcontext,page:_6.gridSetting("pageSize"),sortparams:_6.gridSetting("sortparams"),aggregates:this.hasPlugin("Calculations")});}}}}this._dataSource=_8;},resizeGrid:function(){this.contentNode.scrollTop=0;},setUpdateInterval:function(){var _b=this._gridState.updateperiod;if(_b&&_b.toString()!="0"){this.clearInterval();this._gridState.update=setInterval(_1.hitch(this,"actReloadGrid"),parseInt(_b*1000,10));}},setupDevMode:function(_c){if(mx.session.inDevMode()){this.devBlock=new mxui.widget.MxDevBlock({parent:this,xpath:true,guid:false});}},shareSelected:function(){var _d=this.createContext();_d.setTrackEntity(this._metaEntity.getEntity());var _e=this._getCurrentGuid();if(_e){_d.setContext(this._metaEntity.getEntity(),_e);}else{_d.setContext(this._metaEntity.getEntity(),null);}_d.freeze();this.notifyListeners(_d);mx.ui.cleanContext(_d.ident,this);},actionSelectPage:function(_f){if(!this._gridState.invertedSelection){for(var i=0,_10=this._dataSource.getObjects(),_11;_11=_10[i];i++){this._addObjectToSelection(_11);}}this._saveSelection();this.refreshGrid();},actionSelectAllPages:function(_12){this._clearSelection();this._gridState.invertedSelection=true;this.refreshGrid();},actionClearSelection:function(_13){if(this._getSelectedGuids().length>0||this._gridState.invertedSelection){this._clearSelection();this._gridState.invertedSelection=false;this.refreshGrid();}},actionEditSelection:function(_14){var _15=this._getSelectedGuids();if(_15.length===0&&!this._gridState.invertedSelection){mx.ui.info(mx.ui.translate("mxui.widget.DataGrid","no_selection"));}else{for(var i=0,obj;obj=_15[i];i++){var _16=this._dataSource.getObject(obj),_17=_14[_16.getEntity()];if(_17){var _18=this.createContext();_18.dupFrom(this.mxcontext);_18.setObject(null,_16.getEntity(),_16.getGuid());mx.ui.execute(_17,{context:_18});}}}},actionInsertNew:function(_19){var _1a=this._getEntity(_19),_1b=_19[_1a];if(_1b&&_1a){mx.data.create({entity:_1a,context:this.useContext?this.mxcontext:null,persistent:_1b.persistent,callback:function(obj){if(!this.useContext){var _1c=this._gridConfig.getDataSource(),_1d=_1c.entityPath&&_1c.entityPath.path||this.reference,_1e=_1d.split("/"),_1f=this.mxcontext.getTrackId();if(_1e.length==2&&_1f){var _20=_1e[1];if(obj.isReference(_20)){obj.set(_20,_1f);}}}var _21=this.createContext();_21.setContext(obj);mx.ui.execute(_1b,{context:_21});},error:function(e){mx.onError(e);}},this);}},postCreate:function(){var req=this.reqConstraints,ref=this.reference;this.reqConstraints=req?req.split(","):[];if(ref){this.reqConstraints.push(ref.substr(0,ref.indexOf("/")));}var box=this.addFocusBox(this.controlNode);box.pressed({RIGHT_ARROW:box.FOCUS_NEXT,LEFT_ARROW:box.FOCUS_PREV});this.offerInterfaces(["close"]);this.initContext();},getSchemaId:function(){return this.schema;},postCreateSpecific:function(){},getSelected:function(){return this._getSelectedGuids();},deselectAll:function(){this._clearSelection();this.deselectGridRows();},registerSubscriptions:function(){this.removeSubscriptions();var _22=this.mxcontext.getTrackId();if(_22){this.subscribe({guid:this.mxcontext.getTrackId(),callback:_1.hitch(this,"objectUpdate")});}var _23=mx.meta.getEntity(this.entity);if(_23){var _24=[_23.getEntity()].concat(_23.getSubEntities()).concat(_23.getSuperEntities());for(var i=0,_25;_25=_24[i];i++){this.subscribe({entity:_25,callback:_1.hitch(this,"objectUpdate")});}}},eventActionBindingHandler:function(_26,_27){var _28=this._gridConfig.gridActionBindings(),_29=this._gridConfig.getActionsByKey(_28["on"+_27]),_2a=_29?this["action"+_29.actionCall]:null,_2b=this._getObjectFromNode(_26);if(this._gridState.invertedSelection){return;}if(_29&&_2a&&_26&&_2b){if(this._gridState.selectable){this.deselectAll();mxui.dom.clearSelection();this.selectRow(_26);}this._addObjectToSelection(_2b);_2a&&_2a.call(this,_29.params);}else{}},eventControlBarButtonClicked:function(e){var _2c=e.currentTarget,_2d=_2c.getAttribute("data-mendix-id");if(_2d){var _2e=this._gridConfig.getActionsByKey(_2d);if(_2e){if(_2e.actionCall==="ActionSelected"){_2e.actionCall="EditSelection";}else{if(_2e.actionCall==="Create"){_2e.actionCall="InsertNew";}}var _2f="action"+_2e.actionCall;if(this[_2f]){this[_2f](_2e.params);}else{logger.error(this.id+".eventControlBarButtonClicked: Called function '"+_2f+"' does not exist in this component");}}else{logger.error(this.id+".eventControlBarButtonClicked: Action with action key '"+_2d+"' is not defined");}}else{logger.error(this.id+".eventControlBarButtonClicked: No action key defined!");}},actionInvokeMicroflow:function(_30){this.triggerPluginEvent("invokeMicroflow",null,_1.hitch(this,"invokeMicroflow",_30));},invokeMicroflow:function(_31){var _32=this.entity,_33=_31[_32],_34=_33.microflow,_35={applyto:_33.applyTo};if(_33&&_32){var _36=this._gridState.invertedSelection,_37=this._getSelectedGuids(),_38=this._dataSource,_39=this.schema,_3a;switch(_33.applyTo){case "selection":if(_36){_3a=[];_38.each(function(obj){var _3b=obj.getGuid();if(_1.indexOf(_37,_3b)===-1){_3a.push(_3b);}});}else{_3a=_37;}if(_3a.length===0){mx.ui.info(mx.ui.translate("mxui.widget.DataGrid","no_selection"));return;}_35.guids=_3a;if(_3a.length===1){_35.gridid=_39;}break;case "all":_3a=_1.clone(_38.getObjects());_1.mixin(_35,{guids:_3a,applyto:"selection"});if(_3a.length===1){_35.gridid=_39;}break;case "selectionset":var _3c,_3d,_3e;if(_36){_3e=_38.getSetSize()-_37.length;_3c=_38.getCurrentXPath();}else{_3e=_37.length;_3c="//"+_32;}if(_3e===0){mx.ui.info(mx.ui.translate("mxui.widget.DataGrid","no_selection"));return;}var _3f=[];for(var i=0,id;id=_37[i];++i){var obj=_38.getObject(id);_3f.push("id"+(_36?"!=":"=")+"\""+id+"\"");}if(_3f.length===0){_3d="";}else{_3d="["+_3f.join(_36?" and ":" or ")+"]";}_1.mixin(_35,{xpath:_3c,constraints:_3d,sort:_38.getSortSettings()});if(_3e===1){_35.gridid=_39;}break;case "set":if(_38.getSetSize()===0){_35.applyto="none";}else{_1.mixin(_35,{xpath:_38.getCurrentXPath(),sort:_38.getSortSettings()});}break;}var _40=this,_41=_34.confirmation,_42=[];var _43=function(cb){mx.ui.confirmation({cancel:_41.cancel,proceed:_41.proceed,content:_41.question,handler:cb});};if(this.actTriggerOnSync){_42.push("actTriggerOnSync");}if(this.actDeferSyncAction){_42.push("actDeferSyncAction");}var run=function(_44){mx.ui.execute({microflow:_34},{params:_35,context:_40.mxcontext,store:{caller:_40},callback:_44});};if(_41){_42.push(_43);}if(_34&&_34.validate==="view"){_42.push(_1.hitch(this.mxform,"validate"));}_42.push(run);_42.push(function(_45){if(!this._destroyed&&!_33.maintainSelection){this.deselectAll();this.shareSelected();}_45();});this.sequence(_42);}},actionReturnSelection:function(_46){var _47=this,_48=this.mxform;this._saveSelection();_48.suspend();_48.validate(function(){_48.suspend();var _49=function(e){_48.resume();if(!(e instanceof mendix.lib.ValidationError)){mx.onError(e);}};_48.save(function(){_48.commit(function(){_48.dispose();},_49);},_49);});},controlNode:null,_setToolbarAttr:function(_4a){for(var i=0,btn;btn=this._toolWidgets[i++];){btn.set("disabled",_4a);}},buildControlBar:function(){if(!this._gridState.controlbar&&!this._gridState.pagingbar){this.controlNode.style.display="none";}},buildToolBar:function(){this._toolWidgets=[];if(!this._gridState.controlbar){this.toolBarNode.style.display="none";return;}var _4b=this._gridConfig.gridTools();var box=this.getFocusBox(this.controlNode);var _4c=document.createDocumentFragment();for(var i in _4b){var _4d=_4b[i];var _4e=new mxui.widget.Button({"mxid":_4d.mxid,"caption":_4d.title,"iconUrl":_4d.icon,"onClick":_1.hitch(this,"eventControlBarButtonClicked"),"cssClasses":_4d.cssClass,"cssStyle":_4d.cssStyle});this._toolWidgets.push(_4e);var _4f=_4e.domNode;try{if(_4b[i].gridFunction){_4f.setAttribute("gridFunction",_4b[i].gridFunction);_4f.setAttribute("param",_4b[i].param);if(_4b[i].background){_4f.setAttribute("background-job",_4b[i].background);}if(_4b[i].progress){_4f.setAttribute("progress",_4b[i].progress);}if(_4b[i].message){_4f.setAttribute("message",_4b[i].message);}}if(i>0){_4b[i-1]._nextNode=_4f;}_4b[i]._domNode=_4f;_4c.appendChild(_4f);_4c.appendChild(document.createTextNode(" "));box.add(_4f);_4e.startup();}catch(e){}}this.toolBarNode.appendChild(_4c);mxui.dom.disableSelection(this.toolBarNode);},buildPagingBar:function(){if(!this._gridState.pagingbar){this.pagingBarNode.style.display="none";return;}var ltr=this.isLeftToRight(),css=this.css,_50=document.createDocumentFragment(),box=this.getFocusBox(this.controlNode),$=mxui.dom.create;this.btFirst=new mxui.widget.Button({iconClass:"glyphicon "+(ltr?"glyphicon-step-backward":"glyphicon-step-forward"),"onClick":_1.hitch(this,"eventPagingFirstClicked")});_50.appendChild($("#",this.btFirst.domNode," "));box.add(this.btFirst.domNode);this.btPrevious=new mxui.widget.Button({iconClass:"glyphicon "+(ltr?"glyphicon-backward":"glyphicon-forward"),"onClick":_1.hitch(this,"eventPagingPreviousClicked")});_50.appendChild($("#",this.btPrevious.domNode," "));box.add(this.btPrevious.domNode);this._pagingStatusNode=mxui.dom.div({"class":"dijitInline "+this.css.pagingStatus});_50.appendChild($("#",this._pagingStatusNode," "));this.btNext=new mxui.widget.Button({iconClass:"glyphicon "+(ltr?"glyphicon-forward":"glyphicon-backward"),"onClick":_1.hitch(this,"eventPagingNextClicked")});_50.appendChild($("#",this.btNext.domNode," "));box.add(this.btNext.domNode);this.btLast=new mxui.widget.Button({iconClass:"glyphicon "+(ltr?"glyphicon-step-forward":"glyphicon-step-backward"),"onClick":_1.hitch(this,"eventPagingLastClicked")});_50.appendChild($("#",this.btLast.domNode," "));box.add(this.btLast.domNode);this.pagingBarNode.appendChild(_50);mxui.dom.disableSelection(this.pagingBarNode);},updatePagingStatus:function(_51){if(!this._gridState.pagingbar){return;}var _52=this._dataSource.getStatusMessage();mxui.html.setContent(this._pagingStatusNode,_52);if(this._dataSource.atBeginning()){this.btFirst.set("disabled",true);this.btPrevious.set("disabled",true);}else{this.btFirst.set("disabled",false);this.btPrevious.set("disabled",false);}if(this._dataSource.atEnd()){this.btNext.set("disabled",true);this.btLast.set("disabled",true);}else{this.btNext.set("disabled",false);this.btLast.set("disabled",false);}},eventPagingFirstClicked:function(){if(!this._dataSource.atBeginning()){this._dataSource.first(_1.hitch(this,"refreshGrid"));}},eventPagingPreviousClicked:function(){if(!this._dataSource.atBeginning()){this._dataSource.previous(_1.hitch(this,"refreshGrid"));}},eventPagingNextClicked:function(){if(!this._dataSource.atEnd()){this._dataSource.next(_1.hitch(this,"refreshGrid"));}},eventPagingLastClicked:function(){if(!this._dataSource.atEnd()){this._dataSource.last(_1.hitch(this,"refreshGrid"));}},_searchElements:null,_searchFilled:false,searchArgumentNode:null,searchControlNode:null,_searchGetConstraints:function(){var _53="";var _54=[];_1.forEach(this._searchElements,function(_55){var _56=_55.get("value");(_56!=="")&&_54.push(_56);});if(_54.length){_53="["+_54.join(" and ")+"]";}return _53+this._gridState.xpathConstraint;},buildSearchBlock:function(){var css=this.CSS,$=mxui.dom.create;if(this._gridState.isSearchBuild){return;}this._gridState.isSearchBuild=true;var _57=this.searchButton=new mxui.widget.Button({"caption":mx.ui.translate("mxui.widget.DataGrid",["search"]),"onClick":_1.hitch(this,"eventSearchActivated"),"class":this.css.searchButton});this.searchControlNode.appendChild($("#",_57.domNode," "));var _58=this.resetButton=new mxui.widget.Button({"caption":mx.ui.translate("mxui.widget.DataGrid",["reset"]),"onClick":_1.hitch(this,"eventSearchResetClicked"),"class":this.css.resetButton});this.searchControlNode.appendChild($("#",_58.domNode," "));var _59=document.createDocumentFragment();this._searchElements=_1.map(this._gridConfig.searchBarItems(),_1.hitch(this,function(_5a){var _5b=new mxui.widget.SearchInput(_1.mixin({entity:this.entity,mxcontext:this.mxcontext},_5a));this.connect(_5b,"onKeyUp","eventSearchActivated");_59.appendChild(_5b.domNode);_5b.startup();return _5b;}));this.searchArgumentNode.appendChild(_59);},buildSearchBar:function(){if(!this._gridState.searchbar){this.searchNode.style.display="none";this._searchFilled=true;return;}var _5c=this._gridConfig.searchBarConfig();if(_5c){this._gridState.searchBarVisible=!_5c.startFolded;this._gridState.searchBarTogglable=!!_5c.foldable;}else{this._gridState.searchBarVisible=true;}if(!this._gridState.searchBarVisible){var _5d=false;var _5e=this._gridConfig.searchBarItems();for(var i in _5e){var _5f=_5e[i];if(_5f.defaults){this.buildSearchBlock();_5d=true;break;}}this.searchNode.style.display="none";this._gridState.isSearchBuild=_5d;}else{this.buildSearchBlock();this.searchNode.style.display="";}this.checkSearchFields();},eventSearchActivated:function(e){var _60=this;_1.stopEvent(e);var _61=this.searchButton;var _62=_1.hitch(this,function(){this._clearSelection();this.refreshGrid();if(this.triggerOnSearchChanged){this.triggerOnSearchChanged();}_61.set("disabled",false);});var _63=false;if(e.type==="click"){this.checkSearchFields();_63=true;}else{if(e.shiftKey&&e.keyCode===13){}else{if(e.keyCode===13){this.checkSearchFields();_63=true;}}}if(!this.constraintsFilled()){_63=false;}if(_63){_61.set("disabled",true);this._dataSource.isValid(function(_64){if(_64){_60._dataSource.setConstraints(_60._searchGetConstraints(),_62);}else{_61.set("disabled",false);}});}},eventSearchResetClicked:function(e){var _65=this._dataSource;_1.forEach(this._searchElements,function(_66){_66.reset();});this.checkSearchFields();_65.setConstraints(this._searchGetConstraints());var _67=_1.hitch(this,function(){this.refreshGrid();if(this.triggerOnSearchChanged){this.triggerOnSearchChanged();}});if(this.constraintsFilled()){_65.isValid(function(_68){if(_68){_65.refresh(_67);}else{_65.clean(_67);}});}},checkSearchFields:function(){var _69=this._gridConfig.gridSetting("waitforsearch");if(!_69){this._searchFilled=true;return;}this._searchFilled=_1.some(this._searchElements,_1.hitch(this,function(_6a){if(_6a.get("value")!==""){this.messageNode.innerHTML="";this.messageNode.style.display="none";return true;}}));if(!this._searchFilled){this.messageNode.innerHTML=mx.ui.translate("mxui.widget.DataGrid","waitForSearch");this.messageNode.style.display="block";}},constraintsFilled:function(){if(!this._searchFilled){return false;}for(var i=0,_6b;_6b=this.reqConstraints[i];i++){if(!this.mxcontext.getContext(_6b)){return false;}}return true;},actionToggleSearch:function(_6c){var _6d=this;if(!this._gridState.searchBarTogglable){return;}this.buildSearchBlock();if(!(this._gridState.searchBarVisible=!this._gridState.searchBarVisible)){this._searchWipeOut=this._searchWipeOut||_1.fx.wipeOut({node:this.searchNode,duration:200,onEnd:function(){setTimeout(function(){_6d.resize(_6d._resizeBox);},0);_1.forEach(_6d._searchElements,function(_6e){_6e.cleanup();});}});this._searchWipeOut.play();}else{this._searchWipeIn=this._searchWipeIn||_1.fx.wipeIn({node:this.searchNode,duration:200,onEnd:function(){setTimeout(function(){_6d.showOverflow();_6d.resize(_6d._resizeBox);},0);try{_1.some(_6d._searchElements,function(_6f){if(!_6f.get("hidden")){_6f.focus();return true;}});}catch(e){}}});this.hideOverflow();this._searchWipeIn.play();}},applyContext:function(_70,_71){var _72=this;if(this._metaEntity==null){_71&&_71();return;}if(!this._dataSource){logger.error(this.id+".applyContext: Applying context before rendered!!!");_71&&_71();return;}this._clearSelection();this.cloneContext(_70);this.setUpdateInterval();this._gridState.xpathConstraint=this.xpathConstraint;var _73=this.mxcontext.getParam("xpathConstraint");if(_73){this._gridState.xpathConstraint+=_73;}this.removeSubscriptions();this.registerSubscriptions();if(this.reference){var _74=this.reference.split(/\//),_75=_74[0],_76=_74[1];var id=this.mxcontext.getContext(_75);if(id){var _77="["+_76+"=\""+id+"\"]";this._gridState.xpathConstraint+=_77;}else{}}if(!this._gridState.inDenial){var _78=[];if(this.constraintsFilled()){var _79=[];var _7a=function(_7b){return function(_7c){_7b.reinit(_7c);};};_1.forEach(this._searchElements,function(_7d){_79.push(_7a(_7d));});_78.push(function(cb){this.collect(_79,cb);});_78.push(function(_7e){if(this._dataSource.setConstraints){this._dataSource.setConstraints(_72._searchGetConstraints());}this._dataSource.reload(_7e);});}else{_78.push("actCleanDS");}this.sequence(_78,function(){this.refreshGrid();this.filterSelected();this.shareSelected();_71();});}else{_71&&_71();}},objectUpdateNotification:function(){var _7f=this;if(!this._gridState.inDenial&&this.constraintsFilled()){this._dataSource.isValid(function(_80){if(_80){_7f.sequence([_1.hitch(_7f._dataSource,"entityUpdate"),function(_81){_7f.refreshGrid();_81&&_81();},"filterSelected"]);}});}},actionDeleteSelection:function(_82){var _83=this._getSelectedGuids();if(this._gridState.invertedSelection){}else{if(!_83.length){mx.ui.info(mx.ui.translate("mxui.widget.DataGrid","no_selection"));}else{var _84=this;var _85=function(){var _86=_83;_84._clearSelection();_84.deselectGridRows();_84.shareSelected();mx.data.remove({guids:_86,callback:function(){mx.data.sendClassUpdate(_84.entity);},error:function(e){mx.onError(e);}});};if(_82===true){_85();}else{mx.ui.confirmation({content:mx.ui.translate("mxui.widget.DataGrid","confirm_delete",_83.length),handler:_85});}}}},resize:function(box){var _87=this.domNode,_88=this.contentNode;_1.style(_88,"height","auto");if(box){var _89=_1.marginBox(_87),_8a=_1.marginBox(_88),_8b=box.h-(_89.h-_8a.h);if(_8b>=100){_1.style(_88,"height",_8b+"px");if(this.headTable){_1.style(this.headTable,"top","0px");}}}this._resizeBox=box;},close:function(){this.disposeContent();},onHide:function(e){_1.forEach(this._searchElements,function(_8c){_8c.cleanup();});},uninitialize:function(_8d){var _8e=null;try{this.clearInterval();this.removeSubscriptions();mxui.widget.destroyChildren(this.searchControlNode);mxui.widget.destroyChildren(this.toolBarNode);mxui.widget.destroyChildren(this.pagingBarNode);if(this.itemNode){mxui.widget.destroyChildren(this.itemNode);}if(_8e){_8e.destroy();}_1.forEach(this._searchElements,function(_8f){_8f.destroy();});this.devBlock&&this.devBlock.destroyRecursive();}catch(e){logger.error(this.id+".uninitialize : error : "+e.message);}this._dataSource=null;this._gridConfig=null;this._metaEntity=null;this._searchElements=null;}});});