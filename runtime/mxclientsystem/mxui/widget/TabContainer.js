
/* Copyright (c) 2005-2012, Mendix bv. All rights reserved. */

//>>built
define("mxui/widget/TabContainer",["mxui/widget/_WidgetBase","mxui/dom","mendix/logger","dojo/on","dojo/dom-class","dojo/dom-geometry","dojo/_base/array","dojo/_base/declare"],function(_1,_2,_3,_4,_5,_6,_7,_8){var $=_2.create;var _9=_8(_1,{declaredClass:"mxui.widget.TabContainer",validator:null,_active:null,_tabList:null,_tabPanes:null,_tabContent:null,_clickHandler:null,buildRendering:function(){var _a=this._tabList=$("ul",{"class":"nav nav-tabs mx-tabcontainer-tabs"}),_b=this._tabContent=$("div",{"class":"tab-content mx-tabcontainer-content"},this.getTemplate("pages"));this.domNode=$("div",{"class":"mx-tabcontainer"},_a,_b);var _c=this;this._clickHandler=_4(_a,_4.selector("li","click"),function(e){_c.show(_c.domData(this,"tab"));e.preventDefault();});},startup:function(){var _d=this._tabList,_e=this._tabContent.childNodes,_f=null,_10=this._tabPanes=[];for(var i=0,_11;_11=_e[i];i++){var li=$("li"),tab=this.parseContent(_11,{index:i,button:li,container:this,validator:this},true)[0];this.domData(li,"tab",tab);if(tab.selected){_f=tab;}li.appendChild($("a",{href:"#","class":"mx-name-"+tab.tabName},tab.title));li.appendChild(tab.indicator);_d.appendChild(li);_10.push(tab);}this.show(_f||_10[0]);},show:function(tab){var _12=this,_13=this._active;if(_13){_13.hideTab();}this._active=tab;_5.add(this._tabContent,"loading");tab.showTab(function(){if(_12._active===tab){_5.remove(_12._tabContent,"loading");}});},showTab:function(tab){if(!this._active){this.show(tab);this.domNode.style.display="";}},hideTab:function(tab){if(tab===this._active){var _14=tab.index,_15=this._tabPanes,_16=_15.slice(_14+1).concat(_15.slice(0,_14)),_17;for(var i=0,_18;_18=_16[i];i++){if(!_18._hidden){_17=_18;break;}}tab.hideTab();if(_17){this.show(_17);}else{this._active=null;this.domNode.style.display="none";}}},resize:function(box){var _19=true,_1a=this._tabPanes;if(box){var _1b=box.h-_6.getMarginBox(this._tabList,null).h;if(_1b>_2.minContainerHeight){_19=false;_6.setMarginBox(this._tabContent,{h:_1b});}else{this._tabContent.style.height="auto";}}for(var i=0,tab;tab=_1a[i];i++){tab.resize(_19);}},isValid:function(){return _7.every(this._tabPanes,function(tab){return tab.isValid?tab.isValid():true;});},uninitialize:function(){this._clickHandler.remove();}});return _9;});