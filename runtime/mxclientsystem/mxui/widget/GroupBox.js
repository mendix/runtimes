/*
    Copyright (c) 2005-2015, Mendix bv. All rights reserved.
    See licenses.txt for third party licenses that apply.
*/

//>>built
define("mxui/widget/GroupBox",["mxui/widget/_WidgetBase","mxui/mixin/_Stateful","mxui/lib/TextTemplate","mxui/widget","mxui/dom","dijit/registry","dojo/dom-class","dojo/dom-construct","dojo/_base/declare"],function(_1,_2,_3,_4,_5,_6,_7,_8,_9){var _a=_9([_1,_2],{declaredClass:"mxui.widget.GroupBox",caption:null,collapsed:false,collapsable:false,_iconNode:null,_captionTextTemplate:null,buildRendering:function(){this.inherited(arguments);if(this.collapsable){this._iconNode=this.domNode.querySelector("i");this.collapsed=this.getState("collapsed",this.collapsed);this._doCollapse();this.connect(this.domNode.querySelector("h2"),"click",function(e){this.toggleCollapsed();e.stopPropagation();});}if(this.caption){var _b=this.domNode.querySelector("h2");var _c=document.createTextNode(" ");_b.appendChild(_c);this._captionTextTemplate=new _3(this.caption,function(_d){_c.nodeValue=_d;});}},update:function(_e,_f){var _10=this;if(this._captionTextTemplate){this._captionTextTemplate.update(_e,_11);}else{_11();}function _11(){_10.passContext(_6.findWidgets(_10.domNode),_f);};},toggleCollapsed:function(){this.set("collapsed",!this.collapsed);},_setCollapsedAttr:function(_12){if(this.collapsed!=_12){this.collapsed=_12;this._doCollapse();}},_doCollapse:function(){if(this.collapsed){_7.add(this.domNode,"collapsed");if(this._iconNode){_7.replace(this._iconNode,"glyphicon-plus","glyphicon-minus");}}else{_7.remove(this.domNode,"collapsed");if(this._iconNode){_7.replace(this._iconNode,"glyphicon-minus","glyphicon-plus");}this.mxform.resize();}},storeState:function(_13){_13("collapsed",this.collapsed);},uninitialize:function(){if(this._captionTextTemplate){this._captionTextTemplate.destroy();}}});return _a;});