
/* Copyright (c) 2005-2012, Mendix bv. All rights reserved. */

//>>built
define("mxui/widget/StaticImage",["dojo","dijit","dojox"],function(_1,_2,_3){_1.provide("mxui.widget.StaticImage");_1.declare("mxui.widget.StaticImage",mxui.widget._WidgetBase,{url:"",width:0,height:0,action:null,_overlay:null,buildRendering:function(){var _4=this.width,_5=this.height,_6=this.domNode=mxui.dom.create("img",{"class":"mx-image"}),_7=_6.style;if(this.url){_6.src=this.url;}if(_4&&_5){this.connect(_6,"load",function(){var _8=_6.width/_6.height,_9=_4/_5;if(_8<_9){_7.width="";_7.height=_5+"px";}else{_7.width=_4+"px";_7.height="";}});}else{if(_4){_7.width=this.width+"px";}else{if(_5){_7.height=this.height+"px";}}}if(this.action){this.connect(_6,"click","onClick");_6.style.cursor="pointer";}},setUrl:function(_a,_b){if(!_a){this.domNode.style.display="none";this.domNode.src=this._blankGif;_b&&_b();}else{if(this.domNode.src===_a){_b&&_b();}else{if(_b){_1.connect(this.domNode,"load",_b);}this.domNode.style.display="";this.domNode.src=_a;}}},onClick:function(e){var _c=this.action,_d=this.mxcontext,_e,_f;if("microflow" in _c||"form" in _c){_f={caller:this.mxform};_e=function(){mx.ui.execute(_c,{context:_d,store:_f});};if(_c.microflow&&_c.microflow.validate=="view"){this.mxform.validate(_e);}else{_e();}}else{if(_c.type=="enlarge"){if(!this._overlay){this._overlay=new mxui.widget.ImageZoom({src:this.domNode.src});}else{this._overlay.set("src",this.domNode.src);}this._overlay.show();}}_1.stopEvent(e);},uninitialize:function(){this._overlay&&this._overlay.destroy();},_setWidthAttr:function(){},_setHeightAttr:function(){}});});