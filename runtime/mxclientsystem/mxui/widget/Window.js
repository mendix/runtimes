
/* Copyright (c) 2005-2012, Mendix bv. All rights reserved. */

//>>built
define("mxui/widget/Window",["dojo","dijit","dojox","dojo/require!mxui/widget/_Popup,mxui/mixin/_OverflowHelper"],function(_1,_2,_3){_1.provide("mxui.widget.Window");_1.require("mxui.widget._Popup");_1.require("mxui.mixin._OverflowHelper");_1.declare("mxui.widget.Window",[mxui.widget._Popup,mxui.mixin._OverflowHelper],{title:"",width:0,height:0,resizable:true,content:null,_headerNode:null,_bodyNode:null,_layerId:0,buildRendering:function(){var $=mxui.dom.create;this.domNode=$("div",{"class":"modal-dialog mx-window"},this._contentNode=$("div",{"class":"modal-content mx-window-content"},this._headerNode=$("div",{"class":"modal-header mx-window-header"},$("h4",this.title||"...")),this._bodyNode=$("div",{"class":"modal-body mx-window-body"},this.content||"")));var _4=$("button",{type:"button","class":"close"});_4.innerHTML="&times;";_1.place(_4,this._headerNode,"first");this.connect(_4,_1.touch.press,function(){this.mxform.close();});this.capture(this.domNode,"mousedown",function(){this.focus();});this.hideOverflow(document.body);_1.style(this.domNode,"opacity",0);document.body.appendChild(this.domNode);},show:function(){if(this._visible){return;}this.onShow();var _5=this.mxform.domNode.firstChild;if(_5&&_2.byNode(_5) instanceof mxui.widget.DataView){_1.addClass(this.domNode,"mx-window-view");}var _6={};if(this.width){_6.w=this.width;}if(this.height){_6.h=this.height;}this.resize(_6);this.showOverflow(document.body);if(this.delay){_1.fadeIn({node:this.domNode,duration:this.delay}).play();}else{_1.style(this.domNode,"opacity",100);}},hide:function(_7){if(!this._visible){return;}this.onHide();if(this.delay){_1.fadeOut({node:this.domNode,duration:this.delay,onEnd:_7}).play();}else{_7&&_7();}},layout:function(){var _8=_1.contentBox(this.domNode).h,_9=_1.marginBox(this._headerNode).h,_a=mxui.dom.getNodeExtents(this._contentNode).h;_1.contentBox(this._bodyNode,{h:_8-_a-_9});this.resizeChildren(this._bodyNode);},activate:function(){_1.addClass(this.domNode,"mx-window-active");},deactivate:function(){_1.removeClass(this.domNode,"mx-window-active");},_setTitleAttr:function(){}});});