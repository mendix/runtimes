
/* Copyright (c) 2005-2012, Mendix bv. All rights reserved. */

//>>built
define("mxui/widget/Window",["mxui/widget/_Popup","mxui/mixin/_OverflowHelper","mxui/widget/DataView","mxui/dom","mendix/logger","dojo/dom-construct","dojo/dom-style","dojo/dom-class","dojo/dom-attr","dojo/dom-geometry","dojo/_base/event","dojo/_base/fx","dojo/touch","dojo/sniff","dojo/_base/declare","dijit"],function(_1,_2,_3,_4,_5,_6,_7,_8,_9,_a,_b,_c,_d,_e,_f,_10){var $=_4.create;var _11=_f([_1,_2],{declaredClass:"mxui.widget.Window",title:"",width:0,height:0,resizable:true,content:null,_headerNode:null,_bodyNode:null,_layerId:0,buildRendering:function(){this.domNode=$("div",{"class":"modal-dialog mx-window"},this._contentNode=$("div",{"class":"modal-content mx-window-content"},this._headerNode=$("div",{"class":"modal-header mx-window-header"},$("h4",this.title||"...")),this._bodyNode=$("div",{"class":"modal-body mx-window-body"},this.content||"")));_8.add(this.domNode,this.mxform.getCSSClass());_9.set(this.domNode,"style",this.mxform.getCSSStyle());var _12=$("button",{type:"button","class":"close"});_12.innerHTML="&times;";_6.place(_12,this._headerNode,"first");this.connect(_12,_d.press,function(e){this.mxform.close();if(_e("ie")==8){_b.stop(e);}});this.capture(this.domNode,"mousedown",function(){this.focus();});this.hideOverflow(document.body);_7.set(this.domNode,"opacity",0);document.body.appendChild(this.domNode);},show:function(){if(this._visible){return;}this.onShow();var _13=this.mxform.domNode.firstChild;if(_13&&_10.byNode(_13) instanceof _3){_8.add(this.domNode,"mx-window-view");}var box={};if(this.width){box.w=this.width;}if(this.height){box.h=this.height;}this.resize(box);this.showOverflow(document.body);if(this.delay){_c.fadeIn({node:this.domNode,duration:this.delay}).play();}else{_7.set(this.domNode,"opacity",100);}},hide:function(_14){if(!this._visible){return;}this.onHide();if(this.delay){_c.fadeOut({node:this.domNode,duration:this.delay,onEnd:_14}).play();}else{_14&&_14();}},layout:function(){var _15=_a.getContentBox(this.domNode).h,_16=_a.getMarginBox(this._headerNode).h,_17=_4.getNodeExtents(this._contentNode).h;_a.setContentSize(this._bodyNode,{h:_15-_17-_16});this.resizeChildren(this._bodyNode);},activate:function(){_8.add(this.domNode,"mx-window-active");},deactivate:function(){_8.remove(this.domNode,"mx-window-active");},_setTitleAttr:function(){}});return _11;});