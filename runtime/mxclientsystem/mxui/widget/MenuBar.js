
/* Copyright (c) 2005-2012, Mendix bv. All rights reserved. */

//>>built
define("mxui/widget/MenuBar",["mxui/widget/_WidgetBase","mxui/dom","mendix/logger","dojo/dom-class","dojo/dom-construct","dojo/_base/array","dojo/_base/declare","dojo/_base/event","dojo/_base/lang"],function(_1,_2,_3,_4,_5,_6,_7,_8,_9){var _a=_7(_1,{declaredClass:"mxui.widget.MenuBar",menuID:"",orientation:"horizontal",_active:null,buildRendering:function(){var $=_2.create,_b=window.mx.ui.getMenu(this.menuID),_c;this.domNode=$("div",{"class":"mx-menubar mx-menubar-"+this.orientation},_c=$("ul",{"class":"nav nav-pills mx-menubar-list"}));if(this.orientation=="vertical"){_4.add(_c,"nav-stacked");}_6.forEach(_b,function(_d,i){var _e=$("a",{href:"#"}," "+_d.caption);if(_d.icon){_5.place($("img",{"class":"mx-menubar-icon",src:window.mx.appUrl+_d.icon}),_e,"first");}this.connect(_e,"click",_9.partial(this.onClick,_d.action,i));_c.appendChild($("li",{"class":"mx-menubar-item"},_e));},this);},onClick:function(_f,_10,e){var run=function(){if(this._active){_4.remove(this._active,"active");}this._active=e.target.parentNode;_4.add(this._active,"active");window.mx.ui.execute(_f);};if(_f.microflow&&_f.microflow.validate=="view"){this.mxform.validate(_9.hitch(this,run));}else{run();}_8.stop(e);}});return _a;});