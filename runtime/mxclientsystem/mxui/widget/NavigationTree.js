
/* Copyright (c) 2005-2012, Mendix bv. All rights reserved. */

//>>built
define("mxui/widget/NavigationTree",["mxui/widget/_WidgetBase","mxui/dom","dojo/_base/event","dojo/dom-class","dojo/_base/declare"],function(_1,_2,_3,_4,_5){var $=_2.create;var _6=_5(mxui.widget._WidgetBase,{declaredClass:"mxui.widget.NavigationTree",menuID:"",buildRendering:function(){var _7=window.mx.ui.getMenu(this.menuID);this.domNode=$("div",{"class":"mx-navigationtree",tabindex:-1},$("div",{"class":"navbar-inner"},this._buildMenu(_7)));},postCreate:function(){var _8=this;this.on("a:click",function(e){_8.onClick(this);_3.stop(e);});},onClick:function(_9){var _a=this.domData(_9,"action");if(_a){if(typeof _a==="function"){_a();}else{window.mx.ui.execute(_a,{context:this.mxcontext});}}else{_4.toggle(_9.parentNode,"mx-navigationtree-collapsed");}},_buildMenu:function(_b){var _c=$("ul"),_d;for(var i=0,_e;_e=_b[i];++i){if(_e.action){_d=$("li",this._makeAnchor(_e));}else{_d=$("li",{"class":"mx-navigationtree-has-items"},this._makeAnchor(_e),this._buildMenu(_e.items));_4.add(_d,"mx-navigationtree-collapsed");}_c.appendChild(_d);}return _c;},_makeAnchor:function(_f){var _10=["a",{href:"#","class":"dropdown"}],_11;if(_f.icon){_10.push($("img",{src:window.mx.appUrl+_f.icon}));}_10.push(" "+_f.caption+" ");if(_f.items){_10.push($("span",{"class":"caret"}));}_11=$.apply(null,_10);if(_f.action){this.domData(_11,"action",_f.action);}return _11;}});return _6;});