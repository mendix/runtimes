
/* Copyright (c) 2005-2012, Mendix bv. All rights reserved. */

//>>built
define("mxui/widget/NavigationTree",["dojo","dijit","dojox"],function(_1,_2,_3){_1.provide("mxui.widget.NavigationTree");_1.declare("mxui.widget.NavigationTree",mxui.widget._WidgetBase,{menuID:"",buildRendering:function(){var $=mxui.dom.create,_4=mx.ui.getMenu(this.menuID);this.domNode=$("div",{"class":"mx-navigationtree",tabindex:-1},$("div",{"class":"navbar-inner"},this._buildMenu(_4)));},postCreate:function(){var _5=this;this.on("a:click",function(e){_5.onClick(this);_1.stopEvent(e);});},onClick:function(_6){var _7=this.domData(_6,"action");if(_7){if(typeof _7==="function"){_7();}else{mx.ui.execute(_7,{context:this.mxcontext});}}else{_1.toggleClass(_6.parentNode,"mx-navigationtree-collapsed");}},_buildMenu:function(_8){var $=mxui.dom.create,_9=$("ul"),_a;for(var i=0,_b;_b=_8[i];++i){if(_b.action){_a=$("li",this._makeAnchor(_b));}else{_a=$("li",{"class":"mx-navigationtree-has-items"},this._makeAnchor(_b),this._buildMenu(_b.items));_1.addClass(_a,"mx-navigationtree-collapsed");}_9.appendChild(_a);}return _9;},_makeAnchor:function(_c){var $=mxui.dom.create,_d=["a",{href:"#","class":"dropdown"}],_e,_f;if(_c.icon){_d.push($("img",{src:mx.appUrl+_c.icon}));}_d.push(" "+_c.caption+" ");if(_c.items){_d.push($("span",{"class":"caret"}));}_e=$.apply(null,_d);if(_c.action){this.domData(_e,"action",_c.action);}return _e;}});});