/*
    Copyright (c) 2005-2015, Mendix bv. All rights reserved.
    See licenses.txt for third party licenses that apply.
*/

//>>built
define("mxui/widget/PrimitiveWidgetWrapper",["mxui/widget/_WidgetBase","mxui/mixin/_ValidationHelper","mxui/dom","mendix/logger","dojo/dom-class","dojo/_base/declare"],function(_1,_2,_3,_4,_5,_6){var $=_3.create;var _7=_6([_1,_2],{declaredClass:"mxui.widget.PrimitiveWidgetWrapper",widget:null,_mxobject:null,buildRendering:function(){var _8=this.widget,_9=_8.domNode.parentNode;this.domNode=$("div",_8.domNode);_9.appendChild(this.domNode);this.connect(_8,"onChange",this.onChange);},startup:function(){this.widget.startup();},update:function(_a,_b){var _c=this;this.unsubscribeAll();this._mxobject=_a;if(this.widget.name){if(_a){this.subscribe({guid:_a.getGuid(),callback:function(){this.update(_a);}});window.mx.data.fetch(_a,this.widget.name,{usexpath:true},_d,function(e){window.mx.onError(e);if(_b){_b();}});}else{_d("");}}else{_4.error(this.id+".update: wrapped widget does not have name property");_e();}function _d(_f){_c.widget.set("value",_f);_e();};function _e(){_c.widget.applyContext(_c.mxcontext,_b||function(){});};},enable:function(){var _10=this.widget.domNode,_11=_10.nodeName;if(_11=="SELECT"||(_11=="INPUT"&&_10.type=="checkbox")){_10.disabled=false;}else{if(_11=="INPUT"||_11=="TEXTAREA"||_11=="BUTTON"){_10.removeAttribute("readonly");_10.readOnly=false;}}_5.remove(_10,"MxClient_formDisabled");},disable:function(){var _12=this.widget.domNode,_13=_12.nodeName;if(_13=="SELECT"||(_13=="INPUT"&&_12.type=="checkbox")){_12.disabled=true;}else{if(_13=="INPUT"||_13=="TEXTAREA"||_13=="BUTTON"){_12.setAttribute("readonly","true");_12.readOnly=true;}}_5.add(_12,"MxClient_formDisabled");},onChange:function(){this._mxobject.set(this.widget.get("name"),this.widget.get("value"));},validate:function(){var _14=this.get("value"),_15=this.widget;if(_14===null){return _15.getInvalidCause?_15.getInvalidCause():"Invalid input";}if(_14===""&&_15.obligatory){return _15.obligatorycause||window.mx.ui.translate("mendix.lib.Validations","required_field");}},_setValueAttr:function(_16){return this.widget.set("value",_16);},_getValueAttr:function(){return this.widget.get("value");}});return _7;});