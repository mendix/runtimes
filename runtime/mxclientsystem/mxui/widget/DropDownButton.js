
/* Copyright (c) 2005-2012, Mendix bv. All rights reserved. */

//>>built
define("mxui/widget/DropDownButton",["dojo","dijit","dojox"],function(_1,_2,_3){_1.provide("mxui.widget.DropDownButton");_1.declare("mxui.widget.DropDownButton",mxui.widget._Button,{items:null,_dialog:null,buildRendering:function(){this.inherited(arguments);_1.place(mxui.dom.create("span",{"class":"caret"}),this.domNode);},onClick:function(e){if(!this._dialog){var $=mxui.dom.create,_4=$("ul",{"class":"mx-list mx-dropdown-list"},this.getTemplate("content")),_5=$("button",{"class":"btn primary"},"Close"),_6=this._dialog=new mxui.widget.Dialog();_1.addClass(_6.domNode,"mx-dropdown");_6.setContent(_4);_6.setButtons([_5]);this.connect(_5,"click","hideDropDown");mxui.html.parser.parse(_4,{dialog:_6,mxform:this.mxform,parent:this});}this._dialog.show();},hideDropDown:function(){this._dialog.hide();},uninitialize:function(){if(this._dialog){this._dialog.destroy();}}});_1.declare("mxui.widget.DropDownItem",mxui.widget._WidgetBase,{icon:"",caption:"",action:null,dialog:null,parent:null,buildRendering:function(){var $=mxui.dom.create,_7=this.domNode=$("li",$("label",this.caption));if(this.icon){_1.place($("img",{src:mx.appUrl+this.icon}),_7,"first");}this.connect(_7,"click","onClick");},onClick:function(_8){this.dialog.hide();var _9=this.action,_a=this.parent.mxcontext;var _b=function(){mx.ui.execute(_9,_1.mixin({context:_a},(_9.microflow?{store:{dir:0}}:{dir:0})));};if(_9.microflow&&_9.microflow.validate=="view"){this.mxform.validate(_b);}else{_b();}}});});