
/* Copyright (c) 2005-2012, Mendix bv. All rights reserved. */

//>>built
define("mxui/widget/Navbar",["mxui/widget/_WidgetBase","mxui/dom","dojo/_base/event","dojo/dom-construct","dojo/dom-class","dojo/_base/declare"],function(_1,_2,_3,_4,_5,_6){var $=_2.create;var _7=_6(_1,{declaredClass:"mxui.widget.Navbar",menuID:"",_active:null,buildRendering:function(){var _8=$("ul",{"class":"nav navbar-nav"}),_9=window.mx.ui.getMenu(this.menuID),_a,_b;for(var i=0,_c;_c=_9[i];i++){if(_c.action){_a=$("li",{"class":"mx-navbar-item"},this._makeAnchor(_c));}else{_a=$("li",{"class":"dropdown mx-navbar-item"},this._makeAnchor(_c),_b=$("ul",{"class":"dropdown-menu mx-navbar-submenu"}));for(var j=0,_d;_d=_c.items[j];j++){_b.appendChild($("li",{"class":"mx-navbar-subitem"},this._makeAnchor(_d)));}}_8.appendChild(_a);}this.domNode=$("div",{"class":"navbar navbar-default mx-navbar",tabindex:-1},_8);},postCreate:function(){var _e=this;this.on("a:click",function(e){_e.onClick(this);_3.stop(e);});this.connect(document,"click","closeSub");},onClick:function(_f){var _10=this._active,_11=this.domData(_f,"action");this.closeSub();if(_11){if(typeof _11==="function"){_11();}else{window.mx.ui.execute(_11,{context:this.mxcontext});}}else{if(_10!=_f.parentNode){this.openSub(_f.parentNode);}}},openSub:function(_12){_5.add(_12,"open");this._active=_12;},closeSub:function(){if(this._active){_5.remove(this._active,"open");this._active=null;}},_makeAnchor:function(_13){var _14=$("a",{href:"#"}," "+_13.caption+" ");if(_13.icon){_4.place($("img",{src:window.mx.appUrl+_13.icon}),_14,"first");}if(_13.action){this.domData(_14,"action",_13.action);}else{_4.place($("b",{"class":"caret"}),_14);_5.add(_14,"dropdown-toggle");}return _14;}});return _7;});