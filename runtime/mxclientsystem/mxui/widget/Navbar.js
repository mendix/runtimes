
/* Copyright (c) 2005-2012, Mendix bv. All rights reserved. */

//>>built
define("mxui/widget/Navbar",["dojo","dijit","dojox"],function(_1,_2,_3){_1.provide("mxui.widget.Navbar");_1.declare("mxui.widget.Navbar",mxui.widget._WidgetBase,{menuID:"",_active:null,buildRendering:function(){var $=mxui.dom.create,_4=$("ul",{"class":"nav navbar-nav"}),_5=mx.ui.getMenu(this.menuID),_6,_7,_8,_9,_a;for(var i=0,_b;_b=_5[i];i++){if(_b.action){_6=$("li",{"class":"mx-navbar-item"},this._makeAnchor(_b));}else{_6=$("li",{"class":"dropdown mx-navbar-item"},this._makeAnchor(_b),_9=$("ul",{"class":"dropdown-menu mx-navbar-submenu"}));for(var j=0,_c;_c=_b.items[j];j++){_9.appendChild($("li",{"class":"mx-navbar-subitem"},this._makeAnchor(_c)));}}_4.appendChild(_6);}this.domNode=$("div",{"class":"navbar navbar-default mx-navbar",tabindex:-1},_4);},postCreate:function(){var _d=this;this.on("a:click",function(e){_d.onClick(this);_1.stopEvent(e);});this.connect(document,"click","closeSub");},onClick:function(_e){var _f=this._active,_10=this.domData(_e,"action");this.closeSub();if(_10){if(typeof _10==="function"){_10();}else{mx.ui.execute(_10,{context:this.mxcontext});}}else{if(_f!=_e.parentNode){this.openSub(_e.parentNode);}}},openSub:function(_11){_1.addClass(_11,"open");this._active=_11;},closeSub:function(){if(this._active){_1.removeClass(this._active,"open");this._active=null;}},_makeAnchor:function(_12){var $=mxui.dom.create,_13=$("a",{href:"#"}," "+_12.caption+" ");if(_12.icon){_1.place($("img",{src:mx.appUrl+_12.icon}),_13,"first");}if(_12.action){this.domData(_13,"action",_12.action);}else{_1.place($("b",{"class":"caret"}),_13);_1.addClass(_13,"dropdown-toggle");}return _13;}});});