/*
    Copyright (c) 2005-2015, Mendix bv. All rights reserved.
    See licenses.txt for third party licenses that apply.
*/

//>>built
define("mxui/widget/TabContent",["mxui/widget/_WidgetBase","mxui/widget/TabContainer","mxui/widget","mxui/dom","mendix/logger","dojo/dom-class","dojo/dom-style","dojo/_base/array","dojo/_base/lang","dojo/_base/declare","dijit"],function(_1,_2,_3,_4,_5,_6,_7,_8,_9,_a,_b){var $=_4.create;var _c=_a(_1,{declaredClass:"mxui.widget.TabContent",index:0,title:"",button:null,container:null,indicator:null,delayLoading:false,refreshOnShow:false,_hidden:false,_parsed:false,_loading:false,_visible:false,_cachedResize:null,_notifies:0,_children:null,_contextInitialized:false,buildRendering:function(){this.indicator=$("span",{"class":"mx-tabcontainer-indicator"});this.domNode=$("div",{"class":"tab-pane mx-tabcontainer-pane"});},startup:function(){if(!this.delayLoading){this.parse();}this._updateNotification();},applyContext:function(){this._contextInitialized=true;return this.inherited(arguments);},parse:function(){var _d=this.getTemplate("content");this.domNode.appendChild($("#",_d||""));this._children=this.parseContent(this.domNode,{validator:this});this._parsed=true;if(_d&&this.domNode.firstChild&&_b.byNode(this.domNode.firstChild) instanceof _2){_6.add(this.domNode.firstChild,"mx-tabcontainer-nested");}},refresh:function(_e){this._loading=true;var _f=this.getChildren();_3.ready(_f,_9.hitch(this,"passContext",_f,_9.hitch(this,function(){this._loading=false;_e&&_e();})));},show:function(){this._hidden=false;_7.set(this.button,"display","");_7.set(this.domNode,"display","");this.container.onShowTab(this);},hide:function(){this._hidden=true;_7.set(this.button,"display","none");_7.set(this.domNode,"display","none");if(this._contextInitialized){this.container.onHideTab(this);}},showTab:function(_10){this._visible=true;if(this._loading){return;}var _11=this,_12=function(){if(_11._visible){_6.add(_11.domNode,"active");if(_11._cachedResize!=null){_11.resize(_11._cachedResize);_11._cachedResize=null;}}if(_10){_10();}};_6.add(this.button,"active");if(!this._parsed){this.parse();this.refresh(_12);}else{if(this.refreshOnShow&&this._contextInitialized){this.refresh();}_12();}},hideTab:function(){this._visible=false;_6.remove(this.button,"active");_6.remove(this.domNode,"active");},resize:function(_13){if(this._visible){this.resizeChildren(this.domNode,_13);}else{this._cachedResize=_13;}},isValid:function(){return _8.every(this._children,function(_14){return _14.isValid?_14.isValid():true;});},addNotification:function(){++this._notifies;this._updateNotification();var _15=this.container.validator;if(_15){_15.addNotification();}return true;},removeNotification:function(){--this._notifies;this._updateNotification();var _16=this.container.validator;if(_16){_16.removeNotification();}},_updateNotification:function(){if(this._notifies===0){_7.set(this.indicator,"display","none");}else{if(this.domNode.style.display=="none"){window.mx.ui.error(this.translate("hidden_validations",[this.index+1]));}_7.set(this.indicator,"display","");}_4.text(this.indicator,this._notifies+"");},_setTitleAttr:function(){}});return _c;});