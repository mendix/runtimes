
/* Copyright (c) 2005-2012, Mendix bv. All rights reserved. */

//>>built
define("mxui/widget/plugins/DataGrid/KeyNavigation",["dojo","dijit","dojox","dojo/require!mxui/widget/DataGrid"],function(_1,_2,_3){_1.provide("mxui.widget.plugins.DataGrid.KeyNavigation");_1.require("mxui.widget.DataGrid");if(!mxui.widget.plugins){mxui.widget.plugins={};}if(!mxui.widget.plugins.DataGrid){mxui.widget.plugins.DataGrid={};}mxui.widget.plugins.DataGrid.KeyNavigation=function(_4){var _5="mxui.widget.plugins.DataGrid.KeyNavigation";var _6={node:null,row:-1};var _7=_4.parent;var _8=_4.config;if(_7&&(_7.declaredClass!="mxui.widget.DataGrid")){logger.error(_5+".initialize : can only register to DataGrid!");}else{}var _9={onLoad:"plugineventOnLoad",onRefresh:"plugineventOnRefresh",onDestroy:"plugineventOnDestroy"};var _a=function(){if(_7.getCurrentGridSize()==0){return;}var _b=_7.getCellNode(0,_6.datakey||firstGridKey);if(_b){editNode(_b);}};var _c=function(){if(_6.row!=0){var _d=_7.getCellNode((_6.row-1),_6.datakey);setNode(_d);}};var _e=function(){makeChange()&&saveAndCommitMxObject();if(_6.row!=(_6.gridsize-1)){var _f=_7.getCellNode((_6.row+1),_6.datakey);if(_f&&(_f!=_6.node)){setNode(_f);}}};this.plugineventOnLoad=function(e){setFirstCell();};this.plugineventOnDestroy=function(e){this.destroy();};this.plugineventOnRefresh=function(e){setFirstCell();};this.plugineventCellClicked=function(e){setNode(e.target,true);};this.focusKeyHandler=function(_10){var _11=_10.keyCode;switch(_11){case 33:_7.goToPreviousPage(editFirstCell);break;case 34:_7.goToNextPage(editFirstCell);break;case 35:_7.goToLastPage(editFirstCell);break;case 36:_7.goToFirstPage(editFirstCell);break;case 38:_c();break;case 9:_10.stopPropagation();_10.preventDefault();case 40:_e();break;}return false;};this.destroy=function(){try{for(var i in references){references[i].source.destroy();}references=null;}catch(e){}_7=null;};for(var i in _9){_7.registerToPluginEvent(i,_1.hitch(this,_9[i]));}};});