/*
    Copyright (c) 2005-2015, Mendix bv. All rights reserved.
    See licenses.txt for third party licenses that apply.
*/

//>>built
define("mxui/mixin/_ValidationHelper",["mxui/dom","mxui/lib/errorMessage","dojo/dom-class","dojo/_base/declare"],function(_1,_2,_3,_4){var _5=_4(null,{required:false,requiredMsg:"",validator:null,_errorNode:null,_valsub:null,_valattr:null,_hasError:false,setupValidation:function(_6){this._valattr=_6||null;},setValidationObject:function(_7){if(this._valsub){this.unsubscribe(this._valsub);}if(_7){this._valsub=this.subscribe({guid:_7.getGuid(),callback:this.onValidation,val:true});}this.removeError();},validatedMicroflow:function(_8){if(_8.validate==="node"&&!this.isValid()){return;}window.mx.ui.execute({type:"callMicroflow",params:_8},{origin:this.mxform,context:this.mxcontext,abortOnClientValidations:true});},onValidation:function(_9){var _a=_9[0],_b=this._valattr,_c=_a.getReasonByAttribute(_b);if(_c!=null){this.addError(_c);_a.removeAttribute(_b);}else{this.removeError();}},validate:function(){if(this.checkValidations&&!this.checkValidations()){return "";}if(this.required&&this.get("value")===""){return (this.requiredMessage||this.requiredMsg||window.mx.ui.translate("mendix.lib.Validations","required_field"));}},isValid:function(){var _d=this.validate();if(_d!=null){this.addError(_d);return false;}else{this.removeError();return true;}},addError:function(_e){this.removeError();this._hasError=true;if(_e){_2.show(this.domNode,_e);this.mxform.resize();}_3.add(this.domNode,"has-error");if(this.validator){this.validator.addNotification();}},removeError:function(){_2.hide(this.domNode);_3.remove(this.domNode,"has-error");if(this.validator&&this._hasError){this.validator.removeNotification();}this._hasError=false;}});return _5;});