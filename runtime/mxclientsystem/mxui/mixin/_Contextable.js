
/* Copyright (c) 2005-2012, Mendix bv. All rights reserved. */

//>>built
define("mxui/mixin/_Contextable",["dojo","dijit","dojox","dojo/require!mxui/lib/_ContextSource"],function(_1,_2,_3){_1.provide("mxui.mixin._Contextable");_1.require("mxui.lib._ContextSource");_1.declare("mxui.mixin._Contextable",null,{inputargs:{dropContext:null,contextsource:""},notifyListeners:function(_4){_1.publish(mx.ui.makeShareId(this.mxform,this.mxid),[_4]);},initContext:function(){if(!this.mxcontext){this.mxcontext=this.createContext();}},cloneContext:function(_5){if(this.mxcontext==null||this.mxcontext==""){this.mxcontext=this.createContext();}this.mxcontext.dupFrom(_5);this.applyContextDrop();this.applyContextAction();if(this.backtrackconstraints){this.mxcontext.setConstraints(this.backtrackconstraints);}},applyContextDrop:function(){var _6=this.dropContext;if(_6){for(var i=0,_7;_7=_6[i];i++){if(this.mxcontext.hasContext(_7)){this.mxcontext.unsetContext(_7);}}}},applyContextAction:function(){if(/reset/i.test(this.contextAction)){this.mxcontext.reset();}},createContext:function(){var _8=new mendix.lib.MxContext();_8.setAppFlowId(this.app_flow_id);return _8;},removeOpenContext:function(){var _9=this.mxcontext;if(_9&&_9.listeners){_9.listeners[this.id]=null;delete _9.listeners[this.id];}mx.ui.cleanWidgetContext(this);delete this.mxcontext;},uninitialize:function(){this.removeOpenContext();}});});