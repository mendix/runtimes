
/* Copyright (c) 2005-2012, Mendix bv. All rights reserved. */

//>>built
define("mxui/mixin/_Pluggable",["mendix/logger","dojo/_base/array","dojo/_base/lang","dojo/_base/declare","dojo"],function(_1,_2,_3,_4,_5){var _6=_4(null,{plugins:null,pluginEvents:null,_normalizePluginName:function(_7){if(_7.indexOf(".")==-1){_7="mxui.widget.plugins."+this.declaredClass.split(".").pop()+"."+_7;}return _7;},loadPlugin:function(_8,_9){this.plugins=this.plugins||{};_8=this._normalizePluginName(_8);_5.require(_8);var _a=_3.getObject(_8);this.plugins[_8]=new _a({parent:this,config:_9});},hasPlugin:function(_b){return this.plugins&&this._normalizePluginName(_b) in this.plugins;},registerToPluginEvent:function(_c,_d,_e){this.pluginEvents=this.pluginEvents||{};if(!this.pluginEvents[_c]){this.pluginEvents[_c]=[];}_d._async=_e;this.pluginEvents[_c].push(_d);},triggerPluginEvent:function(_f,_10,_11){var _12=this.pluginEvents&&this.pluginEvents[_f];var _13=1;var _14=function(){if(--_13===0){if(_11){_11();}}};if(_12){_2.forEach(_12,function(_15){try{if(_15._async){_13++;_15(_10,_14);}else{_15(_10);}}catch(e){_1.error(this.id+".triggerPluginEvent: An error occurred in listener of event '"+_f+"': "+e);}},this);}_14();},uninitialize:function(){for(var _16 in this.plugins){try{this.plugins[_16].destroy();}catch(e){}}}});return _6;});