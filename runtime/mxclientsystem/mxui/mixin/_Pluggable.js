
/* Copyright (c) 2005-2012, Mendix bv. All rights reserved. */

//>>built
define("mxui/mixin/_Pluggable",["dojo","dijit","dojox"],function(_1,_2,_3){_1.provide("mxui.mixin._Pluggable");_1.declare("mxui.mixin._Pluggable",null,{plugins:null,pluginEvents:null,_normalizePluginName:function(_4){if(_4.indexOf(".")==-1){_4="mxui.widget.plugins."+this.declaredClass.split(".").pop()+"."+_4;}return _4;},loadPlugin:function(_5,_6){this.plugins=this.plugins||{};_5=this._normalizePluginName(_5);_1["require"](_5);var _7=_1.getObject(_5);this.plugins[_5]=new _7({parent:this,config:_6});},hasPlugin:function(_8){return this.plugins&&this._normalizePluginName(_8) in this.plugins;},registerToPluginEvent:function(_9,_a,_b){this.pluginEvents=this.pluginEvents||{};if(!this.pluginEvents[_9]){this.pluginEvents[_9]=[];}_a._async=_b;this.pluginEvents[_9].push(_a);},triggerPluginEvent:function(_c,_d,_e){var _f=this.pluginEvents&&this.pluginEvents[_c];var _10=1;var _11=function(){if(--_10===0){if(_e){_e();}}};if(_f){_1.forEach(_f,function(_12){try{if(_12._async){_10++;_12(_d,_11);}else{_12(_d);}}catch(e){logger.error(this.id+".triggerPluginEvent: An error occured in listener of event '"+_c+"': "+e);}},this);}_11();},uninitialize:function(){for(var _13 in this.plugins){try{this.plugins[_13].destroy();}catch(e){}}}});});