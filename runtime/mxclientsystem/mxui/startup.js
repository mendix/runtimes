/*
    Copyright (c) 2005-2015, Mendix bv. All rights reserved.
    See licenses.txt for third party licenses that apply.
*/

//>>built
define("mxui/startup",["mxui/Client","mendix/lib/MxContext","dojo/hash","dojo/aspect","dojo/cookie","dojo/_base/config"],function(_1,_2,_3,_4,_5,_6){var _7=_3();window.mx=new _1(_6);_4.before(window.mx,"reload",function(){window.location.replace(window.location.pathname+window.location.search);});_4.before(window.mx,"redirect",function(_8){window.location.href=_8+window.location.search;});if(!("cacheBust" in _6)){window.alert("The 'cacheBust' parameter is missing. Update the index page in the theme by adding the cachebust to the 'dojoConfig' and to every url pointing to a static resource (e.g. scripts and stylesheets). See index-example.html in the deployment/web directory for an example of what the index page should look like.");return;}if(!_9()){window.alert("This application requires cookies to be enabled.");return;}if(!_6.preventStartup){window.mx.startup();}window.mx.addOnLoad(function(){if(!_a(_7)&&!_b()){window.mx.remote.execute(window.mx.session.getConfig());}});function _9(){if(!/^https?:/.test(window.location.protocol)){return navigator.cookieEnabled;}else{if(navigator.cookieEnabled===false){return false;}else{_5("mx-cookie-test","allowed");var _c=_5("mx-cookie-test")==="allowed";_5("mx-cookie-test","",{expires:-1});return _c;}}};function _b(){var _d=window.sessionStorage.getItem("refreshData");if(!_d){return false;}window.sessionStorage.removeItem("refreshData");var _e=JSON.parse(_d),_f=new _2();_f.setContext(_e.entity,_e.guid);window.mx.router.openFormInContent(_e.path,"",_f);return true;};function _a(_10){if(_10.slice(0,2)!="!/"){return false;}_10=_10.slice(2,_10.length);if(!/^(\w+\/\w+(\?\w+\.\w+=\d+(&\w+\.\w+=\d+)*)?|\w+\.\w+(\?\d+)?)$/.test(_10)){return false;}var _11=_10.split("?"),_12=_11[0],_13=_11[1],_14=new _2();if(_12.indexOf("/")!=-1){if(_13){var _15=_13.split("&");for(var i=_15.length;i>=0;--i){var _16=_15[i].split("=");_14.setContext(_16[0],_16[1]);}}window.mx.router.openFormInContent(_12+".page.xml","",_14);}else{if(_13){_14.setContext(" ",_13);}window.mx.data.action({context:_14,params:{actionname:_12}});}return true;};});