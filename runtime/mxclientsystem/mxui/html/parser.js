
/* Copyright (c) 2005-2012, Mendix bv. All rights reserved. */

//>>built
define("mxui/html/parser",["dojo","dijit","dojox"],function(_1,_2,_3){_1.provide("mxui.html.parser");mxui.html.parser={instantiate:function(_4,_5){var _6="data-mendix-",_7=_6+"id",_8=_6+"type",_9=_6+"props",_a=[];var _b=function(_c,_d){logger.error(_d);if(_c.parentNode){_c.parentNode.replaceChild(mxui.dom.create("div",{style:"color:red"},_d),_c);}};for(var i=0,_e=_4.length;i<_e;i++){var _f=_4[i],_10=_f.getAttribute(_7),_11=_f.getAttribute(_9),_12=_f.getAttribute(_8),_13=_1.getObject(_12),_14=_11&&_1.fromJson("{"+_11+"}"),_15=mendix.lang.override(_14,_5,{mxid:_10,"class":_f.className,style:_f.style.cssText,focusIndex:mxui.dom.getTabIndex(_f)});_f.removeAttribute(_8);_f.removeAttribute(_9);if(_13){try{var _16=new _13(_15,_f);if(_16.name){_16=new mxui.widget.PrimitiveWidgetWrapper({widget:_16,mxform:_16.mxform});}_a.push(_16);}catch(e){_b(_f,"Could not create widget "+_12+": "+e);}}else{_b(_f,"No constructor found for widget "+_12);}}_e=_a.length;for(i=0;i<_e;i++){var _17=_a[i];if(_17.startup){if(!_17._started){try{_17.startup();}catch(e){_17.actLoaded();_b(_f,"Could not create widget "+_12+": "+e);}}}}return _a;},parse:function(_18,_19){if(!_18){_18=_1.body();}var _1a=_18.getElementsByTagName("div"),_1b=_18.getAttribute("data-mendix-type"),_1c=_1b?[_18]:[];for(var i=0,len=_1a.length;i<len;i++){if(_1a[i].getAttribute("data-mendix-type")){_1c.push(_1a[i]);}}return mxui.html.parser.instantiate(_1c,_19);}};});