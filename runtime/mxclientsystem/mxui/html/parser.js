/*
    Copyright (c) 2005-2015, Mendix bv. All rights reserved.
    See licenses.txt for third party licenses that apply.
*/

//>>built
define("mxui/html/parser",["mxui/dom","mendix/lang","dojo/json","dojo/_base/array","dojo/_base/lang","require"],function(_1,_2,_3,_4,_5,_6){function _7(_8,_9,_a){var _b="data-mendix-",_c=_b+"id",_d=_b+"type",_e=_b+"props",_f=[];_a=_a?(_a+"_"):"";_4.forEach(_8,function(_10){var _11=_10.getAttribute(_c),_12=_10.getAttribute(_e),_13=_10.getAttribute(_d),_14=_5.getObject(_13),_15=_12&&_3.parse("{"+_12+"}"),_16=_5.mixin(_15,_9,{mxid:_11,uniqueid:_a+_11,"class":_10.className,style:_10.style.cssText,focusIndex:_1.getTabIndex(_10)});_10.removeAttribute(_d);_10.removeAttribute(_e);if(_14){try{var _17=new _14(_16,_10);if(_17.name){var _18=_6("mxui/widget/PrimitiveWidgetWrapper");_17=new _18({widget:_17,mxform:_17.mxform});}_f.push(_17);}catch(e){_19(_10,"Could not create widget "+_13+": "+e);}}else{_19(_10,"No constructor found for widget "+_13);}});_4.forEach(_f,function(_1a){if(_1a.startup){if(!_1a._started){try{_1a.startup();}catch(e){_1a.actLoaded();_19(_1a.domNode,"Could not create widget "+_1a.declaredClass+": "+e);}}}});function _19(_1b,_1c){logger.error(_1c);if(_1b.parentNode){_1b.parentNode.replaceChild(_1.create("div",{style:"color:red"},_1c),_1b);}};return _f;};function _1d(_1e,_1f,_20){_1e=_1e||document.body;var _21=_2.toArray(_1e.querySelectorAll("[data-mendix-type]"));if(_1e.getAttribute("data-mendix-type")){_21.unshift(_1e);}return _7(_21,_1f,_20);};function _22(_23,_24,_25){var _26=[];_1.walkNode(_23,function(_27){if(_27.getAttribute&&_27.getAttribute("data-mendix-type")){_26.push(_27);return false;}return true;});return _7(_26,_24,_25);};var _28={instantiate:_7,parse:_1d,parseTopLevel:_22};return _28;});