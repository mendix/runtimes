
/* Copyright (c) 2005-2012, Mendix bv. All rights reserved. */

//>>built
define("mendix/lang",["dojo","dijit","dojox"],function(_1,_2,_3){_1.provide("mendix.lang.common");(function(){var _4=function(_5,_6,_7,_8,_9,_a,_b){var _c=_8[_a],_d=_6+"."+_7+" is deprecated, use "+(_9!=_6?_9+".":"")+_a+" instead",_e=function(){_1.deprecated(_d,"",_b);var _f=typeof _8=="function"&&this instanceof _8;return (_f?this:_8)[_a].apply(this,arguments);};if(!_c){_5.prototype[_7]=_e;}else{if(typeof _c=="function"&&_c.prototype&&!_c.prototype.declaredClass){if(typeof _5=="function"){_5.prototype[_7]=_e;}else{_5[_7]=_e;}}else{_5[_7]=_c;}}};mendix.lang={map:function(obj,_10){var _11=[];if(typeof (obj.push)=="function"){for(var i=0;i<obj.length;i++){_11.push(_10(obj[i]));}}else{for(var i in obj){_11.push(_10(obj[i]));}}return _11;},nullExec:function(_12){_12&&_12();},sequence:function(_13,_14,_15){if(_14&&typeof _14=="object"){_15=_14;_14=null;}if(_13 instanceof Array){var _16=0,_17,_18,_19,_1a=function(){_17=true;if(_18){_19();}};_19=function(){while(_16<_13.length){_17=false;_18=false;var _1b=_13[_16++];if(typeof _1b=="function"){_1b.call(_15,_1a);}else{if(_15&&typeof _15[_1b]=="function"){_15[_1b](_1a);}else{throw new Error("mendix.lang.sequence: #"+_16+" is not a function");}}if(!_17){_18=true;return;}}if(_14){_14.call(_15);}};_19();}else{throw new Error("mendix.lang.sequence: sequence is not an array");}},collect:function(_1c,_1d,_1e){if(_1d&&typeof _1d=="object"){_1e=_1d;_1d=null;}if(_1c instanceof Array){var _1f=0,_20=_1c.length+1,_21=function(){if(--_20==0&&_1d){_1d.call(_1e);}};while(_1f<_1c.length){var _22=_1c[_1f++];if(typeof _22=="function"){_22.call(_1e,_21);}else{if(_1e&&typeof _1e[_22]=="function"){_1e[_22](_21);}else{throw new Error("mendix.lang.collect: #"+_1f+" is not a function");}}}_21();}else{throw new Error("mendix.lang.collect: collection is not an array");}},tryActions:function(_23,_24,_25){_24=_24||function(e){logger.error(e);throw (e);};var _26=function(e){_24(e);_25&&_25();};(function(_27,_28){_27&&_27();if(_23.length!=0){try{_23.shift()(arguments.callee,_26);}catch(e){_26(e);}}else{_25&&_25();}})();},objectToArray:function(obj){var arr=[];for(var i in obj){arr.push(i);}return (arr);},arrayToObject:function(arr){var obj={};for(var i=0;i<arr.length;i++){obj[arr[i]]=arr[i];}return (obj);},thread:function(_29,_2a){return setTimeout(_1.hitch(_2a,_29),1);},delay:function(_2b,_2c,_2d){return setTimeout(function(){(_2c())?_2b():setTimeout(arguments.callee,_2d);},(_2d||500));},runOrDelay:function(_2e,_2f,_30){if(!_30){_30=500;}if(_2f()){return _2e();}else{return setTimeout(function(){if(_2f()){_2e();}else{setTimeout(arguments.callee,_30);}},_30);}},waitUntilPredicateHolds:function(_31,_32,_33){if(_33.length===0||_31()){_32();return;}var _34=_33.shift();setTimeout(function(){mendix.lang.waitUntilPredicateHolds(_31,_32,_33);},_34);},arraySubtract:function(x,y){for(var i=0;i<y.length;i++){for(var j=x.length-1;0<=j;j--){if(x[j].toString()==y[i].toString()){x.splice(j,1);}}}return x;},objectIsEmpty:function(obj){for(var i in obj){return false;}return true;},firstKey:function(obj){for(var key in obj){return key;}return null;},itemCount:function(obj){var _35=0;for(var i in obj){_35++;}return _35;},inArray:function(arr,_36){var _37=false;for(var i=0;i<arr.length;i++){if(arr[i]==_36){_37=true;}}return _37;},trim:function(str){return str.replace(/^\s\s*/,"").replace(/\s\s*$/,"");},capitalize:function(str){return str.length>0?str[0].toUpperCase()+str.slice(1):"";},getUniqueId:function(){var _38=0;mendix.lang.getUniqueId=function(){return (+new Date)+"-"+_38++;};return mendix.lang.getUniqueId();},override:function(_39){var src,key,val;if(!_39){_39={};}for(var i=1;i<arguments.length;++i){src=arguments[i];if(!src){continue;}for(key in src){val=src[key];if(val!==undefined){_39[key]=val;}}}return _39;},numberTooBig:function(_3a){if(typeof _3a!="number"){_3a=Number(_3a);}return _3a>9007199254740992||_3a<-9007199254740992;},getFileError:function(doc,_3b){var _3c=null,_3d,_3e;_3d=doc.getElementsByTagName("textarea")[0];if(_3d){_3e=_1.fromJson(_3d.value);if(_3e.type&&_3e.type==="exception"){_3c=new mendix.lib.DescribedServerError(_3e.description);logger.error((_3b?(_3b+": "):"")+_3c.message);_3c._type="exception";}}return _3c;},deprecate:function(){var _3f=arguments,_40=_3f[0],_41=_1.getObject(_40,true),_42=_3f[_3f.length-1];if(_3f.length<4){if(typeof _3f[1]=="object"){var _43=_3f[1];for(var _44 in _43){_4(_41,_40,_44,_41,_40,_43[_44],_42);}}else{var _45=_3f[1],_46=_1.getObject(_45);for(var _44 in _46){_4(_41,_40,_44,_46,_45,_44,_42);}}}else{var _47=_3f[1],_45=_3f[2],_46=_1.getObject(_45),_48=_3f[3];_4(_41,_40,_47,_46,_45,_48,_42);}}};})();});