
/* Copyright (c) 2005-2012, Mendix bv. All rights reserved. */

//>>built
define("mendix/compat",["dojo","dijit","dojox"],function(_1,_2,_3){_1.provide("mendix.compat");(function(){var _4="6.0";mendix.lang.deprecate("mendix.lang",{runBindActions:"sequence",runAsyncActions:"collect",runActions:"sequence"},_4);mendix.lang.deprecate("mendix.lang","clone","dojo","clone",_4);mendix.lang.deprecate("mendix.lang","round","dojo.number","round",_4);mendix.lang.deprecate("mendix.lang","toFixed","dojo.number","round",_4);mendix.lang.deprecate("mendix.lang","dupObject","dojo","clone",_4);var _5=mendix.lang,_6={sequence:_5.sequence,collect:_5.collect};_1.mixin(_5,{sequence:function(_7,_8,_9){if(_8 instanceof Array){_1.deprecated("mendix.lang.sequence","Method signature has changed to sequence(seq, callback, scope)",_4);return _6.sequence.call(_5,_8,_9,_7);}else{return _6.sequence.apply(_5,arguments);}},collect:function(_a,_b,_c){if(_b instanceof Array){_1.deprecated("mendix.lang.collect","Method signature has changed to collect(coll, callback, scope)",_4);return _6.collect.call(_5,_b,_c,_a);}else{return _6.collect.apply(_5,arguments);}}});mendix.lang.deprecate("mx","moduleUrl","dojo","moduleUrl",_4);mendix.lang.deprecate("mx.meta",{getMetaMap:"getMap"},_4);var _d=mx.meta;_1.mixin(_d,{getMetaEntity:function(_e,_f){_1.deprecated("mx.meta.getMetaEntity is deprecated, use getEntity instead","",_4);if(typeof _e!="string"){_1.deprecated("mx.meta.getEntity should have one parameter of type string, which is the entity name","",_4);var _10=_d.getEntity(_e.className),_11=_e.error,_12=_e.callback;if(!_10){_11&&_11.call(_f);}else{_12&&_12.call(_f,_10);}return _10;}return _d.getEntity.apply(_d,arguments);}});mendix.lang.deprecate("mx.metadata","mx.meta",_4);mendix.lang.deprecate("mx.server",{getResource:"get"},_4);mendix.lang.deprecate("mx.xas","action","mx.data","action",_4);var _13=mx.data,_14={},_15={types:{},guids:{}};for(var _16 in _13){_14[_16]=_13[_16];}var _17=function(_18,map){if(_18.length==1&&map.length!=1){return _18[0];}else{var _19={};for(var i=0,l=map.length;i<l;i++){var _1a=map[i],_1b=_18[i];if(_1b){_19[_1a]=_1b;}}return _19;}};var _1c=function(_1d,_1e){if(arguments.length>1){_1.deprecated("mx.data."+_1d+": deprecated arguments, use use { xpath : '', resulttype : '', callback : callback, error : error } instead","",_4);_1e=_17([].slice.call(arguments,1),["xpath","callback","resulttype"]);}return _14[_1d](_1e);};_1.mixin(_13,{distributeChange:function(_1f,_20,_21){_1.deprecated("mx.data.distributeChange is deprecated, use update instead","",_4);return _13.update({guid:_1f,attr:_20,value:_21});},addChangeListener:function(_22,_23,_24){_1.deprecated("mx.data.addChangeListener is deprecated, use subscribe instead","",_4);return _13.subscribe({guid:_22,attr:_23,callback:_24});},removeChangeListener:function(_25){_1.deprecated("mx.data.removeChangeListener is deprecated, use unsubscribe instead","",_4);return _13.unsubscribe(_25);},subscribeToClass:function(_26,_27){_1.deprecated("mx.data.subscribeToClass is deprecated, use subscribe instead","",_4);var id=_26.id,sub=_15.types,map=sub[id]||(sub[id]={});if(map[_27]){return map[_27];}else{var _28=_13.subscribe({entity:_27,callback:_1.hitch(_26,"objectUpdate")});return (map[_27]=_28);}},unSubscribeFromClass:function(_29,_2a){_1.deprecated("mx.data.unSubscribeFromClass is deprecated, use unsubscribe instead","",_4);var id=_29.id,sub=_15.types,_2b=sub[id]&&sub[id][_2a];if(_2b){_13.unsubscribe(_2b);delete sub[id][_2a];if(!mendix.lang.itemCount(sub[id])){delete sub[id];}}},subscribeToGUID:function(_2c,_2d){_1.deprecated("mx.data.subscribeToGUID is deprecated, use subscribe instead","",_4);var id=_2c.id,sub=_15.guids,map=sub[id]||(sub[id]={});if(map[_2d]){return map[_2d];}else{var _2e=_13.subscribe({guid:_2d,callback:_1.hitch(_2c,"objectUpdate")});return (map[_2d]=_2e);}},unSubscribeFromGUID:function(_2f,_30){_1.deprecated("mx.data.unSubscribeFromGUID is deprecated, use unsubscribe instead","",_4);var id=_2f.id,sub=_15.guids,_31=sub[id]&&sub[id][_30];if(_31){_13.unsubscribe(_31);delete sub[id][_30];if(!mendix.lang.itemCount(sub[id])){delete sub[id];}}},xasAction:function(_32){_1.deprecated("mx.data.xasAction is deprecated, use action instead","",_4);var _33=_32.callback;_32.callback=function(_34,_35){return _33&&_33(_35,_34);};return _13.action.call(_13,_32);},action:function(_36){if(_36.caller){_1.deprecated("mx.data.action: deprecated arguments, use store property for caller parameter ({ store : { caller : obj }})","",_4);var _37=_36.caller,_38=_36.store||(_36.store={});_38.caller=_36.caller;}if(_36.params){_14.action.apply(_13,arguments);}else{_1.deprecated("mx.data.action: deprecated arguments, use params property for action parameters","",_4);var _39={context:_36.context,callback:_36.callback,error:_36.error,store:_36.store,onValidation:_36.onValidation,async:_36.async,params:_36};delete _36.context;delete _36.callback;delete _36.error;delete _36.store;delete _36.caller;delete _36.onValidation;delete _36.async;_14.action(_39);}},getObjectsByXPath:function(){_1.deprecated("mx.data.getObjectsByXPath is deprecated, use get instead","",_4);var _3a=arguments;var _3b=(typeof _3a[1]=="function")?_17(_3a,["xpath","callback","useCache"]):_17(_3a,["xpath","options","callback","useCache"]);var _3c=_3b.xpath,_3d=_3b.options||{},_3e=_3b.callback,_3f=_3b.error||_3d.error;return _13.get({xpath:_3c,callback:_3e,error:_3d.error,count:_3d.addcount,filter:{limit:_3d.limit,offset:_3d.offset,sort:_3d.sort,attributes:_3d.tags}});},getAttributeListByXPath:function(_40){_1.deprecated("mx.data.getAttributeListByXPath is deprecated, use get instead","",_4);_40=_40||{};var _41=_40.callback,_42=_40.error,_43=_40.attribute;return _13.get({xpath:_40.xpath,callback:function(_44){var _45={};for(var i=0,l=_44.length;i<l;i++){var _46=_44[i].getAttribute(_43);_45[_46]=_46;}_41&&_41(_45);},error:error,filter:{limit:options.limit,offset:options.offset,sort:options.sort,attributes:[_43],distinct:true}});},getObjectsByXPathSchema:function(){_1.deprecated("mx.data.getObjectsByXPathSchema is deprecated, use get instead","",_4);var _47=_17(arguments,["xpath","options","callback","useCache"]),_48=_47.options||{},_49=_47.xpath,_4a=_47.callback,_4b=_47.error||_48.error;return _13.get({xpath:_49,callback:_4a,error:_48.error,count:_48.addcount,noCache:!_47.useCache,filter:{id:_48.queryid,limit:_48.limit,offset:_48.offset,sort:_48.sort}});},getObjectsByMicroFlow:function(_4c,_4d,_4e){_1.deprecated("mx.data.getObjectsByMicroFlow is deprecated, use get instead","",_4);_4d=_4d||{};_13.action({params:{actionname:_4c,applyto:_4d.applyto||"none",constraints:_4d.constraints||"",guids:_4d.guids||null},context:_4d.context,callback:_4e,error:function(e){_4d.error?_4d.error(e):_4e&&_4e([]);}});},getObjectsById:function(_4f){_1.deprecated("mx.data.getObjectsById is deprecated, use get instead","",_4);var _50,_51,_52,_53;if(_4f.length==null&&arguments.length==1){var _54=_4f;_4f=_54.ids;_50=_54.options;_51=_54.callback;_53=_54.error;_52=_54.nocache;}else{if(typeof arguments[1]=="function"){_51=arguments[1];_52=arguments[2];}else{_50=arguments[1];_51=arguments[2];_52=arguments[3];_53=_50?_50.error:null;}}_50=_50||{};return _13.get({guids:_4f,callback:_51,error:_53,count:_50.addcount,filter:{limit:_50.limit,offset:_50.offset,sort:_50.sort,attributes:_50.tags}});},getObjectByXPath:function(_55){_1.deprecated("mx.data.getObjectByXPath is deprecated, use get instead","",_4);return _13.get({xpath:_55.xpath,callback:_55.callback,error:_55.error,filter:{limit:1}});},getObject:function(_56,_57,_58){_1.deprecated("mx.data.getObject is deprecated, use get instead","",_4);var _59=_17(arguments,["objId","callback","nocache"]);return _13.get({guid:_59.objId,error:_59.error,callback:_59.callback,noCache:_59.nocache});},createObjectByClass:function(){_1.deprecated("mx.data.createObjectByClass is deprecated, use create instead","",_4);var _5a=arguments[0],_5b=arguments[1],_5c=arguments[2],_5d=arguments[3];if((!(typeof _5a=="string"))&&(!(_5a instanceof String))){throw new Error(name+".createObjectByClass: parameter entity is not of type String");}else{if(!(typeof _5b=="function")){throw new Error(name+".createObjectByClass: parameter callbackFunction is not of type Function");}else{if(!(_5c instanceof mendix.lib.MxContext)){}}}return _13.create({entity:_5a,callback:_5b,error:_5d,context:_5c});},createObject:function(_5e){_1.deprecated("mx.data.createObject is deprecated, use create instead","",_4);return _13.create({entity:_5e.className,callback:_5e.callback,error:_5e.error,context:_5e.context});},deleteObjectsByGUID:function(_5f,_60,_61){_1.deprecated("mx.data.deleteObjectsByGUID is deprecated, use remove instead","",_4);return _13.remove({guids:_5f,callback:_60,error:_61});},saveObject:function(_62,_63){_1.deprecated("mx.data.saveObject is deprecated, use save instead","",_4);return _13.save({mxobj:_62,callback:_63.callback,error:_63.error});},commitObject:function(obj,_64){_1.deprecated("mx.data.commitObject is deprecated, use commit instead","",_4);return _13.commit({mxobj:obj,callback:_64.callback,error:_64.error});},rollbackObject:function(obj,_65){_1.deprecated("mx.data.rollbackObject is deprecated, use rollback instead","",_4);return _13.rollback({mxobj:obj,callback:_65.callback,error:_65.error});},deleteObject:function(obj,_66){_1.deprecated("mx.data.deleteObject is deprecated, use remove instead","",_4);return _13.remove({guid:obj.getGuid(),callback:_66.callback,error:_66.error});},deleteMxObjects:function(_67){_1.deprecated("mx.data.deleteMxObjects is deprecated, use remove instead","",_4);var ids=[],_68=[],_69=_67.mxObjects;for(var i in _69){ids.push(_69[i].getGuid());_68.push(_69[i].getEntity());}_13.remove({guids:ids,callback:function(){for(var i=0,_6a;_6a=_68[i];i++){_13.sendClassUpdate(_6a);}_67.callback&&_67.callback();},error:_67.error});},sizeOfXPathSet:function(_6b){return _1c("sizeOfXPathSet",_6b);},sumOfXPathQuery:function(_6c){_1.deprecated("mx.data.sumOfXPathQuery is deprecated, use sumOfXPathSet instead","",_4);return _1c("sumOfXPathSet",_6c);},sizeOfXPathQuery:function(_6d){_1.deprecated("mx.data.sizeOfXPathQuery is deprecated, use sizeOfXPathSet instead","",_4);return _1c("sizeOfXPathQuery",_6d);},countOfXPathQuery:function(_6e){_1.deprecated("mx.data.countOfXPathQuery is deprecated, use sizeOfXPathSet instead","",_4);return _1c("countOfXPathQuery",_6e);},avgOfXPathQuery:function(_6f){_1.deprecated("mx.data.avgOfXPathQuery is deprecated, use avgOfXPathSet instead","",_4);return _1c("avgOfXPathQuery",_6f);},maxOfXPathQuery:function(_70){_1.deprecated("mx.data.maxOfXPathQuery is deprecated, use maxOfXPathSet instead","",_4);return _1c("maxOfXPathQuery",_70);},minOfXPathQuery:function(_71){_1.deprecated("mx.data.minOfXPathQuery is deprecated, use minOfXPathSet instead","",_4);return _1c("minOfXPathQuery",_71);},ceilingOfXPathQuery:function(_72){_1.deprecated("mx.data.ceilingOfXPathQuery is deprecated, use maxOfXPathSet instead","",_4);return _1c("maxOfXPathQuery",_72);},floorOfXPathQuery:function(_73){_1.deprecated("mx.data.floorOfXPathQuery is deprecated, use minOfXPathSet instead","",_4);return _1c("minOfXPathQuery",_73);}});mendix.lang.deprecate("mx.processor","mx.data",_4);mendix.lang.deprecate("mendix.lib.MxContext",{hasActiveClass:"hasTrackEntity",hasActiveGUID:"hasTrackId",hasTrackID:"hasTrackId",getActiveClass:"getTrackEntity",getActiveGUID:"getTrackId",getTrackID:"getTrackId",setActiveClass:"setTrackEntity",setActive:"setTrackEntity",setTrackID:"setTrackId",setContextFromMxObject:"setContext"},_4);mendix.lang.deprecate("mendix.lib.MxObject",{getGUID:"getGuid",getClass:"getEntity",getAttribute:"get",setAttribute:"set",hasAttribute:"has",getAttributeClass:"getAttributeType",inheritsOf:"inheritsFrom",hasSubClasses:"hasSubEntities",getSubClasses:"getSubEntities",hasSuperClasses:"hasSuperEntities",getSuperClasses:"getSuperEntities",getSelectorClass:"getSelectorEntity"},_4);_1.extend(mendix.lib.MxObject,{save:function(_74){_1.deprecated("mendix.lib.MxObject.save is deprecated, use mx.data.save instead","",_4);return mx.data.save({mxobj:this,error:_74.error,callback:_74.callback});},commit:function(_75){_1.deprecated("mendix.lib.MxObject.commit is deprecated, use mx.data.commit instead","",_4);return mx.data.commit({mxobj:this,error:_75.error,callback:_75.callback});},rollback:function(_76){_1.deprecated("mendix.lib.MxObject.rollback is deprecated, use mx.data.rollback instead","",_4);return mx.data.rollback({mxobj:this,error:_76.error,callback:_76.callback});},saveSequence:function(_77){_1.deprecated("mendix.lib.MxObject.saveSequence is deprecated, use mx.data.save and mx.data.commit instead","",_4);var _78=this;return mx.data.save({mxobj:_78,callback:function(){mx.data.commit({mxobj:_78,callback:function(){}});}});}});mendix.lang.deprecate("mendix.lib.MxMetaObject",{getGUID:"getGuid",getClass:"getEntity",hasAttribute:"has",getAttributeClass:"getAttributeType",inheritsOf:"inheritsFrom",hasSubClasses:"hasSubEntities",getSubClasses:"getSubEntities",hasSuperClasses:"hasSuperEntities",getSuperClasses:"getSuperEntities",getSelectorClass:"getSelectorEntity"},_4);var _79=window.mx.login;window.mx.login=function(){if(arguments.length===0||(arguments.length===1&&typeof arguments[0]=="object")){_1.deprecated("mx.login(args) is deprecated. Use mx.login(username, password, onLoginSucceed, onLoginFailure) instead","",_4);mx.reload();}else{_79.apply(window.mx,arguments);}};})();});