
/* Copyright (c) 2005-2012, Mendix bv. All rights reserved. */

//>>built
define("mendix/compat",["dojo","dijit","dojox"],function(_1,_2,_3){_1.provide("mendix.compat");(function(){var _4="6.0";mendix.lang.deprecate("mendix.lang",{runBindActions:"sequence",runAsyncActions:"collect",runActions:"sequence"},_4);mendix.lang.deprecate("mendix.lang","clone","dojo","clone",_4);mendix.lang.deprecate("mendix.lang","round","dojo.number","round",_4);mendix.lang.deprecate("mendix.lang","toFixed","dojo.number","round",_4);mendix.lang.deprecate("mendix.lang","dupObject","dojo","clone",_4);var _5=mendix.lang,_6={sequence:_5.sequence,collect:_5.collect};_1.mixin(_5,{sequence:function(_7,_8,_9){if(_8 instanceof Array){_1.deprecated("mendix.lang.sequence","Method signature has changed to sequence(seq, callback, scope)",_4);return _6.sequence.call(_5,_8,_9,_7);}else{return _6.sequence.apply(_5,arguments);}},collect:function(_a,_b,_c){if(_b instanceof Array){_1.deprecated("mendix.lang.collect","Method signature has changed to collect(coll, callback, scope)",_4);return _6.collect.call(_5,_b,_c,_a);}else{return _6.collect.apply(_5,arguments);}},inArray:function(_d,_e){_1.deprecated("mendix.lang.inArray is deprecated, use dojo.indexOf instead","",_4);return _1.indexOf(_d,_e)!=-1;}});mendix.lang.deprecate("mx","moduleUrl","dojo","moduleUrl",_4);mendix.lang.deprecate("mx.meta",{getMetaMap:"getMap"},_4);var _f=mx.meta;_1.mixin(_f,{getMetaEntity:function(_10,_11){_1.deprecated("mx.meta.getMetaEntity is deprecated, use getEntity instead","",_4);if(typeof _10!="string"){_1.deprecated("mx.meta.getEntity should have one parameter of type string, which is the entity name","",_4);var _12=_f.getEntity(_10.className),_13=_10.error,_14=_10.callback;if(!_12){_13&&_13.call(_11);}else{_14&&_14.call(_11,_12);}return _12;}return _f.getEntity.apply(_f,arguments);}});mendix.lang.deprecate("mx.metadata","mx.meta",_4);mendix.lang.deprecate("mx.server",{getResource:"get"},_4);mendix.lang.deprecate("mx.xas","action","mx.data","action",_4);var _15=mx.data,_16={},_17={types:{},guids:{}};for(var _18 in _15){_16[_18]=_15[_18];}var _19=function(_1a,map){if(_1a.length==1&&map.length!=1){return _1a[0];}else{var _1b={};for(var i=0,l=map.length;i<l;i++){var _1c=map[i],_1d=_1a[i];if(_1d){_1b[_1c]=_1d;}}return _1b;}};var _1e=function(_1f,_20){if(arguments.length>1){_1.deprecated("mx.data."+_1f+": deprecated arguments, use use { xpath : '', resulttype : '', callback : callback, error : error } instead","",_4);_20=_19([].slice.call(arguments,1),["xpath","callback","resulttype"]);}return _16[_1f](_20);};_1.mixin(_15,{distributeChange:function(_21,_22,_23){_1.deprecated("mx.data.distributeChange is deprecated, use update instead","",_4);return _15.update({guid:_21,attr:_22,value:_23});},addChangeListener:function(_24,_25,_26){_1.deprecated("mx.data.addChangeListener is deprecated, use subscribe instead","",_4);return _15.subscribe({guid:_24,attr:_25,callback:_26});},removeChangeListener:function(_27){_1.deprecated("mx.data.removeChangeListener is deprecated, use unsubscribe instead","",_4);return _15.unsubscribe(_27);},subscribeToClass:function(_28,_29){_1.deprecated("mx.data.subscribeToClass is deprecated, use subscribe instead","",_4);var id=_28.id,sub=_17.types,map=sub[id]||(sub[id]={});if(map[_29]){return map[_29];}else{var _2a=_15.subscribe({entity:_29,callback:_1.hitch(_28,"objectUpdate")});return (map[_29]=_2a);}},unSubscribeFromClass:function(_2b,_2c){_1.deprecated("mx.data.unSubscribeFromClass is deprecated, use unsubscribe instead","",_4);var id=_2b.id,sub=_17.types,_2d=sub[id]&&sub[id][_2c];if(_2d){_15.unsubscribe(_2d);delete sub[id][_2c];if(!mendix.lang.itemCount(sub[id])){delete sub[id];}}},subscribeToGUID:function(_2e,_2f){_1.deprecated("mx.data.subscribeToGUID is deprecated, use subscribe instead","",_4);var id=_2e.id,sub=_17.guids,map=sub[id]||(sub[id]={});if(map[_2f]){return map[_2f];}else{var _30=_15.subscribe({guid:_2f,callback:_1.hitch(_2e,"objectUpdate")});return (map[_2f]=_30);}},unSubscribeFromGUID:function(_31,_32){_1.deprecated("mx.data.unSubscribeFromGUID is deprecated, use unsubscribe instead","",_4);var id=_31.id,sub=_17.guids,_33=sub[id]&&sub[id][_32];if(_33){_15.unsubscribe(_33);delete sub[id][_32];if(!mendix.lang.itemCount(sub[id])){delete sub[id];}}},xasAction:function(_34){_1.deprecated("mx.data.xasAction is deprecated, use action instead","",_4);var _35=_34.callback;_34.callback=function(_36,_37){return _35&&_35(_37,_36);};return _15.action.call(_15,_34);},action:function(_38){if(_38.caller){_1.deprecated("mx.data.action: deprecated arguments, use store property for caller parameter ({ store : { caller : obj }})","",_4);var _39=_38.caller,_3a=_38.store||(_38.store={});_3a.caller=_38.caller;}if(_38.params){_16.action.apply(_15,arguments);}else{_1.deprecated("mx.data.action: deprecated arguments, use params property for action parameters","",_4);var _3b={context:_38.context,callback:_38.callback,error:_38.error,store:_38.store,onValidation:_38.onValidation,async:_38.async,params:_38};delete _38.context;delete _38.callback;delete _38.error;delete _38.store;delete _38.caller;delete _38.onValidation;delete _38.async;_16.action(_3b);}},getObjectsByXPath:function(){_1.deprecated("mx.data.getObjectsByXPath is deprecated, use get instead","",_4);var _3c=arguments;var _3d=(typeof _3c[1]=="function")?_19(_3c,["xpath","callback","useCache"]):_19(_3c,["xpath","options","callback","useCache"]);var _3e=_3d.xpath,_3f=_3d.options||{},_40=_3d.callback,_41=_3d.error||_3f.error;return _15.get({xpath:_3e,callback:_40,error:_3f.error,count:_3f.addcount,filter:{limit:_3f.limit,offset:_3f.offset,sort:_3f.sort,attributes:_3f.tags}});},getAttributeListByXPath:function(_42){_1.deprecated("mx.data.getAttributeListByXPath is deprecated, use get instead","",_4);_42=_42||{};var _43=_42.callback,_44=_42.error,_45=_42.attribute;return _15.get({xpath:_42.xpath,callback:function(_46){var _47={};for(var i=0,l=_46.length;i<l;i++){var _48=_46[i].getAttribute(_45);_47[_48]=_48;}_43&&_43(_47);},error:error,filter:{limit:options.limit,offset:options.offset,sort:options.sort,attributes:[_45],distinct:true}});},getObjectsByXPathSchema:function(){_1.deprecated("mx.data.getObjectsByXPathSchema is deprecated, use get instead","",_4);var _49=_19(arguments,["xpath","options","callback","useCache"]),_4a=_49.options||{},_4b=_49.xpath,_4c=_49.callback,_4d=_49.error||_4a.error;return _15.get({xpath:_4b,callback:_4c,error:_4a.error,count:_4a.addcount,noCache:!_49.useCache,filter:{id:_4a.queryid,limit:_4a.limit,offset:_4a.offset,sort:_4a.sort}});},getObjectsByMicroFlow:function(_4e,_4f,_50){_1.deprecated("mx.data.getObjectsByMicroFlow is deprecated, use get instead","",_4);_4f=_4f||{};_15.action({params:{actionname:_4e,applyto:_4f.applyto||"none",constraints:_4f.constraints||"",guids:_4f.guids||null},context:_4f.context,callback:_50,error:function(e){_4f.error?_4f.error(e):_50&&_50([]);}});},getObjectsById:function(_51){_1.deprecated("mx.data.getObjectsById is deprecated, use get instead","",_4);var _52,_53,_54,_55;if(_51.length==null&&arguments.length==1){var _56=_51;_51=_56.ids;_52=_56.options;_53=_56.callback;_55=_56.error;_54=_56.nocache;}else{if(typeof arguments[1]=="function"){_53=arguments[1];_54=arguments[2];}else{_52=arguments[1];_53=arguments[2];_54=arguments[3];_55=_52?_52.error:null;}}_52=_52||{};return _15.get({guids:_51,callback:_53,error:_55,count:_52.addcount,filter:{limit:_52.limit,offset:_52.offset,sort:_52.sort,attributes:_52.tags}});},getObjectByXPath:function(_57){_1.deprecated("mx.data.getObjectByXPath is deprecated, use get instead","",_4);return _15.get({xpath:_57.xpath,callback:_57.callback,error:_57.error,filter:{limit:1}});},getObject:function(_58,_59,_5a){_1.deprecated("mx.data.getObject is deprecated, use get instead","",_4);var _5b=_19(arguments,["objId","callback","nocache"]);return _15.get({guid:_5b.objId,error:_5b.error,callback:_5b.callback,noCache:_5b.nocache});},createObjectByClass:function(){_1.deprecated("mx.data.createObjectByClass is deprecated, use create instead","",_4);var _5c=arguments[0],_5d=arguments[1],_5e=arguments[2],_5f=arguments[3];if((!(typeof _5c=="string"))&&(!(_5c instanceof String))){throw new Error(name+".createObjectByClass: parameter entity is not of type String");}else{if(!(typeof _5d=="function")){throw new Error(name+".createObjectByClass: parameter callbackFunction is not of type Function");}else{if(!(_5e instanceof mendix.lib.MxContext)){}}}return _15.create({entity:_5c,callback:_5d,error:_5f,context:_5e});},createObject:function(_60){_1.deprecated("mx.data.createObject is deprecated, use create instead","",_4);return _15.create({entity:_60.className,callback:_60.callback,error:_60.error,context:_60.context});},deleteObjectsByGUID:function(_61,_62,_63){_1.deprecated("mx.data.deleteObjectsByGUID is deprecated, use remove instead","",_4);return _15.remove({guids:_61,callback:_62,error:_63});},saveObject:function(_64,_65){_1.deprecated("mx.data.saveObject is deprecated, use save instead","",_4);return _15.save({mxobj:_64,callback:_65.callback,error:_65.error});},commitObject:function(obj,_66){_1.deprecated("mx.data.commitObject is deprecated, use commit instead","",_4);return _15.commit({mxobj:obj,callback:_66.callback,error:_66.error});},rollbackObject:function(obj,_67){_1.deprecated("mx.data.rollbackObject is deprecated, use rollback instead","",_4);return _15.rollback({mxobj:obj,callback:_67.callback,error:_67.error});},deleteObject:function(obj,_68){_1.deprecated("mx.data.deleteObject is deprecated, use remove instead","",_4);return _15.remove({guid:obj.getGuid(),callback:_68.callback,error:_68.error});},deleteMxObjects:function(_69){_1.deprecated("mx.data.deleteMxObjects is deprecated, use remove instead","",_4);var ids=[],_6a=[],_6b=_69.mxObjects;for(var i in _6b){ids.push(_6b[i].getGuid());_6a.push(_6b[i].getEntity());}_15.remove({guids:ids,callback:function(){for(var i=0,_6c;_6c=_6a[i];i++){_15.sendClassUpdate(_6c);}_69.callback&&_69.callback();},error:_69.error});},sizeOfXPathSet:function(_6d){return _1e("sizeOfXPathSet",_6d);},sumOfXPathQuery:function(_6e){_1.deprecated("mx.data.sumOfXPathQuery is deprecated, use sumOfXPathSet instead","",_4);return _1e("sumOfXPathSet",_6e);},sizeOfXPathQuery:function(_6f){_1.deprecated("mx.data.sizeOfXPathQuery is deprecated, use sizeOfXPathSet instead","",_4);return _1e("sizeOfXPathQuery",_6f);},countOfXPathQuery:function(_70){_1.deprecated("mx.data.countOfXPathQuery is deprecated, use sizeOfXPathSet instead","",_4);return _1e("countOfXPathQuery",_70);},avgOfXPathQuery:function(_71){_1.deprecated("mx.data.avgOfXPathQuery is deprecated, use avgOfXPathSet instead","",_4);return _1e("avgOfXPathQuery",_71);},maxOfXPathQuery:function(_72){_1.deprecated("mx.data.maxOfXPathQuery is deprecated, use maxOfXPathSet instead","",_4);return _1e("maxOfXPathQuery",_72);},minOfXPathQuery:function(_73){_1.deprecated("mx.data.minOfXPathQuery is deprecated, use minOfXPathSet instead","",_4);return _1e("minOfXPathQuery",_73);},ceilingOfXPathQuery:function(_74){_1.deprecated("mx.data.ceilingOfXPathQuery is deprecated, use maxOfXPathSet instead","",_4);return _1e("maxOfXPathQuery",_74);},floorOfXPathQuery:function(_75){_1.deprecated("mx.data.floorOfXPathQuery is deprecated, use minOfXPathSet instead","",_4);return _1e("minOfXPathQuery",_75);}});mendix.lang.deprecate("mx.processor","mx.data",_4);mendix.lang.deprecate("mendix.lib.MxContext",{hasActiveClass:"hasTrackEntity",hasActiveGUID:"hasTrackId",hasTrackID:"hasTrackId",getActiveClass:"getTrackEntity",getActiveGUID:"getTrackId",getTrackID:"getTrackId",setActiveClass:"setTrackEntity",setActive:"setTrackEntity",setTrackID:"setTrackId",setContextFromMxObject:"setContext"},_4);mendix.lang.deprecate("mendix.lib.MxObject",{getGUID:"getGuid",getClass:"getEntity",getAttribute:"get",setAttribute:"set",hasAttribute:"has",getAttributeClass:"getAttributeType",inheritsOf:"inheritsFrom",hasSubClasses:"hasSubEntities",getSubClasses:"getSubEntities",hasSuperClasses:"hasSuperEntities",getSuperClasses:"getSuperEntities",getSelectorClass:"getSelectorEntity"},_4);_1.extend(mendix.lib.MxObject,{save:function(_76){_1.deprecated("mendix.lib.MxObject.save is deprecated, use mx.data.save instead","",_4);return mx.data.save({mxobj:this,error:_76.error,callback:_76.callback});},commit:function(_77){_1.deprecated("mendix.lib.MxObject.commit is deprecated, use mx.data.commit instead","",_4);return mx.data.commit({mxobj:this,error:_77.error,callback:_77.callback});},rollback:function(_78){_1.deprecated("mendix.lib.MxObject.rollback is deprecated, use mx.data.rollback instead","",_4);return mx.data.rollback({mxobj:this,error:_78.error,callback:_78.callback});},saveSequence:function(_79){_1.deprecated("mendix.lib.MxObject.saveSequence is deprecated, use mx.data.save and mx.data.commit instead","",_4);var _7a=this;return mx.data.save({mxobj:_7a,callback:function(){mx.data.commit({mxobj:_7a,callback:function(){}});}});}});mendix.lang.deprecate("mendix.lib.MxMetaObject",{getGUID:"getGuid",getClass:"getEntity",hasAttribute:"has",getAttributeClass:"getAttributeType",inheritsOf:"inheritsFrom",hasSubClasses:"hasSubEntities",getSubClasses:"getSubEntities",hasSuperClasses:"hasSuperEntities",getSuperClasses:"getSuperEntities",getSelectorClass:"getSelectorEntity"},_4);})();});