
/* Copyright (c) 2005-2012, Mendix bv. All rights reserved. */

//>>built
define("mendix/lib/XPathSourceBase",["dojo","dijit","dojox"],function(_1,_2,_3){_1.provide("mendix.lib.XPathSourceBase");_1.declare("mendix.lib.XPathSourceBase",[mendix.lib.DataSource],{name:"mendix.lib.XPathSourceBase",_sorting:null,_constraints:"",_staticconstraint:"",_aggData:null,_aggregates:false,_distinct:false,constructor:function(_4){this._sorting=_4.sortparams||[];this._aggregates=_4.aggregates||false;this._attributes=_4.attributes||null;this._depth=_4.depth||0;this._staticconstraint=_4.constraint||"";this._distinct=_4.distinct||false;},setConstraints:function(c,_5){this._constraints=c;this.first();if(_5){this.refresh(_5);}},getConstraints:function(){return this._constraints;},getStaticConstraint:function(){return this._staticconstraint;},getFilterOptions:function(){var _6={offset:this.getOffset(),limit:this.getPageSize(),sort:this._sorting};if(this.attributes){_6.attributes=this.attributes;}if(this._schemaId){_6.id=this._schemaId;}if(this._depth){_6.depth=this._depth;}if(this._distinct){_6.distinct=this._distinct;}return _6;},getSortSettings:function(){return this._sorting;},setSortOptions:function(_7,_8,_9){this._offset=0;if(_7==null||_7===""){throw new Error(this.name+".setSortOptions : illegal sorton parameter!");}else{_8=(_8===""||_8==null)?"asc":_8;if(_9){this._sortFilter(_7,_8);}else{this._sorting=[[_7,_8]];}}},getAggregates:function(){return this._aggData;},getCurrentXPath:function(){return "";},_sortFilter:function(_a,_b){var _c=false;for(var i=0,e;e=this._sorting[i];++i){if(e[0]==_a){this._sorting[i]=[_a,_b];_c=true;continue;}}if(!_c){this._sorting.push([_a,_b]);}},_setAggregates:function(_d){this._aggData=_d;}});});