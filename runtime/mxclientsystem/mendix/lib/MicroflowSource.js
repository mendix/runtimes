
/* Copyright (c) 2005-2012, Mendix bv. All rights reserved. */

//>>built
define("mendix/lib/MicroflowSource",["dojo","dijit","dojox"],function(_1,_2,_3){_1.provide("mendix.lib.MicroflowSource");_1.declare("mendix.lib.MicroflowSource",mendix.lib.DataSource,{name:"mendix.lib.MicroflowSource",_microflow:"",_objs:null,constructor:function(_4){this.inherited(arguments);this._microflow=_4.microflow;},reload:function(_5){mendix.lang.sequence(["_callMicroflow"],_5,this);},refresh:function(_6){this._pageUpdate(_6);},entityUpdate:function(_7){mendix.lang.sequence(["_callMicroflow"],_7,this);},generateExport:function(_8){var _9=_1.map(this._objs,function(_a){return _a.getGuid();});_8.params=_1.mixin({},_8.params,{guids:_9,gridid:this._schemaId});mx.data.generateExport(_8);},_callMicroflow:function(_b){this.release();mx.data.get({microflow:this._microflow,context:this.context,callback:function(_c){this._objs=(_c instanceof Array)?_c:[];this.hold(this._objs);this._pageUpdate(_b);},error:function(e){mx.onError(e);_b&&_b();}},this);}});});