
/* Copyright (c) 2005-2012, Mendix bv. All rights reserved. */

//>>built
define("mendix/sys/XAS",["dojo","dijit","dojox"],function(_1,_2,_3){_1.provide("mendix.sys.XAS");mendix.sys.XAS=function(_4){_4=_4||{};var _5=this,_6="mendix.sys.XAS",_7=false,_8={};this.toString=function(){return _6;};this.startup=function(_9){_7=true;_9();};this.shutdown=function(){_7=false;};this.isLoaded=function(){return _7;};this.getTranslations=function(_a){mx.server.request({request:{action:"get_translations"},options:{callback:function(_b,_c){_a.callback(_c.translations);},error:function(e){if(_a.error){_a.error(e);}else{_a.callback({});}}}});};this.triggerStartup=function(_d){_d=_d||{};mx.server.request({request:{action:"trigger_startup",params:{environment:_d.environment}},options:{callback:function(_e,_f){_d.callback&&_d.callback();},error:function(e){if(_d.error){_d.error(e);}else{_d.callback&&_d.callback();}},useCache:false}});};this.getActiveModules=function(_10){if(typeof _10.callback!="function"){throw new Error(_6+".getActiveModules: no callback specified");}mx.server.request({request:{action:"active_modules",params:{}},options:{sync:true,callback:function(_11,_12){var _13=null,_14=null,_15=_12&&_12.active_modules;if(_15){var _16=_15.clientmodules;_14=_16?_1.map(_16,function(mod){return (/\./.test(mod))?mod:(mod+"."+mod);}):null;_13=_15.customwidgets;}_10.callback({modules:_14,widgets:_13});},error:function(){if(_10.error){_10.error(e);}else{_10.callback({modules:null,widgets:null});}}}});};};});