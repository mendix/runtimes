
/* Copyright (c) 2005-2012, Mendix bv. All rights reserved. */

//>>built
define("mendix/sys/XAS",["mendix/logger","dojo/_base/array"],function(_1,_2){function _3(){var _4="mendix.sys.XAS",_5=false;this.toString=function(){return _4;};this.startup=function(_6){_5=true;_6();};this.shutdown=function(){_5=false;};this.isLoaded=function(){return _5;};this.getTranslations=function(_7){mx.server.request({request:{action:"get_translations"},options:{callback:function(_8,_9){_7.callback(_9.translations);},error:function(e){if(_7.error){_7.error(e);}else{_7.callback({});}}}});};this.triggerStartup=function(_a){_a=_a||{};mx.server.request({request:{action:"trigger_startup",params:{environment:_a.environment}},options:{callback:function(_b,_c){_a.callback&&_a.callback();},error:function(e){if(_a.error){_a.error(e);}else{_a.callback&&_a.callback();}},useCache:false}});};this.getActiveModules=function(_d){if(typeof _d.callback!="function"){throw new Error(_4+".getActiveModules: no callback specified");}mx.server.request({request:{action:"active_modules",params:{}},options:{sync:true,callback:function(_e,_f){var _10=null,_11=null,_12=_f&&_f.active_modules;if(_12){var _13=_12.clientmodules;_11=_13?_2.map(_13,function(mod){return (/\./.test(mod))?mod:(mod+"."+mod);}):null;_10=_12.customwidgets;}_d.callback({modules:_11,widgets:_10});},error:function(){if(_d.error){_d.error(e);}else{_d.callback({modules:null,widgets:null});}}}});};};return _3;});